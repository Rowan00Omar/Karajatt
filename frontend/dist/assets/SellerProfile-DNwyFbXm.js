import{d as N,r,j as e,a as m}from"./index-BEGJQ63u.js";import{R as y}from"./Reviews-Zv_ZVgvl.js";import{S as x}from"./star-CPLMWQXS.js";import{L as c}from"./dialog-Byk43TYp.js";import"./createLucideIcon-D7XQlGWz.js";import"./index-DGHGg_Lk.js";const k=()=>{const{id:i}=N(),[t,h]=r.useState(null),[g,f]=r.useState(!0),[d,p]=r.useState(null),[j,o]=r.useState(!1);r.useEffect(()=>{(async()=>{var l,a;try{const n=await m.get(`/api/seller/profile/${i}`);h(n.data)}catch(n){p(((a=(l=n.response)==null?void 0:l.data)==null?void 0:a.message)||"Failed to fetch seller information"),console.error("Error fetching seller info:",n)}finally{f(!1)}})()},[i]);const u=async()=>{var s,l;try{const a=localStorage.getItem("token");await m.delete(`/api/sellers/${i}`,{headers:{Authorization:`Bearer ${a}`}}),window.location.href="/"}catch(a){console.error("Error deleting account:",a),alert(((l=(s=a.response)==null?void 0:s.data)==null?void 0:l.message)||"Failed to delete account")}};return g?e.jsx("div",{className:"text-center py-8",children:"جاري التحميل..."}):d?e.jsx("div",{className:"text-red-500 text-center py-8",children:d}):t?e.jsxs("div",{className:"max-w-7xl mx-auto pt-30 px-4 sm:px-6 lg:px-8 py-8",dir:"rtl",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center text-white text-2xl",children:t.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t.name}),e.jsx("p",{className:"text-gray-600",children:t.email})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-gray-600",children:"التقييم العام"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex",children:[...Array(5)].map((s,l)=>e.jsx(x,{className:`w-5 h-5 ${l<Math.round(t.average_rating)?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},l))}),e.jsxs("span",{className:"text-lg font-semibold",children:[t.average_rating," من 5"]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-gray-600",children:"عدد المنتجات"}),e.jsx("p",{className:"text-2xl font-semibold",children:t.total_products})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-gray-600",children:"عدد التقييمات"}),e.jsx("p",{className:"text-2xl font-semibold",children:t.total_reviews})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"منتجات البائع"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.products.map(s=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[e.jsx("img",{src:s.image_url||"/placeholder.jpg",alt:s.title,className:"w-full h-48 object-cover"}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:s.title||s.part_name}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("p",{className:"text-green-600 font-semibold",children:[s.price," ريال"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(x,{className:`w-4 h-4 ${s.product_rating>0?"text-yellow-400 fill-yellow-400":"text-gray-300"}`}),e.jsx("span",{className:"text-sm text-gray-600",children:s.product_rating})]})]})]})]},s.product_id))})]}),e.jsx(y,{type:"seller",id:i}),e.jsxs(c,{open:j,onClose:()=>o(!1),className:"relative z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsxs(c.Panel,{className:"mx-auto max-w-sm rounded-lg bg-white p-6",children:[e.jsx(c.Title,{className:"text-lg font-medium text-gray-900 mb-4",children:"تأكيد حذف الحساب"}),e.jsx(c.Description,{className:"text-sm text-gray-500 mb-6",children:"هل أنت متأكد من رغبتك في حذف حسابك؟ هذا الإجراء لا يمكن التراجع عنه."}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 rounded-md",children:"إلغاء"}),e.jsx("button",{onClick:u,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-md",children:"حذف الحساب"})]})]})})]})]}):e.jsx("div",{className:"text-center py-8",children:"لم يتم العثور على البائع"})};export{k as default};
