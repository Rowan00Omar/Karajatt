import{k as g,c as y,r as l,j as e,a as p}from"./index-TKQo8E9Y.js";import{c as d}from"./createLucideIcon-KWJgnnEM.js";/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],f=d("circle-check-big",b);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],N=d("circle-x",j),C=()=>{const[t]=g(),n=y(),[c,a]=l.useState("loading"),[s,x]=l.useState(null);l.useEffect(()=>{(async()=>{try{const r=t.get("order_id"),h=t.get("success"),u=t.get("transaction_id");if(r){const o=await p.get("/api/payments/result/",{params:{order:r,success:h,transaction_id:u}});o.data.success?(a("success"),x(o.data.order)):a("failed")}else a("failed")}catch(r){console.error("Payment verification error:",r),a("failed")}})()},[t]);const i=()=>{n("/")},m=()=>{s!=null&&s.id&&n(`/orders/${s.id}`)};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",dir:"rtl",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full",children:[c==="loading"&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-babyJanaBlue mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"جاري التحقق من حالة الدفع..."})]}),c==="success"&&e.jsxs("div",{className:"text-center",children:[e.jsx(f,{className:"h-16 w-16 text-green-500 mx-auto"}),e.jsx("h2",{className:"mt-4 text-2xl font-bold text-gray-900",children:"تم الدفع بنجاح!"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"شكراً لك على طلبك. تم استلام طلبك وسيتم معالجته قريباً."}),s&&e.jsxs("div",{className:"mt-6 bg-gray-50 rounded-lg p-4 text-right",children:[e.jsxs("p",{className:"text-gray-700",children:["رقم الطلب: ",s.id]}),e.jsxs("p",{className:"text-gray-700",children:["المبلغ الإجمالي: ",s.total," ر.س"]})]}),e.jsxs("div",{className:"mt-8 space-y-3",children:[e.jsx("button",{onClick:m,className:"w-full bg-babyJanaBlue text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"عرض تفاصيل الطلب"}),e.jsx("button",{onClick:i,className:"w-full bg-gray-100 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-200 transition-colors",children:"متابعة التسوق"})]})]}),c==="failed"&&e.jsxs("div",{className:"text-center",children:[e.jsx(N,{className:"h-16 w-16 text-red-500 mx-auto"}),e.jsx("h2",{className:"mt-4 text-2xl font-bold text-gray-900",children:"فشلت عملية الدفع"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"عذراً، حدث خطأ أثناء معالجة الدفع. يرجى المحاولة مرة أخرى."}),e.jsx("div",{className:"mt-8",children:e.jsx("button",{onClick:i,className:"w-full bg-babyJanaBlue text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"العودة للتسوق"})})]})]})})};export{C as default};
