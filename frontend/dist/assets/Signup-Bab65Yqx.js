import{r,c as $,j as e,L as D,a as O}from"./index-Bcnj4llk.js";import{I as t}from"./Input-BQ7MqHid.js";import{B as U}from"./Button-BlwQORzb.js";import{H as k}from"./Helmet-ZKerEnO8.js";import{c as C}from"./createLucideIcon-Bk6MJNge.js";/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],T=C("phone",K);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],J=C("user-plus",G),Q=({flag:a=!1,onSuccess:j})=>{const[u,q]=r.useState(""),[x,E]=r.useState(""),[m,P]=r.useState(""),[n,I]=r.useState(""),[g,L]=r.useState(""),[y,i]=r.useState(""),[o,A]=r.useState("user"),[h,F]=r.useState(""),[p,R]=r.useState(""),[f,z]=r.useState(""),[d,B]=r.useState(""),H=$(),[b,c]=r.useState(!1);r.useEffect(()=>{localStorage.removeItem("token"),localStorage.removeItem("userRole")},[]);const M=async s=>{var S,_;s.preventDefault(),i(""),c(!0);const w=[u,x,m,n,g,o];if(o==="seller"&&w.push(h,p,f,d),w.some(l=>!l)){i("يجب ملأ جميع البيانات!"),c(!1);return}if(n!==g){i("كلمة المرور غير متطابقة!"),c(!1);return}try{const l={first_name:u,last_name:x,email:m,password:n,role:o,phone_number:d};o==="seller"&&(l.seller_info={bank_name:h,account_number:p,address:f,phone_number:d});const v=await O.post("/api/auth/register",l);if(a&&j){j();return}localStorage.setItem("token",v.data.token),localStorage.setItem("userRole",v.data.user.role),window.dispatchEvent(new Event("authChange")),H(`/${v.data.user.role}`)}catch(l){i(((_=(S=l.response)==null?void 0:S.data)==null?void 0:_.message)||"حدث خطأ أثناء التسجيل")}finally{c(!1)}},N=e.jsxs("form",{className:"space-y-6",onSubmit:M,dir:"rtl",children:[!a&&e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"bg-indigo-100 p-3 rounded-full",children:e.jsx(J,{className:"text-indigo-600",size:32})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"إنشاء حساب جديد"})]}),y&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg",children:y}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsx(t,{type:"text",required:!0,placeholder:"الاسم الأول",value:u,onChange:s=>q(s.target.value),className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 transition-colors"})}),e.jsx("div",{children:e.jsx(t,{type:"text",required:!0,placeholder:"الاسم الأخير",value:x,onChange:s=>E(s.target.value),className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 transition-colors"})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx(T,{className:"h-5 w-5 text-gray-400"})}),e.jsx(t,{type:"tel",dir:"ltr",placeholder:"05xxxxxxxx",value:d,onChange:s=>B(s.target.value),className:"w-full pr-10 rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 transition-colors"})]}),e.jsx("div",{children:e.jsx(t,{type:"email",required:!0,placeholder:"البريد الإلكتروني",value:m,onChange:s=>P(s.target.value),className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 transition-colors"})}),e.jsx("div",{children:e.jsx(t,{type:"password",required:!0,placeholder:"كلمة المرور",value:n,onChange:s=>I(s.target.value),className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 transition-colors"})}),e.jsx("div",{children:e.jsx(t,{type:"password",required:!0,placeholder:"تأكيد كلمة المرور",value:g,onChange:s=>L(s.target.value),className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 transition-colors"})}),e.jsx("div",{children:e.jsxs("select",{value:o,onChange:s=>A(s.target.value),className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 transition-colors py-2 px-3",children:[e.jsx("option",{value:"user",children:"مستخدم"}),e.jsx("option",{value:"seller",children:"بائع"}),a&&e.jsx("option",{value:"admin",children:"مشرف"})]})})]}),o==="seller"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsx(t,{type:"text",placeholder:"اسم البنك",value:h,onChange:s=>F(s.target.value),className:"w-full rounded-lg"})}),e.jsx("div",{children:e.jsx(t,{type:"text",placeholder:"رقم الحساب",value:p,onChange:s=>R(s.target.value),className:"w-full rounded-lg"})}),e.jsx("div",{children:e.jsx(t,{type:"text",placeholder:"العنوان",value:f,onChange:s=>z(s.target.value),className:"w-full rounded-lg"})})]}),e.jsx(U,{type:"submit",className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-lg font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors",disabled:b,children:b?"جاري التسجيل...":a?"إضافة المستخدم":"إنشاء حساب"}),!a&&e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["لديك حساب بالفعل؟"," ",e.jsx(D,{to:"/login",className:"font-medium text-indigo-600 hover:text-indigo-500 transition-colors",children:"تسجيل الدخول"})]})})]});return a?e.jsxs(e.Fragment,{children:[e.jsx(k,{children:e.jsx("title",{children:"إنشاء حساب"})}),e.jsx("div",{className:"min-h-screen flex flex-col justify-center items-center bg-gray-50 px-4 py-12 sm:px-6 lg:px-8",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx("div",{className:"bg-white py-8 px-4 shadow-2xl sm:rounded-2xl sm:px-10",children:N})})})]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{children:e.jsx("title",{children:"إنشاء حساب - Karajatt"})}),e.jsx("div",{className:"min-h-screen flex flex-col justify-center items-center bg-gray-50 px-4 py-12 sm:px-6 lg:px-8",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx("div",{className:"bg-white py-8 px-4 shadow-2xl sm:rounded-2xl sm:px-10",children:N})})})]})},ee=Object.freeze(Object.defineProperty({__proto__:null,default:Q},Symbol.toStringTag,{value:"Module"}));export{T as P,Q as S,J as U,ee as a};
