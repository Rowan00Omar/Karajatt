import{r,c as O,j as e,L as C,a as U}from"./index-BEGJQ63u.js";import{I as t}from"./Input-Nh2kS7_N.js";import{B as K}from"./Button-Ws8jbhJw.js";import{H as P}from"./Helmet-Dzy0pJPU.js";import{c as q}from"./createLucideIcon-D7XQlGWz.js";/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],J=q("phone",G);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],V=q("user-plus",Q),W=({flag:o=!1,onSuccess:y})=>{const[u,E]=r.useState(""),[x,I]=r.useState(""),[m,L]=r.useState(""),[d,A]=r.useState(""),[g,F]=r.useState(""),[j,n]=r.useState(""),[a,R]=r.useState("user"),[h,z]=r.useState(""),[p,B]=r.useState(""),[f,H]=r.useState(""),[c,M]=r.useState(""),T=O(),[b,i]=r.useState(!1),[N,$]=r.useState(!1);r.useEffect(()=>{localStorage.removeItem("token"),localStorage.removeItem("userRole")},[]);const D=async s=>{var k,_;s.preventDefault(),n(""),i(!0);const S=[u,x,m,d,g,a];if(a==="seller"&&S.push(h,p,f,c),a==="seller"&&!N){n("يجب الموافقة على سياسة البائع اولا"),i(!1);return}if(S.some(l=>!l)){n("يجب ملأ جميع البيانات!"),i(!1);return}if(d!==g){n("كلمة المرور غير متطابقة!"),i(!1);return}try{const l={first_name:u,last_name:x,email:m,password:d,role:a,phone_number:c};a==="seller"&&(l.seller_info={bank_name:h,account_number:p,address:f,phone_number:c});const v=await U.post("/api/auth/register",l);if(o&&y){y();return}localStorage.setItem("token",v.data.token),localStorage.setItem("userRole",v.data.user.role),window.dispatchEvent(new Event("authChange")),T(`/${v.data.user.role}`)}catch(l){n(((_=(k=l.response)==null?void 0:k.data)==null?void 0:_.message)||"حدث خطأ أثناء التسجيل")}finally{i(!1)}},w=e.jsxs("form",{className:"space-y-6",onSubmit:D,dir:"rtl",children:[!o&&e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"bg-indigo-100 p-3 rounded-full",children:e.jsx(V,{className:"text-indigo-600",size:32})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"إنشاء حساب جديد"})]}),j&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg",children:j}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsx(t,{type:"text",required:!0,placeholder:"الاسم الأول",value:u,onChange:s=>E(s.target.value),className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 transition-colors"})}),e.jsx("div",{children:e.jsx(t,{type:"text",required:!0,placeholder:"الاسم الأخير",value:x,onChange:s=>I(s.target.value),className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 transition-colors"})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx(J,{className:"h-5 w-5 text-gray-400"})}),e.jsx(t,{type:"tel",dir:"ltr",placeholder:"05xxxxxxxx",value:c,onChange:s=>M(s.target.value),className:"w-full pr-10 rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 transition-colors"})]}),e.jsx("div",{children:e.jsx(t,{type:"email",required:!0,placeholder:"البريد الإلكتروني",value:m,onChange:s=>L(s.target.value),className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 transition-colors"})}),e.jsx("div",{children:e.jsx(t,{type:"password",required:!0,placeholder:"كلمة المرور",value:d,onChange:s=>A(s.target.value),className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 transition-colors"})}),e.jsx("div",{children:e.jsx(t,{type:"password",required:!0,placeholder:"تأكيد كلمة المرور",value:g,onChange:s=>F(s.target.value),className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 transition-colors"})}),e.jsx("div",{children:e.jsxs("select",{value:a,onChange:s=>R(s.target.value),className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 transition-colors py-2 px-3",children:[e.jsx("option",{value:"user",children:"مستخدم"}),e.jsx("option",{value:"seller",children:"بائع"}),o&&e.jsx("option",{value:"admin",children:"مشرف"})]})})]}),a==="seller"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsx(t,{type:"text",placeholder:"اسم البنك",value:h,onChange:s=>z(s.target.value),className:"w-full rounded-lg"})}),e.jsx("div",{children:e.jsx(t,{type:"text",placeholder:"رقم الحساب",value:p,onChange:s=>B(s.target.value),className:"w-full rounded-lg"})}),e.jsx("div",{children:e.jsx(t,{type:"text",placeholder:"العنوان",value:f,onChange:s=>H(s.target.value),className:"w-full rounded-lg"})}),e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx("input",{type:"checkbox",id:"sellerPolicy",checked:N,onChange:s=>$(s.target.checked),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),e.jsxs("label",{htmlFor:"sellerPolicy",className:"text-sm text-gray-700",children:["أوافق على "," ",e.jsx(C,{to:"/seller-policy",className:"text-indigo-600 underline hover:text-indigo-800",children:"سياسة البائع"})]})]})]}),e.jsx(K,{type:"submit",className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-lg font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors",disabled:b,children:b?"جاري التسجيل...":o?"إضافة المستخدم":"إنشاء حساب"}),!o&&e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["لديك حساب بالفعل؟"," ",e.jsx(C,{to:"/login",className:"font-medium text-indigo-600 hover:text-indigo-500 transition-colors",children:"تسجيل الدخول"})]})})]});return o?e.jsxs(e.Fragment,{children:[e.jsx(P,{children:e.jsx("title",{children:"إنشاء حساب"})}),e.jsx("div",{className:"min-h-screen flex flex-col justify-center items-center bg-gray-50 px-4 py-12 sm:px-6 lg:px-8",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx("div",{className:"bg-white py-8 px-4 shadow-2xl sm:rounded-2xl sm:px-10",children:w})})})]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{children:e.jsx("title",{children:"إنشاء حساب - Karajatt"})}),e.jsx("div",{className:"min-h-screen flex flex-col justify-center items-center bg-gray-50 px-4 py-12 sm:px-6 lg:px-8",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx("div",{className:"bg-white py-8 px-4 shadow-2xl sm:rounded-2xl sm:px-10",children:w})})})]})},re=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));export{J as P,W as S,V as U,re as a};
