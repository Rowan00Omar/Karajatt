import{k as u,c as g,r as l,j as e,a as y}from"./index-Bcnj4llk.js";import{c as o}from"./createLucideIcon-Bk6MJNge.js";/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],f=o("circle-check-big",p);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],N=o("circle-x",j),k=()=>{const[s]=u(),d=g(),[r,t]=l.useState("loading"),[c,x]=l.useState(null);l.useEffect(()=>{(async()=>{try{const a=s.get("order")||s.get("order_id"),m=s.get("transaction_id")||s.get("id"),h=s.get("success");if(a){const i=await y.get("/api/payments/result/",{params:{order:a,success:h,transaction_id:m}});i.data.success?(t("success"),x(i.data.order)):t("failed")}else t("failed")}catch(a){console.error("Payment verification error:",a),t("failed")}})()},[s]);const n=()=>{d("/")};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",dir:"rtl",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full",children:[r==="loading"&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-babyJanaBlue mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"جاري التحقق من حالة الدفع..."})]}),r==="success"&&e.jsxs("div",{className:"text-center",children:[e.jsx(f,{className:"h-16 w-16 text-green-500 mx-auto"}),e.jsx("h2",{className:"mt-4 text-2xl font-bold text-gray-900",children:"تم الدفع بنجاح!"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"شكراً لك على طلبك. تم استلام طلبك وسيتم معالجته قريباً."}),c&&e.jsxs("div",{className:"mt-6 bg-gray-50 rounded-lg p-4 text-right",children:[e.jsxs("p",{className:"text-gray-700",children:["رقم الطلب: ",c.id]}),e.jsxs("p",{className:"text-gray-700",children:["المبلغ الإجمالي: ",c.total," ر.س"]})]}),e.jsx("div",{className:"mt-8 space-y-3",children:e.jsx("button",{onClick:n,className:"w-full bg-gray-100 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-200 transition-colors",children:"متابعة التسوق"})})]}),r==="failed"&&e.jsxs("div",{className:"text-center",children:[e.jsx(N,{className:"h-16 w-16 text-red-500 mx-auto"}),e.jsx("h2",{className:"mt-4 text-2xl font-bold text-gray-900",children:"فشلت عملية الدفع"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"عذراً، حدث خطأ أثناء معالجة الدفع. يرجى المحاولة مرة أخرى."}),e.jsx("div",{className:"mt-8",children:e.jsx("button",{onClick:n,className:"w-full bg-babyJanaBlue text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"العودة للتسوق"})})]})]})})};export{k as default};
