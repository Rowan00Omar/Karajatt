import{r as i,a as o,j as e,y as x}from"./index-DscFR1JC.js";import{H as v}from"./Helmet-dl-wI-zg.js";import{C as y,a as _}from"./chevron-up-BtKv-Xqm.js";import{c as b}from"./createLucideIcon-A6t_KuAT.js";import{X as w}from"./x-ByWArFvx.js";/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],C=b("check",k);function F(){const[c,n]=i.useState([]),[h,p]=i.useState(!0),[m,g]=i.useState(null),[l,j]=i.useState(null);i.useEffect(()=>{f()},[]);const f=async()=>{var s,t;try{const a=localStorage.getItem("token"),r=await o.get("/api/admin/pending-requests",{headers:{Authorization:`Bearer ${a}`}});n(r.data.requests||[])}catch(a){console.error("Error fetching pending requests:",a),g(((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to fetch pending requests")}finally{p(!1)}},u=async s=>{var t,a;try{const r=localStorage.getItem("token");await o.post(`/api/admin/approve-request/${s}`,{},{headers:{Authorization:`Bearer ${r}`}}),n(c.filter(d=>d.product_id!==s))}catch(r){x.error(((a=(t=r.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to approve request")}},N=async s=>{var t,a;if(confirm("هل أنت متأكد من رفض هذا الطلب؟"))try{const r=localStorage.getItem("token");await o.post(`/api/admin/reject-request/${s}`,{},{headers:{Authorization:`Bearer ${r}`}}),n(c.filter(d=>d.product_id!==s))}catch(r){x.error(((a=(t=r.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to reject request")}};return h?e.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):m?e.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:e.jsxs("div",{className:"text-red-600 text-center",children:[e.jsx("p",{className:"text-xl font-semibold mb-2",children:"خطأ"}),e.jsx("p",{children:m})]})}):c.length?e.jsxs(e.Fragment,{children:[e.jsx(v,{children:e.jsx("title",{children:"الطلبات المعلقة"})}),e.jsxs("section",{className:"w-full animate-fadeIn",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-6",children:"الطلبات المعلقة"}),e.jsx("div",{className:"grid gap-4",children:c.map(s=>e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:s.title||s.part_name}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:["البائع: ",s.seller_name]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>j(l===s.product_id?null:s.product_id),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:l===s.product_id?e.jsx(y,{className:"h-5 w-5"}):e.jsx(_,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>u(s.product_id),className:"p-2 text-green-600 hover:bg-green-50 rounded-full transition-colors",title:"قبول",children:e.jsx(C,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>N(s.product_id),className:"p-2 text-red-600 hover:bg-red-50 rounded-full transition-colors",title:"رفض",children:e.jsx(w,{className:"h-5 w-5"})})]})]}),l===s.product_id&&e.jsxs("div",{className:"mt-4 grid gap-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"الشركة المصنعة"}),e.jsx("p",{children:s.company_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"الموديل"}),e.jsx("p",{children:s.car_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"سنة البداية"}),e.jsx("p",{children:s.start_year})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"سنة النهاية"}),e.jsx("p",{children:s.end_year})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"السعر"}),e.jsxs("p",{children:[s.price," ر.س"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"الحالة"}),e.jsx("p",{children:s.condition})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 mb-1",children:"الوصف"}),e.jsx("p",{className:"text-sm",children:s.description})]}),s.image_url&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 mb-2",children:"الصور"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[e.jsx("img",{src:s.image_url,alt:"صورة القطعة",className:"rounded-lg w-full h-24 object-cover"}),s.extra_image1&&e.jsx("img",{src:s.extra_image1,alt:"صورة إضافية 1",className:"rounded-lg w-full h-24 object-cover"}),s.extra_image2&&e.jsx("img",{src:s.extra_image2,alt:"صورة إضافية 2",className:"rounded-lg w-full h-24 object-cover"}),s.extra_image3&&e.jsx("img",{src:s.extra_image3,alt:"صورة إضافية 3",className:"rounded-lg w-full h-24 object-cover"})]})]})]})]},s.product_id))})]})]}):e.jsx("div",{className:"flex flex-col items-center justify-center min-h-[400px]",children:e.jsx("p",{className:"text-gray-600",children:"لا توجد طلبات معلقة"})})}export{F as default};
