import{r as o,d as v,c as w,j as e,a as N}from"./index-Dn0qhe6D.js";import{I as g}from"./Input-CPFVIBKQ.js";import{B as S}from"./Button-BtIySsyH.js";import{X as C}from"./x-BxmEdPPq.js";import{K as P}from"./key-round-BNV82ixm.js";import"./createLucideIcon-BBubB0Ge.js";const z=()=>{const[s,f]=o.useState(""),[n,h]=o.useState(""),[d,c]=o.useState(""),[x,t]=o.useState(""),[l,a]=o.useState(!1),{token:b}=v(),m=w(),j=()=>{m("/login")},y=async r=>{var u,p;if(r.preventDefault(),t(""),c(""),a(!0),!s||!n){t("يرجى تعبئة جميع الحقول"),a(!1);return}if(s!==n){t("كلمات المرور غير متطابقة"),a(!1);return}if(s.length<8){t("يجب أن تكون كلمة المرور 8 أحرف على الأقل"),a(!1);return}try{const i=await N.post("/api/auth/reset-password",{token:b,password:s});c(i.data.message||"تم تغيير كلمة المرور بنجاح"),setTimeout(()=>{m("/login")},2e3)}catch(i){t(((p=(u=i.response)==null?void 0:u.data)==null?void 0:p.message)||"حدث خطأ أثناء تغيير كلمة المرور")}finally{a(!1)}};return e.jsx("div",{className:"fixed inset-0 flex flex-col justify-center items-center bg-gray-900/30 backdrop-blur-md px-4 py-12 sm:px-6 lg:px-8",children:e.jsx("div",{className:"w-full max-w-md relative",children:e.jsxs("div",{className:"bg-white py-8 px-4 shadow-2xl sm:rounded-2xl sm:px-10",children:[e.jsx("button",{onClick:j,className:"absolute top-4 left-4 text-gray-400 hover:text-gray-500 transition-colors",children:e.jsx(C,{className:"w-6 h-6"})}),e.jsxs("form",{className:"space-y-6",onSubmit:y,dir:"rtl",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"bg-indigo-100 p-3 rounded-full",children:e.jsx(P,{className:"text-indigo-600",size:32})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"إعادة تعيين كلمة المرور"}),e.jsx("p",{className:"text-gray-600 text-center",children:"أدخل كلمة المرور الجديدة"})]}),d&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-600 px-4 py-3 rounded-lg",children:d}),x&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg",children:x}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsx(g,{type:"password",placeholder:"كلمة المرور الجديدة",value:s,onChange:r=>f(r.target.value),className:"w-full",disabled:l})}),e.jsx("div",{children:e.jsx(g,{type:"password",placeholder:"تأكيد كلمة المرور",value:n,onChange:r=>h(r.target.value),className:"w-full",disabled:l})})]}),e.jsx(S,{type:"submit",className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-lg font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors",disabled:l,children:l?"جاري التغيير...":"تغيير كلمة المرور"})]})]})})})};export{z as default};
