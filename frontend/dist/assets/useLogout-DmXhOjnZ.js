import{c as n}from"./createLucideIcon-Cb3-QgJi.js";import{c as i,y as o,j as t}from"./index-0uQ4Kv7o.js";/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],m=n("log-out",l);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],h=n("user",u),p=()=>{const s=i(),r=async()=>{const e=o.info(t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"mb-3",children:"هل أنت متأكد من تسجيل الخروج؟"}),t.jsxs("div",{className:"flex justify-center space-x-2 space-x-reverse",children:[t.jsx("button",{onClick:()=>{o.dismiss(e),c()},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:"نعم، تسجيل خروج"}),t.jsx("button",{onClick:()=>o.dismiss(e),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-sm",children:"إلغاء"})]})]}),{position:"top-center",autoClose:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!0,closeButton:!1,style:{minWidth:"300px"}})},c=async()=>{try{const e=localStorage.getItem("token");if(!e){s("/login");return}const a=await fetch("/api/auth/logout",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});a.ok?(localStorage.removeItem("token"),localStorage.removeItem("userRole"),window.dispatchEvent(new Event("authChange")),o.success("تم تسجيل الخروج بنجاح"),s("/login")):(console.error("Logout failed:",await a.text()),localStorage.removeItem("token"),localStorage.removeItem("userRole"),window.dispatchEvent(new Event("authChange")),o.error("حدث خطأ أثناء تسجيل الخروج"),s("/login"))}catch(e){console.error("Logout failed:",e),localStorage.removeItem("userRole"),window.dispatchEvent(new Event("authChange")),o.error("حدث خطأ أثناء تسجيل الخروج"),s("/login")}};return r};export{m as L,h as U,p as u};
