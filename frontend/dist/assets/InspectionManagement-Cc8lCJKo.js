var Vt=Object.defineProperty;var Tt=_=>{throw TypeError(_)};var Xt=(_,s,b)=>s in _?Vt(_,s,{enumerable:!0,configurable:!0,writable:!0,value:b}):_[s]=b;var ke=(_,s,b)=>Xt(_,typeof s!="symbol"?s+"":s,b),ot=(_,s,b)=>s.has(_)||Tt("Cannot "+b);var I=(_,s,b)=>(ot(_,s,"read from private field"),b?b.call(_):s.get(_)),pe=(_,s,b)=>s.has(_)?Tt("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(_):s.set(_,b),fe=(_,s,b,e)=>(ot(_,s,"write to private field"),e?e.call(_,b):s.set(_,b),b),ue=(_,s,b)=>(ot(_,s,"access private method"),b);var lt=(_,s,b,e)=>({set _(c){fe(_,s,c,b)},get _(){return I(_,s,e)}});import{g as getAugmentedNamespace,r as reactExports,U,a as axios,j as jsxRuntimeExports}from"./index-D16p3XyI.js";import{P as PropTypes,H as HelmetExport}from"./Helmet-Ddbi4KVR.js";import{i as invariant}from"./tiny-invariant-CopsF_GD.js";import{F as ForwardRef$7}from"./DocumentTextIcon-B-rYag8m.js";function _extends(){return _extends=Object.assign?Object.assign.bind():function(_){for(var s=1;s<arguments.length;s++){var b=arguments[s];for(var e in b)({}).hasOwnProperty.call(b,e)&&(_[e]=b[e])}return _},_extends.apply(null,arguments)}function _objectWithoutPropertiesLoose(_,s){if(_==null)return{};var b={};for(var e in _)if({}.hasOwnProperty.call(_,e)){if(s.indexOf(e)!==-1)continue;b[e]=_[e]}return b}function _setPrototypeOf(_,s){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,e){return b.__proto__=e,b},_setPrototypeOf(_,s)}function _assertThisInitialized(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function commonjsRequire(_){throw new Error('Could not dynamically require "'+_+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,function(module,exports){(function(s,b){module.exports=b()})(globalThis,()=>(()=>{var __webpack_modules__=[,(_,s,b)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.VerbosityLevel=s.Util=s.UnknownErrorException=s.UnexpectedResponseException=s.UNSUPPORTED_FEATURES=s.TextRenderingMode=s.StreamType=s.RenderingIntentFlag=s.PermissionFlag=s.PasswordResponses=s.PasswordException=s.PageActionEventType=s.OPS=s.MissingPDFException=s.LINE_FACTOR=s.LINE_DESCENT_FACTOR=s.InvalidPDFException=s.ImageKind=s.IDENTITY_MATRIX=s.FormatError=s.FontType=s.FeatureTest=s.FONT_IDENTITY_MATRIX=s.DocumentActionEventType=s.CMapCompressionType=s.BaseException=s.AnnotationType=s.AnnotationStateModelType=s.AnnotationReviewState=s.AnnotationReplyType=s.AnnotationMode=s.AnnotationMarkedState=s.AnnotationFlag=s.AnnotationFieldFlag=s.AnnotationEditorType=s.AnnotationEditorPrefix=s.AnnotationEditorParamsType=s.AnnotationBorderStyleType=s.AnnotationActionEventType=s.AbortException=void 0,s.arrayByteLength=j,s.arraysToBytes=ne,s.assert=g,s.bytesToString=w,s.createPromiseCapability=We,s.createValidAbsoluteUrl=L,s.escapeString=xe,s.getModificationDate=Be,s.getVerbosityLevel=se,s.info=de,s.isArrayBuffer=Te,s.isArrayEqual=Le,s.isAscii=we,s.objectFromMap=ee,s.objectSize=J,s.setVerbosityLevel=K,s.shadow=W,s.string32=q,s.stringToBytes=f,s.stringToPDFString=Ae,s.stringToUTF16BEString=Ee,s.stringToUTF8String=Re,s.unreachable=V,s.utf8StringToString=Pe,s.warn=ge,b(2);const e=[1,0,0,1,0,0];s.IDENTITY_MATRIX=e;const c=[.001,0,0,.001,0,0];s.FONT_IDENTITY_MATRIX=c;const D=1.35;s.LINE_FACTOR=D;const N=.35;s.LINE_DESCENT_FACTOR=N;const M={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};s.RenderingIntentFlag=M;const S={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};s.AnnotationMode=S;const y="pdfjs_internal_editor_";s.AnnotationEditorPrefix=y;const k={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};s.AnnotationEditorType=k;const B={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};s.AnnotationEditorParamsType=B;const R={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};s.PermissionFlag=R;const P={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};s.TextRenderingMode=P;const h={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};s.ImageKind=h;const t={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};s.AnnotationType=t;const l={MARKED:"Marked",REVIEW:"Review"};s.AnnotationStateModelType=l;const u={MARKED:"Marked",UNMARKED:"Unmarked"};s.AnnotationMarkedState=u;const T={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};s.AnnotationReviewState=T;const v={GROUP:"Group",REPLY:"R"};s.AnnotationReplyType=v;const p={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};s.AnnotationFlag=p;const a={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};s.AnnotationFieldFlag=a;const o={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};s.AnnotationBorderStyleType=o;const n={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};s.AnnotationActionEventType=n;const x={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};s.DocumentActionEventType=x;const C={O:"PageOpen",C:"PageClose"};s.PageActionEventType=C;const z={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};s.StreamType=z;const G={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};s.FontType=G;const ae={ERRORS:0,WARNINGS:1,INFOS:5};s.VerbosityLevel=ae;const le={NONE:0,BINARY:1,STREAM:2};s.CMapCompressionType=le;const re={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};s.OPS=re;const te={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};s.UNSUPPORTED_FEATURES=te;const X={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};s.PasswordResponses=X;let Y=ae.WARNINGS;function K(ce){Number.isInteger(ce)&&(Y=ce)}function se(){return Y}function de(ce){Y>=ae.INFOS&&console.log(`Info: ${ce}`)}function ge(ce){Y>=ae.WARNINGS&&console.log(`Warning: ${ce}`)}function V(ce){throw new Error(ce)}function g(ce,Q){ce||V(Q)}function d(ce){if(!ce)return!1;switch(ce.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function L(ce,Q=null,Z=null){if(!ce)return null;try{if(Z&&typeof ce=="string"){if(Z.addDefaultProtocol&&ce.startsWith("www.")){const _e=ce.match(/\./g);_e&&_e.length>=2&&(ce=`http://${ce}`)}if(Z.tryConvertEncoding)try{ce=Re(ce)}catch{}}const me=Q?new URL(ce,Q):new URL(ce);if(d(me))return me}catch{}return null}function W(ce,Q,Z){return Object.defineProperty(ce,Q,{value:Z,enumerable:!0,configurable:!0,writable:!1}),Z}const $=function(){function Q(Z,me){this.constructor===Q&&V("Cannot initialize BaseException."),this.message=Z,this.name=me}return Q.prototype=new Error,Q.constructor=Q,Q}();s.BaseException=$;class H extends ${constructor(Q,Z){super(Q,"PasswordException"),this.code=Z}}s.PasswordException=H;class i extends ${constructor(Q,Z){super(Q,"UnknownErrorException"),this.details=Z}}s.UnknownErrorException=i;class m extends ${constructor(Q){super(Q,"InvalidPDFException")}}s.InvalidPDFException=m;class E extends ${constructor(Q){super(Q,"MissingPDFException")}}s.MissingPDFException=E;class A extends ${constructor(Q,Z){super(Q,"UnexpectedResponseException"),this.status=Z}}s.UnexpectedResponseException=A;class F extends ${constructor(Q){super(Q,"FormatError")}}s.FormatError=F;class O extends ${constructor(Q){super(Q,"AbortException")}}s.AbortException=O;function w(ce){(typeof ce!="object"||ce===null||ce.length===void 0)&&V("Invalid argument for bytesToString");const Q=ce.length,Z=8192;if(Q<Z)return String.fromCharCode.apply(null,ce);const me=[];for(let _e=0;_e<Q;_e+=Z){const Ce=Math.min(_e+Z,Q),Se=ce.subarray(_e,Ce);me.push(String.fromCharCode.apply(null,Se))}return me.join("")}function f(ce){typeof ce!="string"&&V("Invalid argument for stringToBytes");const Q=ce.length,Z=new Uint8Array(Q);for(let me=0;me<Q;++me)Z[me]=ce.charCodeAt(me)&255;return Z}function j(ce){if(ce.length!==void 0)return ce.length;if(ce.byteLength!==void 0)return ce.byteLength;V("Invalid argument for arrayByteLength")}function ne(ce){const Q=ce.length;if(Q===1&&ce[0]instanceof Uint8Array)return ce[0];let Z=0;for(let Ce=0;Ce<Q;Ce++)Z+=j(ce[Ce]);let me=0;const _e=new Uint8Array(Z);for(let Ce=0;Ce<Q;Ce++){let Se=ce[Ce];Se instanceof Uint8Array||(typeof Se=="string"?Se=f(Se):Se=new Uint8Array(Se));const Ne=Se.byteLength;_e.set(Se,me),me+=Ne}return _e}function q(ce){return String.fromCharCode(ce>>24&255,ce>>16&255,ce>>8&255,ce&255)}function J(ce){return Object.keys(ce).length}function ee(ce){const Q=Object.create(null);for(const[Z,me]of ce)Q[Z]=me;return Q}function oe(){const ce=new Uint8Array(4);return ce[0]=1,new Uint32Array(ce.buffer,0,1)[0]===1}function he(){try{return new Function(""),!0}catch{return!1}}class ie{static get isLittleEndian(){return W(this,"isLittleEndian",oe())}static get isEvalSupported(){return W(this,"isEvalSupported",he())}static get isOffscreenCanvasSupported(){return W(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}}s.FeatureTest=ie;const ve=[...Array(256).keys()].map(ce=>ce.toString(16).padStart(2,"0"));class be{static makeHexColor(Q,Z,me){return`#${ve[Q]}${ve[Z]}${ve[me]}`}static scaleMinMax(Q,Z){let me;Q[0]?(Q[0]<0&&(me=Z[0],Z[0]=Z[1],Z[1]=me),Z[0]*=Q[0],Z[1]*=Q[0],Q[3]<0&&(me=Z[2],Z[2]=Z[3],Z[3]=me),Z[2]*=Q[3],Z[3]*=Q[3]):(me=Z[0],Z[0]=Z[2],Z[2]=me,me=Z[1],Z[1]=Z[3],Z[3]=me,Q[1]<0&&(me=Z[2],Z[2]=Z[3],Z[3]=me),Z[2]*=Q[1],Z[3]*=Q[1],Q[2]<0&&(me=Z[0],Z[0]=Z[1],Z[1]=me),Z[0]*=Q[2],Z[1]*=Q[2]),Z[0]+=Q[4],Z[1]+=Q[4],Z[2]+=Q[5],Z[3]+=Q[5]}static transform(Q,Z){return[Q[0]*Z[0]+Q[2]*Z[1],Q[1]*Z[0]+Q[3]*Z[1],Q[0]*Z[2]+Q[2]*Z[3],Q[1]*Z[2]+Q[3]*Z[3],Q[0]*Z[4]+Q[2]*Z[5]+Q[4],Q[1]*Z[4]+Q[3]*Z[5]+Q[5]]}static applyTransform(Q,Z){const me=Q[0]*Z[0]+Q[1]*Z[2]+Z[4],_e=Q[0]*Z[1]+Q[1]*Z[3]+Z[5];return[me,_e]}static applyInverseTransform(Q,Z){const me=Z[0]*Z[3]-Z[1]*Z[2],_e=(Q[0]*Z[3]-Q[1]*Z[2]+Z[2]*Z[5]-Z[4]*Z[3])/me,Ce=(-Q[0]*Z[1]+Q[1]*Z[0]+Z[4]*Z[1]-Z[5]*Z[0])/me;return[_e,Ce]}static getAxialAlignedBoundingBox(Q,Z){const me=be.applyTransform(Q,Z),_e=be.applyTransform(Q.slice(2,4),Z),Ce=be.applyTransform([Q[0],Q[3]],Z),Se=be.applyTransform([Q[2],Q[1]],Z);return[Math.min(me[0],_e[0],Ce[0],Se[0]),Math.min(me[1],_e[1],Ce[1],Se[1]),Math.max(me[0],_e[0],Ce[0],Se[0]),Math.max(me[1],_e[1],Ce[1],Se[1])]}static inverseTransform(Q){const Z=Q[0]*Q[3]-Q[1]*Q[2];return[Q[3]/Z,-Q[1]/Z,-Q[2]/Z,Q[0]/Z,(Q[2]*Q[5]-Q[4]*Q[3])/Z,(Q[4]*Q[1]-Q[5]*Q[0])/Z]}static apply3dTransform(Q,Z){return[Q[0]*Z[0]+Q[1]*Z[1]+Q[2]*Z[2],Q[3]*Z[0]+Q[4]*Z[1]+Q[5]*Z[2],Q[6]*Z[0]+Q[7]*Z[1]+Q[8]*Z[2]]}static singularValueDecompose2dScale(Q){const Z=[Q[0],Q[2],Q[1],Q[3]],me=Q[0]*Z[0]+Q[1]*Z[2],_e=Q[0]*Z[1]+Q[1]*Z[3],Ce=Q[2]*Z[0]+Q[3]*Z[2],Se=Q[2]*Z[1]+Q[3]*Z[3],Ne=(me+Se)/2,qe=Math.sqrt((me+Se)**2-4*(me*Se-Ce*_e))/2,Ue=Ne+qe||1,Me=Ne-qe||1;return[Math.sqrt(Ue),Math.sqrt(Me)]}static normalizeRect(Q){const Z=Q.slice(0);return Q[0]>Q[2]&&(Z[0]=Q[2],Z[2]=Q[0]),Q[1]>Q[3]&&(Z[1]=Q[3],Z[3]=Q[1]),Z}static intersect(Q,Z){const me=Math.max(Math.min(Q[0],Q[2]),Math.min(Z[0],Z[2])),_e=Math.min(Math.max(Q[0],Q[2]),Math.max(Z[0],Z[2]));if(me>_e)return null;const Ce=Math.max(Math.min(Q[1],Q[3]),Math.min(Z[1],Z[3])),Se=Math.min(Math.max(Q[1],Q[3]),Math.max(Z[1],Z[3]));return Ce>Se?null:[me,Ce,_e,Se]}static bezierBoundingBox(Q,Z,me,_e,Ce,Se,Ne,qe){const Ue=[],Me=[[],[]];let $e,je,Ke,Fe,Je,Qe,st,it;for(let at=0;at<2;++at){if(at===0?(je=6*Q-12*me+6*Ce,$e=-3*Q+9*me-9*Ce+3*Ne,Ke=3*me-3*Q):(je=6*Z-12*_e+6*Se,$e=-3*Z+9*_e-9*Se+3*qe,Ke=3*_e-3*Z),Math.abs($e)<1e-12){if(Math.abs(je)<1e-12)continue;Fe=-Ke/je,0<Fe&&Fe<1&&Ue.push(Fe);continue}st=je*je-4*Ke*$e,it=Math.sqrt(st),!(st<0)&&(Je=(-je+it)/(2*$e),0<Je&&Je<1&&Ue.push(Je),Qe=(-je-it)/(2*$e),0<Qe&&Qe<1&&Ue.push(Qe))}let ze=Ue.length,Oe;const Ve=ze;for(;ze--;)Fe=Ue[ze],Oe=1-Fe,Me[0][ze]=Oe*Oe*Oe*Q+3*Oe*Oe*Fe*me+3*Oe*Fe*Fe*Ce+Fe*Fe*Fe*Ne,Me[1][ze]=Oe*Oe*Oe*Z+3*Oe*Oe*Fe*_e+3*Oe*Fe*Fe*Se+Fe*Fe*Fe*qe;return Me[0][Ve]=Q,Me[1][Ve]=Z,Me[0][Ve+1]=Ne,Me[1][Ve+1]=qe,Me[0].length=Me[1].length=Ve+2,[Math.min(...Me[0]),Math.min(...Me[1]),Math.max(...Me[0]),Math.max(...Me[1])]}}s.Util=be;const ye=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Ae(ce){if(ce[0]>="ï"){let Z;if(ce[0]==="þ"&&ce[1]==="ÿ"?Z="utf-16be":ce[0]==="ÿ"&&ce[1]==="þ"?Z="utf-16le":ce[0]==="ï"&&ce[1]==="»"&&ce[2]==="¿"&&(Z="utf-8"),Z)try{const me=new TextDecoder(Z,{fatal:!0}),_e=f(ce);return me.decode(_e)}catch(me){ge(`stringToPDFString: "${me}".`)}}const Q=[];for(let Z=0,me=ce.length;Z<me;Z++){const _e=ye[ce.charCodeAt(Z)];Q.push(_e?String.fromCharCode(_e):ce.charAt(Z))}return Q.join("")}function xe(ce){return ce.replace(/([()\\\n\r])/g,Q=>Q===`
`?"\\n":Q==="\r"?"\\r":`\\${Q}`)}function we(ce){return/^[\x00-\x7F]*$/.test(ce)}function Ee(ce){const Q=["þÿ"];for(let Z=0,me=ce.length;Z<me;Z++){const _e=ce.charCodeAt(Z);Q.push(String.fromCharCode(_e>>8&255),String.fromCharCode(_e&255))}return Q.join("")}function Re(ce){return decodeURIComponent(escape(ce))}function Pe(ce){return unescape(encodeURIComponent(ce))}function Te(ce){return typeof ce=="object"&&ce!==null&&ce.byteLength!==void 0}function Le(ce,Q){if(ce.length!==Q.length)return!1;for(let Z=0,me=ce.length;Z<me;Z++)if(ce[Z]!==Q[Z])return!1;return!0}function Be(ce=new Date){return[ce.getUTCFullYear().toString(),(ce.getUTCMonth()+1).toString().padStart(2,"0"),ce.getUTCDate().toString().padStart(2,"0"),ce.getUTCHours().toString().padStart(2,"0"),ce.getUTCMinutes().toString().padStart(2,"0"),ce.getUTCSeconds().toString().padStart(2,"0")].join("")}function We(){const ce=Object.create(null);let Q=!1;return Object.defineProperty(ce,"settled",{get(){return Q}}),ce.promise=new Promise(function(Z,me){ce.resolve=function(_e){Q=!0,Z(_e)},ce.reject=function(_e){Q=!0,me(_e)}}),ce}},(_,s,b)=>{b(3)},(_,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isNodeJS=void 0;const b=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");s.isNodeJS=b},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var _,b,e,c,D,N,M,S,y,ct,B,R;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(5),_display_utils=__w_pdfjs_require__(8),_font_loader=__w_pdfjs_require__(11),_canvas=__w_pdfjs_require__(12),_worker_options=__w_pdfjs_require__(15),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(16),_metadata=__w_pdfjs_require__(17),_optional_content_config=__w_pdfjs_require__(18),_transport_stream=__w_pdfjs_require__(19),_xfa_text=__w_pdfjs_require__(20);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:h,NodeCMapReaderFactory:t,NodeStandardFontDataFactory:l}=__w_pdfjs_require__(21);exports.DefaultCanvasFactory=DefaultCanvasFactory=h,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=t,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=l}let createPDFNetworkStream;function setPDFNetworkStreamFactory(h){createPDFNetworkStream=h}function getDocument(h){const t=new PDFDocumentLoadingTask;let l;if(typeof h=="string"||h instanceof URL)l={url:h};else if((0,_util.isArrayBuffer)(h))l={data:h};else if(h instanceof PDFDataRangeTransport)l={range:h};else{if(typeof h!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!h.url&&!h.data&&!h.range)throw new Error("Invalid parameter object: need either .data, .range or .url");l=h}const u=Object.create(null);let T=null,v=null;for(const a in l){const o=l[a];switch(a){case"url":if(typeof window<"u")try{u[a]=new URL(o,window.location).href;continue}catch(n){(0,_util.warn)(`Cannot create valid URL: "${n}".`)}else if(typeof o=="string"||o instanceof URL){u[a]=o.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":T=o;continue;case"worker":v=o;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&o instanceof Buffer)u[a]=new Uint8Array(o);else{if(o instanceof Uint8Array)break;if(typeof o=="string")u[a]=(0,_util.stringToBytes)(o);else if(typeof o=="object"&&o!==null&&!isNaN(o.length))u[a]=new Uint8Array(o);else if((0,_util.isArrayBuffer)(o))u[a]=new Uint8Array(o);else throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}continue}u[a]=o}if(u.CMapReaderFactory=u.CMapReaderFactory||DefaultCMapReaderFactory,u.StandardFontDataFactory=u.StandardFontDataFactory||DefaultStandardFontDataFactory,u.ignoreErrors=u.stopAtErrors!==!0,u.fontExtraProperties=u.fontExtraProperties===!0,u.pdfBug=u.pdfBug===!0,u.enableXfa=u.enableXfa===!0,(!Number.isInteger(u.rangeChunkSize)||u.rangeChunkSize<1)&&(u.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof u.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(u.docBaseUrl))&&(u.docBaseUrl=null),(!Number.isInteger(u.maxImageSize)||u.maxImageSize<-1)&&(u.maxImageSize=-1),typeof u.cMapUrl!="string"&&(u.cMapUrl=null),typeof u.standardFontDataUrl!="string"&&(u.standardFontDataUrl=null),typeof u.useWorkerFetch!="boolean"&&(u.useWorkerFetch=u.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&u.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof u.isEvalSupported!="boolean"&&(u.isEvalSupported=!0),typeof u.disableFontFace!="boolean"&&(u.disableFontFace=_is_node.isNodeJS),typeof u.useSystemFonts!="boolean"&&(u.useSystemFonts=!_is_node.isNodeJS&&!u.disableFontFace),(typeof u.ownerDocument!="object"||u.ownerDocument===null)&&(u.ownerDocument=globalThis.document),typeof u.disableRange!="boolean"&&(u.disableRange=!1),typeof u.disableStream!="boolean"&&(u.disableStream=!1),typeof u.disableAutoFetch!="boolean"&&(u.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(u.verbosity),!v){const a={verbosity:u.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};v=a.port?PDFWorker.fromPort(a):new PDFWorker(a),t._worker=v}const p=t.docId;return v.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");const a=_fetchDocument(v,u,T,p),o=new Promise(function(n){let x;T?x=new _transport_stream.PDFDataTransportStream({length:u.length,initialData:u.initialData,progressiveDone:u.progressiveDone,contentDispositionFilename:u.contentDispositionFilename,disableRange:u.disableRange,disableStream:u.disableStream},T):u.data||(x=createPDFNetworkStream({url:u.url,length:u.length,httpHeaders:u.httpHeaders,withCredentials:u.withCredentials,rangeChunkSize:u.rangeChunkSize,disableRange:u.disableRange,disableStream:u.disableStream})),n(x)});return Promise.all([a,o]).then(function([n,x]){if(t.destroyed)throw new Error("Loading aborted");const C=new _message_handler.MessageHandler(p,n,v.port),z=new WorkerTransport(C,t,x,u);t._transport=z,C.send("Ready",null)})}).catch(t._capability.reject),t}async function _fetchDocument(h,t,l,u){if(h.destroyed)throw new Error("Worker was destroyed");l&&(t.length=l.length,t.initialData=l.initialData,t.progressiveDone=l.progressiveDone,t.contentDispositionFilename=l.contentDispositionFilename);const T=await h.messageHandler.sendWithPromise("GetDocRequest",{docId:u,apiVersion:"2.16.105",source:{data:t.data,url:t.url,password:t.password,disableAutoFetch:t.disableAutoFetch,rangeChunkSize:t.rangeChunkSize,length:t.length},maxImageSize:t.maxImageSize,disableFontFace:t.disableFontFace,docBaseUrl:t.docBaseUrl,ignoreErrors:t.ignoreErrors,isEvalSupported:t.isEvalSupported,fontExtraProperties:t.fontExtraProperties,enableXfa:t.enableXfa,useSystemFonts:t.useSystemFonts,cMapUrl:t.useWorkerFetch?t.cMapUrl:null,standardFontDataUrl:t.useWorkerFetch?t.standardFontDataUrl:null});if(t.data&&(t.data=null),h.destroyed)throw new Error("Worker was destroyed");return T}const s=class s{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${lt(s,_)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var t;this.destroyed=!0,await((t=this._transport)==null?void 0:t.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};_=new WeakMap,pe(s,_,0);let PDFDocumentLoadingTask=s;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(t,l,u=!1,T=null){this.length=t,this.initialData=l,this.progressiveDone=u,this.contentDispositionFilename=T,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,l){for(const u of this._rangeListeners)u(t,l)}onDataProgress(t,l){this._readyCapability.promise.then(()=>{for(const u of this._progressListeners)u(t,l)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const l of this._progressiveReadListeners)l(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,l){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(t,l){this._pdfInfo=t,this._transport=l,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(t,l,u,T,v=!1){this._pageIndex=t,this._pageInfo=l,this._ownerDocument=T,this._transport=u,this._stats=v?new _display_utils.StatTimer:null,this._pdfBug=v,this.commonObjs=u.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:l=this.rotate,offsetX:u=0,offsetY:T=0,dontFlip:v=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:t,rotation:l,offsetX:u,offsetY:T,dontFlip:v})}getAnnotations({intent:t="display"}={}){const l=this._transport.getRenderingIntent(t);let u=this._annotationPromises.get(l.cacheKey);return u||(u=this._transport.getAnnotations(this._pageIndex,l.renderingIntent),this._annotationPromises.set(l.cacheKey,u),u=u.then(T=>{for(const v of T)v.titleObj!==void 0&&Object.defineProperty(v,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),v.titleObj.str}}),v.contentsObj!==void 0&&Object.defineProperty(v,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),v.contentsObj.str}});return T})),u}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:l,intent:u="display",annotationMode:T=_util.AnnotationMode.ENABLE,transform:v=null,imageLayer:p=null,canvasFactory:a=null,background:o=null,optionalContentConfigPromise:n=null,annotationCanvasMap:x=null,pageColors:C=null,printAnnotationStorage:z=null}){var K,se;((K=arguments[0])==null?void 0:K.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&T===_util.AnnotationMode.ENABLE&&(T=_util.AnnotationMode.ENABLE_FORMS)),((se=arguments[0])==null?void 0:se.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&T===_util.AnnotationMode.ENABLE&&(T=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const G=this._transport.getRenderingIntent(u,T,z);this.pendingCleanup=!1,n||(n=this._transport.getOptionalContentConfig());let ae=this._intentStates.get(G.cacheKey);ae||(ae=Object.create(null),this._intentStates.set(G.cacheKey,ae)),ae.streamReaderCancelTimeout&&(clearTimeout(ae.streamReaderCancelTimeout),ae.streamReaderCancelTimeout=null);const le=a||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),re=!!(G.renderingIntent&_util.RenderingIntentFlag.PRINT);ae.displayReadyCapability||(ae.displayReadyCapability=(0,_util.createPromiseCapability)(),ae.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(G));const te=de=>{ae.renderTasks.delete(X),(this.cleanupAfterRender||re)&&(this.pendingCleanup=!0),this._tryCleanup(),de?(X.capability.reject(de),this._abortOperatorList({intentState:ae,reason:de instanceof Error?de:new Error(de)})):X.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},X=new InternalRenderTask({callback:te,params:{canvasContext:t,viewport:l,transform:v,imageLayer:p,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:x,operatorList:ae.operatorList,pageIndex:this._pageIndex,canvasFactory:le,useRequestAnimationFrame:!re,pdfBug:this._pdfBug,pageColors:C});(ae.renderTasks||(ae.renderTasks=new Set)).add(X);const Y=X.task;return Promise.all([ae.displayReadyCapability.promise,n]).then(([de,ge])=>{if(this.pendingCleanup){te();return}this._stats&&this._stats.time("Rendering"),X.initializeGraphics({transparency:de,optionalContentConfig:ge}),X.operatorListChanged()}).catch(te),Y}getOperatorList({intent:t="display",annotationMode:l=_util.AnnotationMode.ENABLE,printAnnotationStorage:u=null}={}){function T(){p.operatorList.lastChunk&&(p.opListReadCapability.resolve(p.operatorList),p.renderTasks.delete(a))}const v=this._transport.getRenderingIntent(t,l,u,!0);let p=this._intentStates.get(v.cacheKey);p||(p=Object.create(null),this._intentStates.set(v.cacheKey,p));let a;return p.opListReadCapability||(a=Object.create(null),a.operatorListChanged=T,p.opListReadCapability=(0,_util.createPromiseCapability)(),(p.renderTasks||(p.renderTasks=new Set)).add(a),p.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(v)),p.opListReadCapability.promise}streamTextContent({disableCombineTextItems:t=!1,includeMarkedContent:l=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:t!==!0,includeMarkedContent:l===!0},{highWaterMark:100,size(T){return T.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(u=>_xfa_text.XfaText.textContent(u));const l=this.streamTextContent(t);return new Promise(function(u,T){function v(){p.read().then(function({value:o,done:n}){if(n){u(a);return}Object.assign(a.styles,o.styles),a.items.push(...o.items),v()},T)}const p=l.getReader(),a={items:[],styles:Object.create(null)};v()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const t=[];for(const l of this._intentStates.values())if(this._abortOperatorList({intentState:l,reason:new Error("Page was destroyed."),force:!0}),!l.opListReadCapability)for(const u of l.renderTasks)t.push(u.completed),u.cancel();this.objs.clear();for(const l of this._bitmaps)l.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(t)}cleanup(t=!1){return this.pendingCleanup=!0,this._tryCleanup(t)}_tryCleanup(t=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:l,operatorList:u}of this._intentStates.values())if(l.size>0||!u.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,t&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const l of this._bitmaps)l.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(t,l){const u=this._intentStates.get(l);u&&(this._stats&&this._stats.timeEnd("Page Request"),u.displayReadyCapability&&u.displayReadyCapability.resolve(t))}_renderPageChunk(t,l){for(let u=0,T=t.length;u<T;u++)l.operatorList.fnArray.push(t.fnArray[u]),l.operatorList.argsArray.push(t.argsArray[u]);l.operatorList.lastChunk=t.lastChunk,l.operatorList.separateAnnots=t.separateAnnots;for(const u of l.renderTasks)u.operatorListChanged();t.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:t,cacheKey:l,annotationStorageMap:u}){const v=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:l,annotationStorage:u}).getReader(),p=this._intentStates.get(l);p.streamReader=v;const a=()=>{v.read().then(({value:o,done:n})=>{if(n){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(o,p),a())},o=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const n of p.renderTasks)n.operatorListChanged();this._tryCleanup()}if(p.displayReadyCapability)p.displayReadyCapability.reject(o);else if(p.opListReadCapability)p.opListReadCapability.reject(o);else throw o}})};a()}_abortOperatorList({intentState:t,reason:l,force:u=!1}){if(t.streamReader){if(!u){if(t.renderTasks.size>0)return;if(l instanceof _display_utils.RenderingCancelledException){t.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:t,reason:l,force:!0}),t.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(t.streamReader.cancel(new _util.AbortException(l.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[T,v]of this._intentStates)if(v===t){this._intentStates.delete(T);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(t,l){const u={data:structuredClone(t,l)};this._deferred.then(()=>{for(const T of this._listeners)T.call(this,u)})}addEventListener(t,l){this._listeners.push(l)}removeEventListener(t,l){const u=this._listeners.indexOf(l);this._listeners.splice(u,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const h=(b=document==null?void 0:document.currentScript)==null?void 0:b.src;h&&(PDFWorkerUtil.fallbackWorkerSrc=h.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(h,t){let l;try{if(l=new URL(h),!l.origin||l.origin==="null")return!1}catch{return!1}const u=new URL(t,l);return l.origin===u.origin},PDFWorkerUtil.createCDNWrapper=function(h){const t=`importScripts("${h}");`;return URL.createObjectURL(new Blob([t]))}}const _PDFWorker=class _PDFWorker{constructor({name:h=null,port:t=null,verbosity:l=(0,_util.getVerbosityLevel)()}={}){if(t&&I(_PDFWorker,e).has(t))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=h,this.destroyed=!1,this.verbosity=l,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,t){I(_PDFWorker,e).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(h){this._port=h,this._messageHandler=new _message_handler.MessageHandler("main","worker",h),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:h}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,h)||(h=PDFWorkerUtil.createCDNWrapper(new URL(h,window.location).href));const t=new Worker(h),l=new _message_handler.MessageHandler("main","worker",t),u=()=>{t.removeEventListener("error",T),l.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},T=()=>{this._webWorker||u()};t.addEventListener("error",T),l.on("test",p=>{if(t.removeEventListener("error",T),this.destroyed){u();return}p?(this._messageHandler=l,this._port=t,this._webWorker=t,this._readyCapability.resolve(),l.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),l.destroy(),t.terminate())}),l.on("ready",p=>{if(t.removeEventListener("error",T),this.destroyed){u();return}try{v()}catch{this._setupFakeWorker()}});const v=()=>{const p=new Uint8Array;l.send("test",p,[p.buffer])};v();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(h=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new LoopbackPort;this._port=t;const l=`fake${PDFWorkerUtil.fakeWorkerId++}`,u=new _message_handler.MessageHandler(l+"_worker",l,t);h.setup(u,t);const T=new _message_handler.MessageHandler(l,l+"_worker",t);this._messageHandler=T,this._readyCapability.resolve(),T.send("configure",{verbosity:this.verbosity})}).catch(h=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${h.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),I(_PDFWorker,e).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(h){if(!(h!=null&&h.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return I(this,e).has(h.port)?I(this,e).get(h.port):new _PDFWorker(h)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var h;try{return((h=globalThis.pdfjsWorker)==null?void 0:h.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};e=new WeakMap,pe(_PDFWorker,e,new WeakMap);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(t,l,u,T){pe(this,c,null);pe(this,D,new Map);pe(this,N,new Map);pe(this,M,null);this.messageHandler=t,this.loadingTask=l,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:l.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:T.ownerDocument,styleElement:T.styleElement}),this._params=T,T.useWorkerFetch||(this.CMapReaderFactory=new T.CMapReaderFactory({baseUrl:T.cMapUrl,isCompressed:T.cMapPacked}),this.StandardFontDataFactory=new T.StandardFontDataFactory({baseUrl:T.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=u,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return I(this,c)}getRenderingIntent(t,l=_util.AnnotationMode.ENABLE,u=null,T=!1){let v=_util.RenderingIntentFlag.DISPLAY,p=null;switch(t){case"any":v=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":v=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${t}`)}switch(l){case _util.AnnotationMode.DISABLE:v+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:v+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:v+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,p=(v&_util.RenderingIntentFlag.PRINT&&u instanceof _annotation_storage.PrintAnnotationStorage?u:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${l}`)}return T&&(v+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:v,cacheKey:`${v}_${_annotation_storage.AnnotationStorage.getHash(p)}`,annotationStorageMap:p}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const u of I(this,D).values())t.push(u._destroy());I(this,D).clear(),I(this,N).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const l=this.messageHandler.sendWithPromise("Terminate",null);return t.push(l),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),fe(this,M,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:l}=this;t.on("GetReader",(u,T)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=v=>{this._lastProgress={loaded:v.loaded,total:v.total}},T.onPull=()=>{this._fullReader.read().then(function({value:v,done:p}){if(p){T.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(v),"GetReader - expected an ArrayBuffer."),T.enqueue(new Uint8Array(v),1,[v])}).catch(v=>{T.error(v)})},T.onCancel=v=>{this._fullReader.cancel(v),T.ready.catch(p=>{if(!this.destroyed)throw p})}}),t.on("ReaderHeadersReady",u=>{const T=(0,_util.createPromiseCapability)(),v=this._fullReader;return v.headersReady.then(()=>{var p;(!v.isStreamingSupported||!v.isRangeSupported)&&(this._lastProgress&&((p=l.onProgress)==null||p.call(l,this._lastProgress)),v.onProgress=a=>{var o;(o=l.onProgress)==null||o.call(l,{loaded:a.loaded,total:a.total})}),T.resolve({isStreamingSupported:v.isStreamingSupported,isRangeSupported:v.isRangeSupported,contentLength:v.contentLength})},T.reject),T.promise}),t.on("GetRangeReader",(u,T)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const v=this._networkStream.getRangeReader(u.begin,u.end);if(!v){T.close();return}T.onPull=()=>{v.read().then(function({value:p,done:a}){if(a){T.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(p),"GetRangeReader - expected an ArrayBuffer."),T.enqueue(new Uint8Array(p),1,[p])}).catch(p=>{T.error(p)})},T.onCancel=p=>{v.cancel(p),T.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("GetDoc",({pdfInfo:u})=>{this._numPages=u.numPages,this._htmlForXfa=u.htmlForXfa,delete u.htmlForXfa,l._capability.resolve(new PDFDocumentProxy(u,this))}),t.on("DocException",function(u){let T;switch(u.name){case"PasswordException":T=new _util.PasswordException(u.message,u.code);break;case"InvalidPDFException":T=new _util.InvalidPDFException(u.message);break;case"MissingPDFException":T=new _util.MissingPDFException(u.message);break;case"UnexpectedResponseException":T=new _util.UnexpectedResponseException(u.message,u.status);break;case"UnknownErrorException":T=new _util.UnknownErrorException(u.message,u.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}l._capability.reject(T)}),t.on("PasswordRequest",u=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),l.onPassword){const T=v=>{v instanceof Error?this._passwordCapability.reject(v):this._passwordCapability.resolve({password:v})};try{l.onPassword(T,u.code)}catch(v){this._passwordCapability.reject(v)}}else this._passwordCapability.reject(new _util.PasswordException(u.message,u.code));return this._passwordCapability.promise}),t.on("DataLoaded",u=>{var T;(T=l.onProgress)==null||T.call(l,{loaded:u.length,total:u.length}),this.downloadInfoCapability.resolve(u)}),t.on("StartRenderPage",u=>{if(this.destroyed)return;I(this,D).get(u.pageIndex)._startRenderPage(u.transparency,u.cacheKey)}),t.on("commonobj",([u,T,v])=>{var p;if(!this.destroyed&&!this.commonObjs.has(u))switch(T){case"Font":const a=this._params;if("error"in v){const x=v.error;(0,_util.warn)(`Error during font loading: ${x}`),this.commonObjs.resolve(u,x);break}let o=null;a.pdfBug&&((p=globalThis.FontInspector)!=null&&p.enabled)&&(o={registerFont(x,C){globalThis.FontInspector.fontAdded(x,C)}});const n=new _font_loader.FontFaceObject(v,{isEvalSupported:a.isEvalSupported,disableFontFace:a.disableFontFace,ignoreErrors:a.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:o});this.fontLoader.bind(n).catch(x=>t.sendWithPromise("FontFallback",{id:u})).finally(()=>{!a.fontExtraProperties&&n.data&&(n.data=null),this.commonObjs.resolve(u,n)});break;case"FontPath":case"Image":this.commonObjs.resolve(u,v);break;default:throw new Error(`Got unknown common object type ${T}`)}}),t.on("obj",([u,T,v,p])=>{var o;if(this.destroyed)return;const a=I(this,D).get(T);if(!a.objs.has(u))switch(v){case"Image":a.objs.resolve(u,p);const n=8e6;if(p){let x;if(p.bitmap){const{bitmap:C,width:z,height:G}=p;x=z*G*4,a._bitmaps.add(C)}else x=((o=p.data)==null?void 0:o.length)||0;x>n&&(a.cleanupAfterRender=!0)}break;case"Pattern":a.objs.resolve(u,p);break;default:throw new Error(`Got unknown object type ${v}`)}}),t.on("DocProgress",u=>{var T;this.destroyed||(T=l.onProgress)==null||T.call(l,{loaded:u.loaded,total:u.total})}),t.on("DocStats",u=>{this.destroyed||fe(this,c,Object.freeze({streamTypes:Object.freeze(u.streamTypes),fontTypes:Object.freeze(u.fontTypes)}))}),t.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),t.on("FetchBuiltInCMap",u=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(u):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),t.on("FetchStandardFontData",u=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(u):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:t}){var l,u;this.destroyed||(u=(l=this.loadingTask).onUnsupportedFeature)==null||u.call(l,t)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const l=t-1,u=I(this,N).get(l);if(u)return u;const T=this.messageHandler.sendWithPromise("GetPage",{pageIndex:l}).then(v=>{if(this.destroyed)throw new Error("Transport destroyed");const p=new PDFPageProxy(l,v,this,this._params.ownerDocument,this._params.pdfBug);return I(this,D).set(l,p),p});return I(this,N).set(l,T),T}getPageIndex(t){return typeof t!="object"||t===null||!Number.isInteger(t.num)||t.num<0||!Number.isInteger(t.gen)||t.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen})}getAnnotations(t,l){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:l})}saveDocument(){var t;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((t=this._fullReader)==null?void 0:t.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(t=>new _optional_content_config.OptionalContentConfig(t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return I(this,M)||fe(this,M,this.messageHandler.sendWithPromise("GetMetadata",null).then(t=>{var l,u;return{info:t[0],metadata:t[1]?new _metadata.Metadata(t[1]):null,contentDispositionFilename:((l=this._fullReader)==null?void 0:l.filename)??null,contentLength:((u=this._fullReader)==null?void 0:u.contentLength)??null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const l of I(this,D).values())if(!l.cleanup())throw new Error(`startCleanup: Page ${l.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),fe(this,M,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const t=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:t.disableAutoFetch,enableXfa:t.enableXfa})}}c=new WeakMap,D=new WeakMap,N=new WeakMap,M=new WeakMap;class PDFObjects{constructor(){pe(this,y);pe(this,S,Object.create(null))}get(t,l=null){if(l){const T=ue(this,y,ct).call(this,t);return T.capability.promise.then(()=>l(T.data)),null}const u=I(this,S)[t];if(!(u!=null&&u.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${t}.`);return u.data}has(t){const l=I(this,S)[t];return(l==null?void 0:l.capability.settled)||!1}resolve(t,l=null){const u=ue(this,y,ct).call(this,t);u.data=l,u.capability.resolve()}clear(){fe(this,S,Object.create(null))}}S=new WeakMap,y=new WeakSet,ct=function(t){const l=I(this,S)[t];return l||(I(this,S)[t]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(t){pe(this,B,null);fe(this,B,t),this.onContinue=null}get promise(){return I(this,B).capability.promise}cancel(){I(this,B).cancel()}get separateAnnots(){const{separateAnnots:t}=I(this,B).operatorList;if(!t)return!1;const{annotationCanvasMap:l}=I(this,B);return t.form||t.canvas&&(l==null?void 0:l.size)>0}}B=new WeakMap,exports.RenderTask=RenderTask;const P=class P{constructor({callback:t,params:l,objs:u,commonObjs:T,annotationCanvasMap:v,operatorList:p,pageIndex:a,canvasFactory:o,useRequestAnimationFrame:n=!1,pdfBug:x=!1,pageColors:C=null}){this.callback=t,this.params=l,this.objs=u,this.commonObjs=T,this.annotationCanvasMap=v,this.operatorListIdx=null,this.operatorList=p,this._pageIndex=a,this.canvasFactory=o,this._pdfBug=x,this.pageColors=C,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=n===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=l.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:l}){var o;if(this.cancelled)return;if(this._canvas){if(I(P,R).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");I(P,R).add(this._canvas)}this._pdfBug&&((o=globalThis.StepperManager)!=null&&o.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:u,viewport:T,transform:v,imageLayer:p,background:a}=this.params;this.gfx=new _canvas.CanvasGraphics(u,this.commonObjs,this.objs,this.canvasFactory,p,l,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:v,viewport:T,transparency:t,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(t=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&I(P,R).delete(this._canvas),this.callback(t||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&I(P,R).delete(this._canvas),this.callback())))}};R=new WeakMap,pe(P,R,new WeakSet);let InternalRenderTask=P;const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build},(_,s,b)=>{var S,Ct,k;Object.defineProperty(s,"__esModule",{value:!0}),s.PrintAnnotationStorage=s.AnnotationStorage=void 0;var e=b(1),c=b(6),D=b(10);class N{constructor(){pe(this,S);this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(R,P){const h=this._storage.get(R);return h===void 0?P:Object.assign(P,h)}getRawValue(R){return this._storage.get(R)}remove(R){if(this._storage.delete(R),this._storage.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const P of this._storage.values())if(P instanceof c.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(R,P){const h=this._storage.get(R);let t=!1;if(h!==void 0)for(const[l,u]of Object.entries(P))h[l]!==u&&(t=!0,h[l]=u);else t=!0,this._storage.set(R,P);t&&ue(this,S,Ct).call(this),P instanceof c.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(P.constructor._type)}has(R){return this._storage.has(R)}getAll(){return this._storage.size>0?(0,e.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new M(this)}get serializable(){if(this._storage.size===0)return null;const R=new Map;for(const[P,h]of this._storage){const t=h instanceof c.AnnotationEditor?h.serialize():h;t&&R.set(P,t)}return R}static getHash(R){if(!R)return"";const P=new D.MurmurHash3_64;for(const[h,t]of R)P.update(`${h}:${JSON.stringify(t)}`);return P.hexdigest()}}S=new WeakSet,Ct=function(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())},s.AnnotationStorage=N;class M extends N{constructor(P){super();pe(this,k,null);fe(this,k,structuredClone(P.serializable))}get print(){(0,e.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return I(this,k)}}k=new WeakMap,s.PrintAnnotationStorage=M},(_,s,b)=>{var N,M,S,y,k,B;Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationEditor=void 0;var e=b(7),c=b(1);const R=class R{constructor(h){pe(this,N,this.focusin.bind(this));pe(this,M,this.focusout.bind(this));pe(this,S,!1);pe(this,y,!1);pe(this,k,!1);pe(this,B,R._zIndex++);this.constructor===R&&(0,c.unreachable)("Cannot initialize AnnotationEditor."),this.parent=h.parent,this.id=h.id,this.width=this.height=null,this.pageIndex=h.parent.pageIndex,this.name=h.name,this.div=null;const[t,l]=this.parent.viewportBaseDimensions;this.x=h.x/t,this.y=h.y/l,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,c.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=I(this,B)}focusin(h){I(this,S)?fe(this,S,!1):this.parent.setSelected(this)}focusout(h){if(!this.isAttachedToDOM)return;const t=h.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(h.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(h){const t=this.parent.div.getBoundingClientRect();this.startX=h.clientX-t.x,this.startY=h.clientY-t.y,h.dataTransfer.setData("text/plain",this.id),h.dataTransfer.effectAllowed="move"}setAt(h,t,l,u){const[T,v]=this.parent.viewportBaseDimensions;[l,u]=this.screenToPageTranslation(l,u),this.x=(h+l)/T,this.y=(t+u)/v,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(h,t){const[l,u]=this.parent.viewportBaseDimensions;[h,t]=this.screenToPageTranslation(h,t),this.x+=h/l,this.y+=t/u,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(h,t){const{rotation:l}=this.parent.viewport;switch(l){case 90:return[t,-h];case 180:return[-h,-t];case 270:return[-t,h];default:return[h,t]}}setDims(h,t){const[l,u]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*h/l}%`,this.div.style.height=`${100*t/u}%`}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",I(this,N)),this.div.addEventListener("focusout",I(this,M));const[h,t]=this.getInitialTranslation();return this.translate(h,t),(0,e.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(h){const t=e.KeyboardManager.platform.isMac;if(h.button!==0||h.ctrlKey&&t){h.preventDefault();return}h.ctrlKey&&!t||h.shiftKey||h.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this),fe(this,S,!0)}getRect(h,t){const[l,u]=this.parent.viewportBaseDimensions,[T,v]=this.parent.pageDimensions,p=T*h/l,a=v*t/u,o=this.x*T,n=this.y*v,x=this.width*T,C=this.height*v;switch(this.rotation){case 0:return[o+p,v-n-a-C,o+p+x,v-n-a];case 90:return[o+a,v-n+p,o+a+C,v-n+p+x];case 180:return[o-p-x,v-n+a,o-p,v-n+a+C];case 270:return[o-a-C,v-n-p-x,o-a,v-n-p];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(h,t){const[l,u,T,v]=h,p=T-l,a=v-u;switch(this.rotation){case 0:return[l,t-v,p,a];case 90:return[l,t-u,a,p];case 180:return[T,t-u,p,a];case 270:return[T,t-v,a,p];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){fe(this,k,!0)}disableEditMode(){fe(this,k,!1)}isInEditMode(){return I(this,k)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var h;(h=this.div)==null||h.addEventListener("focusin",I(this,N))}serialize(){(0,c.unreachable)("An editor must be serializable")}static deserialize(h,t){const l=new this.prototype.constructor({parent:t,id:t.getNextId()});l.rotation=h.rotation;const[u,T]=t.pageDimensions,[v,p,a,o]=l.getRectInCurrentCoords(h.rect,T);return l.x=v/u,l.y=p/T,l.width=a/u,l.height=o/T,l}remove(){this.div.removeEventListener("focusin",I(this,N)),this.div.removeEventListener("focusout",I(this,M)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var h;(h=this.div)==null||h.classList.add("selectedEditor")}unselect(){var h;(h=this.div)==null||h.classList.remove("selectedEditor")}updateParams(h,t){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return I(this,y)}set isEditing(h){fe(this,y,h),h?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};N=new WeakMap,M=new WeakMap,S=new WeakMap,y=new WeakMap,k=new WeakMap,B=new WeakMap,ke(R,"_colorManager",new e.ColorManager),ke(R,"_zIndex",1);let D=R;s.AnnotationEditor=D},(_,s,b)=>{var P,h,t,l,u,T,wt,a,n,x,C,z,G,ae,le,re,te,X,Y,K,se,de,ge,V,g,d,Rt,dt,De,Xe,kt,Ft,ut,Ye,Ze;Object.defineProperty(s,"__esModule",{value:!0}),s.KeyboardManager=s.CommandManager=s.ColorManager=s.AnnotationEditorUIManager=void 0,s.bindEvents=D,s.opacityToHex=N;var e=b(1),c=b(8);function D(w,f,j){for(const ne of j)f.addEventListener(ne,w[ne].bind(w))}function N(w){return Math.round(Math.min(255,Math.max(1,255*w))).toString(16).padStart(2,"0")}class M{constructor(){pe(this,P,0)}getId(){return`${e.AnnotationEditorPrefix}${lt(this,P)._++}`}}P=new WeakMap;class S{constructor(f=128){pe(this,h,[]);pe(this,t,!1);pe(this,l);pe(this,u,-1);fe(this,l,f)}add({cmd:f,undo:j,mustExec:ne,type:q=NaN,overwriteIfSameType:J=!1,keepUndo:ee=!1}){if(ne&&f(),I(this,t))return;const oe={cmd:f,undo:j,type:q};if(I(this,u)===-1){I(this,h).length>0&&(I(this,h).length=0),fe(this,u,0),I(this,h).push(oe);return}if(J&&I(this,h)[I(this,u)].type===q){ee&&(oe.undo=I(this,h)[I(this,u)].undo),I(this,h)[I(this,u)]=oe;return}const he=I(this,u)+1;he===I(this,l)?I(this,h).splice(0,1):(fe(this,u,he),he<I(this,h).length&&I(this,h).splice(he)),I(this,h).push(oe)}undo(){I(this,u)!==-1&&(fe(this,t,!0),I(this,h)[I(this,u)].undo(),fe(this,t,!1),fe(this,u,I(this,u)-1))}redo(){I(this,u)<I(this,h).length-1&&(fe(this,u,I(this,u)+1),fe(this,t,!0),I(this,h)[I(this,u)].cmd(),fe(this,t,!1))}hasSomethingToUndo(){return I(this,u)!==-1}hasSomethingToRedo(){return I(this,u)<I(this,h).length-1}destroy(){fe(this,h,null)}}h=new WeakMap,t=new WeakMap,l=new WeakMap,u=new WeakMap,s.CommandManager=S;const p=class p{constructor(f){pe(this,T);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const j=p.platform.isMac;for(const[ne,q]of f)for(const J of ne){const ee=J.startsWith("mac+");j&&ee?(this.callbacks.set(J.slice(4),q),this.allKeys.add(J.split("+").at(-1))):!j&&!ee&&(this.callbacks.set(J,q),this.allKeys.add(J.split("+").at(-1)))}}static get platform(){const f=typeof navigator<"u"?navigator.platform:"";return(0,e.shadow)(this,"platform",{isWin:f.includes("Win"),isMac:f.includes("Mac")})}exec(f,j){if(!this.allKeys.has(j.key))return;const ne=this.callbacks.get(ue(this,T,wt).call(this,j));ne&&(ne.bind(f)(),j.stopPropagation(),j.preventDefault())}};T=new WeakSet,wt=function(f){f.altKey&&this.buffer.push("alt"),f.ctrlKey&&this.buffer.push("ctrl"),f.metaKey&&this.buffer.push("meta"),f.shiftKey&&this.buffer.push("shift"),this.buffer.push(f.key);const j=this.buffer.join("+");return this.buffer.length=0,j};let y=p;s.KeyboardManager=y;class k{constructor(){pe(this,a,null)}copy(f){f&&(Array.isArray(f)?fe(this,a,f.map(j=>j.serialize())):fe(this,a,[f.serialize()]),fe(this,a,I(this,a).filter(j=>!!j)),I(this,a).length===0&&fe(this,a,null))}paste(){return I(this,a)}isEmpty(){return I(this,a)===null}destroy(){fe(this,a,null)}}a=new WeakMap;const o=class o{get _colors(){const f=new Map([["CanvasText",null],["Canvas",null]]);return(0,c.getColorValues)(f),(0,e.shadow)(this,"_colors",f)}convert(f){const j=(0,c.getRGB)(f);if(!window.matchMedia("(forced-colors: active)").matches)return j;for(const[ne,q]of this._colors)if(q.every((J,ee)=>J===j[ee]))return o._colorsMapping.get(ne);return j}getHexCode(f){const j=this._colors.get(f);return j?e.Util.makeHexColor(...j):f}};ke(o,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let B=o;s.ColorManager=B;const O=class O{constructor(f,j){pe(this,d);pe(this,n,null);pe(this,x,new Map);pe(this,C,new Map);pe(this,z,new k);pe(this,G,new S);pe(this,ae,0);pe(this,le,null);pe(this,re,null);pe(this,te,new M);pe(this,X,!1);pe(this,Y,e.AnnotationEditorType.NONE);pe(this,K,new Set);pe(this,se,this.keydown.bind(this));pe(this,de,this.onEditingAction.bind(this));pe(this,ge,this.onPageChanging.bind(this));pe(this,V,{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});pe(this,g,null);fe(this,g,f),fe(this,re,j),I(this,re)._on("editingaction",I(this,de)),I(this,re)._on("pagechanging",I(this,ge))}destroy(){ue(this,d,dt).call(this),I(this,re)._off("editingaction",I(this,de)),I(this,re)._off("pagechanging",I(this,ge));for(const f of I(this,C).values())f.destroy();I(this,C).clear(),I(this,x).clear(),fe(this,n,null),I(this,K).clear(),I(this,z).destroy(),I(this,G).destroy()}onPageChanging({pageNumber:f}){fe(this,ae,f-1)}focusMainContainer(){I(this,g).focus()}keydown(f){var j;(j=this.getActive())!=null&&j.shouldGetKeyboardEvents()||O._keyboardManager.exec(this,f)}onEditingAction(f){["undo","redo","cut","copy","paste","delete","selectAll"].includes(f.name)&&this[f.name]()}setEditingState(f){f?(ue(this,d,Rt).call(this),ue(this,d,De).call(this,{isEditing:I(this,Y)!==e.AnnotationEditorType.NONE,isEmpty:ue(this,d,Ye).call(this),hasSomethingToUndo:I(this,G).hasSomethingToUndo(),hasSomethingToRedo:I(this,G).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:I(this,z).isEmpty()})):(ue(this,d,dt).call(this),ue(this,d,De).call(this,{isEditing:!1}))}registerEditorTypes(f){fe(this,le,f);for(const j of I(this,le))ue(this,d,Xe).call(this,j.defaultPropertiesToUpdate)}getId(){return I(this,te).getId()}addLayer(f){I(this,C).set(f.pageIndex,f),I(this,X)?f.enable():f.disable()}removeLayer(f){I(this,C).delete(f.pageIndex)}updateMode(f){if(fe(this,Y,f),f===e.AnnotationEditorType.NONE)this.setEditingState(!1),ue(this,d,Ft).call(this);else{this.setEditingState(!0),ue(this,d,kt).call(this);for(const j of I(this,C).values())j.updateMode(f)}}updateToolbar(f){f!==I(this,Y)&&I(this,re).dispatch("switchannotationeditormode",{source:this,mode:f})}updateParams(f,j){for(const ne of I(this,K))ne.updateParams(f,j);for(const ne of I(this,le))ne.updateDefaultParams(f,j)}getEditors(f){const j=[];for(const ne of I(this,x).values())ne.pageIndex===f&&j.push(ne);return j}getEditor(f){return I(this,x).get(f)}addEditor(f){I(this,x).set(f.id,f)}removeEditor(f){I(this,x).delete(f.id),this.unselect(f)}setActiveEditor(f){I(this,n)!==f&&(fe(this,n,f),f&&ue(this,d,Xe).call(this,f.propertiesToUpdate))}toggleSelected(f){if(I(this,K).has(f)){I(this,K).delete(f),f.unselect(),ue(this,d,De).call(this,{hasSelectedEditor:this.hasSelection});return}I(this,K).add(f),f.select(),ue(this,d,Xe).call(this,f.propertiesToUpdate),ue(this,d,De).call(this,{hasSelectedEditor:!0})}setSelected(f){for(const j of I(this,K))j!==f&&j.unselect();I(this,K).clear(),I(this,K).add(f),f.select(),ue(this,d,Xe).call(this,f.propertiesToUpdate),ue(this,d,De).call(this,{hasSelectedEditor:!0})}isSelected(f){return I(this,K).has(f)}unselect(f){f.unselect(),I(this,K).delete(f),ue(this,d,De).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return I(this,K).size!==0}undo(){I(this,G).undo(),ue(this,d,De).call(this,{hasSomethingToUndo:I(this,G).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:ue(this,d,Ye).call(this)})}redo(){I(this,G).redo(),ue(this,d,De).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:I(this,G).hasSomethingToRedo(),isEmpty:ue(this,d,Ye).call(this)})}addCommands(f){I(this,G).add(f),ue(this,d,De).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:ue(this,d,Ye).call(this)})}delete(){if(I(this,n)&&I(this,n).commitOrRemove(),!this.hasSelection)return;const f=[...I(this,K)],j=()=>{for(const q of f)q.remove()},ne=()=>{for(const q of f)ue(this,d,ut).call(this,q)};this.addCommands({cmd:j,undo:ne,mustExec:!0})}copy(){if(I(this,n)&&I(this,n).commitOrRemove(),this.hasSelection){const f=[];for(const j of I(this,K))j.isEmpty()||f.push(j);if(f.length===0)return;I(this,z).copy(f),ue(this,d,De).call(this,{hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(I(this,z).isEmpty())return;this.unselectAll();const f=I(this,C).get(I(this,ae)),j=I(this,z).paste().map(J=>f.deserialize(J)),ne=()=>{for(const J of j)ue(this,d,ut).call(this,J);ue(this,d,Ze).call(this,j)},q=()=>{for(const J of j)J.remove()};this.addCommands({cmd:ne,undo:q,mustExec:!0})}selectAll(){for(const f of I(this,K))f.commit();ue(this,d,Ze).call(this,I(this,x).values())}unselectAll(){if(I(this,n)){I(this,n).commitOrRemove();return}if(ue(this,d,Ze).size!==0){for(const f of I(this,K))f.unselect();I(this,K).clear(),ue(this,d,De).call(this,{hasSelectedEditor:!1})}}isActive(f){return I(this,n)===f}getActive(){return I(this,n)}getMode(){return I(this,Y)}};n=new WeakMap,x=new WeakMap,C=new WeakMap,z=new WeakMap,G=new WeakMap,ae=new WeakMap,le=new WeakMap,re=new WeakMap,te=new WeakMap,X=new WeakMap,Y=new WeakMap,K=new WeakMap,se=new WeakMap,de=new WeakMap,ge=new WeakMap,V=new WeakMap,g=new WeakMap,d=new WeakSet,Rt=function(){I(this,g).addEventListener("keydown",I(this,se))},dt=function(){I(this,g).removeEventListener("keydown",I(this,se))},De=function(f){Object.entries(f).some(([ne,q])=>I(this,V)[ne]!==q)&&I(this,re).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(I(this,V),f)})},Xe=function(f){I(this,re).dispatch("annotationeditorparamschanged",{source:this,details:f})},kt=function(){if(!I(this,X)){fe(this,X,!0);for(const f of I(this,C).values())f.enable()}},Ft=function(){if(this.unselectAll(),I(this,X)){fe(this,X,!1);for(const f of I(this,C).values())f.disable()}},ut=function(f){const j=I(this,C).get(f.pageIndex);j?j.addOrRebuild(f):this.addEditor(f)},Ye=function(){if(I(this,x).size===0)return!0;if(I(this,x).size===1)for(const f of I(this,x).values())return f.isEmpty();return!1},Ze=function(f){I(this,K).clear();for(const j of f)j.isEmpty()||(I(this,K).add(j),j.select());ue(this,d,De).call(this,{hasSelectedEditor:!0})},ke(O,"_keyboardManager",new y([[["ctrl+a","mac+meta+a"],O.prototype.selectAll],[["ctrl+c","mac+meta+c"],O.prototype.copy],[["ctrl+v","mac+meta+v"],O.prototype.paste],[["ctrl+x","mac+meta+x"],O.prototype.cut],[["ctrl+z","mac+meta+z"],O.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],O.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],O.prototype.delete],[["Escape","mac+Escape"],O.prototype.unselectAll]]));let R=O;s.AnnotationEditorUIManager=R},(_,s,b)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.StatTimer=s.RenderingCancelledException=s.PixelsPerInch=s.PageViewport=s.PDFDateString=s.DOMStandardFontDataFactory=s.DOMSVGFactory=s.DOMCanvasFactory=s.DOMCMapReaderFactory=s.AnnotationPrefix=void 0,s.deprecated=o,s.getColorValues=G,s.getCurrentTransform=ae,s.getCurrentTransformInverse=le,s.getFilenameFromUrl=u,s.getPdfFilenameFromUrl=T,s.getRGB=z,s.getXfaPageViewport=C,s.isDataScheme=t,s.isPdfFile=l,s.isValidFetchUrl=p,s.loadScript=a;var e=b(9),c=b(1);const D="http://www.w3.org/2000/svg",N="pdfjs_internal_id_";s.AnnotationPrefix=N;const re=class re{};ke(re,"CSS",96),ke(re,"PDF",72),ke(re,"PDF_TO_CSS_UNITS",re.CSS/re.PDF);let M=re;s.PixelsPerInch=M;class S extends e.BaseCanvasFactory{constructor({ownerDocument:X=globalThis.document}={}){super(),this._document=X}_createCanvas(X,Y){const K=this._document.createElement("canvas");return K.width=X,K.height=Y,K}}s.DOMCanvasFactory=S;async function y(te,X=!1){if(p(te,document.baseURI)){const Y=await fetch(te);if(!Y.ok)throw new Error(Y.statusText);return X?new Uint8Array(await Y.arrayBuffer()):(0,c.stringToBytes)(await Y.text())}return new Promise((Y,K)=>{const se=new XMLHttpRequest;se.open("GET",te,!0),X&&(se.responseType="arraybuffer"),se.onreadystatechange=()=>{if(se.readyState===XMLHttpRequest.DONE){if(se.status===200||se.status===0){let de;if(X&&se.response?de=new Uint8Array(se.response):!X&&se.responseText&&(de=(0,c.stringToBytes)(se.responseText)),de){Y(de);return}}K(new Error(se.statusText))}},se.send(null)})}class k extends e.BaseCMapReaderFactory{_fetchData(X,Y){return y(X,this.isCompressed).then(K=>({cMapData:K,compressionType:Y}))}}s.DOMCMapReaderFactory=k;class B extends e.BaseStandardFontDataFactory{_fetchData(X){return y(X,!0)}}s.DOMStandardFontDataFactory=B;class R extends e.BaseSVGFactory{_createSVG(X){return document.createElementNS(D,X)}}s.DOMSVGFactory=R;class P{constructor({viewBox:X,scale:Y,rotation:K,offsetX:se=0,offsetY:de=0,dontFlip:ge=!1}){this.viewBox=X,this.scale=Y,this.rotation=K,this.offsetX=se,this.offsetY=de;const V=(X[2]+X[0])/2,g=(X[3]+X[1])/2;let d,L,W,$;switch(K%=360,K<0&&(K+=360),K){case 180:d=-1,L=0,W=0,$=1;break;case 90:d=0,L=1,W=1,$=0;break;case 270:d=0,L=-1,W=-1,$=0;break;case 0:d=1,L=0,W=0,$=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}ge&&(W=-W,$=-$);let H,i,m,E;d===0?(H=Math.abs(g-X[1])*Y+se,i=Math.abs(V-X[0])*Y+de,m=Math.abs(X[3]-X[1])*Y,E=Math.abs(X[2]-X[0])*Y):(H=Math.abs(V-X[0])*Y+se,i=Math.abs(g-X[1])*Y+de,m=Math.abs(X[2]-X[0])*Y,E=Math.abs(X[3]-X[1])*Y),this.transform=[d*Y,L*Y,W*Y,$*Y,H-d*Y*V-W*Y*g,i-L*Y*V-$*Y*g],this.width=m,this.height=E}clone({scale:X=this.scale,rotation:Y=this.rotation,offsetX:K=this.offsetX,offsetY:se=this.offsetY,dontFlip:de=!1}={}){return new P({viewBox:this.viewBox.slice(),scale:X,rotation:Y,offsetX:K,offsetY:se,dontFlip:de})}convertToViewportPoint(X,Y){return c.Util.applyTransform([X,Y],this.transform)}convertToViewportRectangle(X){const Y=c.Util.applyTransform([X[0],X[1]],this.transform),K=c.Util.applyTransform([X[2],X[3]],this.transform);return[Y[0],Y[1],K[0],K[1]]}convertToPdfPoint(X,Y){return c.Util.applyInverseTransform([X,Y],this.transform)}}s.PageViewport=P;class h extends c.BaseException{constructor(X,Y){super(X,"RenderingCancelledException"),this.type=Y}}s.RenderingCancelledException=h;function t(te){const X=te.length;let Y=0;for(;Y<X&&te[Y].trim()==="";)Y++;return te.substring(Y,Y+5).toLowerCase()==="data:"}function l(te){return typeof te=="string"&&/\.pdf$/i.test(te)}function u(te){const X=te.indexOf("#"),Y=te.indexOf("?"),K=Math.min(X>0?X:te.length,Y>0?Y:te.length);return te.substring(te.lastIndexOf("/",K)+1,K)}function T(te,X="document.pdf"){if(typeof te!="string")return X;if(t(te))return(0,c.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),X;const Y=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,K=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,se=Y.exec(te);let de=K.exec(se[1])||K.exec(se[2])||K.exec(se[3]);if(de&&(de=de[0],de.includes("%")))try{de=K.exec(decodeURIComponent(de))[0]}catch{}return de||X}class v{constructor(){this.started=Object.create(null),this.times=[]}time(X){X in this.started&&(0,c.warn)(`Timer is already running for ${X}`),this.started[X]=Date.now()}timeEnd(X){X in this.started||(0,c.warn)(`Timer has not been started for ${X}`),this.times.push({name:X,start:this.started[X],end:Date.now()}),delete this.started[X]}toString(){const X=[];let Y=0;for(const K of this.times){const se=K.name;se.length>Y&&(Y=se.length)}for(const K of this.times){const se=K.end-K.start;X.push(`${K.name.padEnd(Y)} ${se}ms
`)}return X.join("")}}s.StatTimer=v;function p(te,X){try{const{protocol:Y}=X?new URL(te,X):new URL(te);return Y==="http:"||Y==="https:"}catch{return!1}}function a(te,X=!1){return new Promise((Y,K)=>{const se=document.createElement("script");se.src=te,se.onload=function(de){X&&se.remove(),Y(de)},se.onerror=function(){K(new Error(`Cannot load script at: ${se.src}`))},(document.head||document.documentElement).append(se)})}function o(te){console.log("Deprecated API usage: "+te)}let n;class x{static toDateObject(X){if(!X||typeof X!="string")return null;n||(n=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const Y=n.exec(X);if(!Y)return null;const K=parseInt(Y[1],10);let se=parseInt(Y[2],10);se=se>=1&&se<=12?se-1:0;let de=parseInt(Y[3],10);de=de>=1&&de<=31?de:1;let ge=parseInt(Y[4],10);ge=ge>=0&&ge<=23?ge:0;let V=parseInt(Y[5],10);V=V>=0&&V<=59?V:0;let g=parseInt(Y[6],10);g=g>=0&&g<=59?g:0;const d=Y[7]||"Z";let L=parseInt(Y[8],10);L=L>=0&&L<=23?L:0;let W=parseInt(Y[9],10)||0;return W=W>=0&&W<=59?W:0,d==="-"?(ge+=L,V+=W):d==="+"&&(ge-=L,V-=W),new Date(Date.UTC(K,se,de,ge,V,g))}}s.PDFDateString=x;function C(te,{scale:X=1,rotation:Y=0}){const{width:K,height:se}=te.attributes.style,de=[0,0,parseInt(K),parseInt(se)];return new P({viewBox:de,scale:X,rotation:Y})}function z(te){if(te.startsWith("#")){const X=parseInt(te.slice(1),16);return[(X&16711680)>>16,(X&65280)>>8,X&255]}return te.startsWith("rgb(")?te.slice(4,-1).split(",").map(X=>parseInt(X)):te.startsWith("rgba(")?te.slice(5,-1).split(",").map(X=>parseInt(X)).slice(0,3):((0,c.warn)(`Not a valid color format: "${te}"`),[0,0,0])}function G(te){const X=document.createElement("span");X.style.visibility="hidden",document.body.append(X);for(const Y of te.keys()){X.style.color=Y;const K=window.getComputedStyle(X).color;te.set(Y,z(K))}X.remove()}function ae(te){const{a:X,b:Y,c:K,d:se,e:de,f:ge}=te.getTransform();return[X,Y,K,se,de,ge]}function le(te){const{a:X,b:Y,c:K,d:se,e:de,f:ge}=te.getTransform().invertSelf();return[X,Y,K,se,de,ge]}},(_,s,b)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BaseStandardFontDataFactory=s.BaseSVGFactory=s.BaseCanvasFactory=s.BaseCMapReaderFactory=void 0;var e=b(1);class c{constructor(){this.constructor===c&&(0,e.unreachable)("Cannot initialize BaseCanvasFactory.")}create(y,k){if(y<=0||k<=0)throw new Error("Invalid canvas size");const B=this._createCanvas(y,k);return{canvas:B,context:B.getContext("2d")}}reset(y,k,B){if(!y.canvas)throw new Error("Canvas is not specified");if(k<=0||B<=0)throw new Error("Invalid canvas size");y.canvas.width=k,y.canvas.height=B}destroy(y){if(!y.canvas)throw new Error("Canvas is not specified");y.canvas.width=0,y.canvas.height=0,y.canvas=null,y.context=null}_createCanvas(y,k){(0,e.unreachable)("Abstract method `_createCanvas` called.")}}s.BaseCanvasFactory=c;class D{constructor({baseUrl:y=null,isCompressed:k=!1}){this.constructor===D&&(0,e.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=y,this.isCompressed=k}async fetch({name:y}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!y)throw new Error("CMap name must be specified.");const k=this.baseUrl+y+(this.isCompressed?".bcmap":""),B=this.isCompressed?e.CMapCompressionType.BINARY:e.CMapCompressionType.NONE;return this._fetchData(k,B).catch(R=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${k}`)})}_fetchData(y,k){(0,e.unreachable)("Abstract method `_fetchData` called.")}}s.BaseCMapReaderFactory=D;class N{constructor({baseUrl:y=null}){this.constructor===N&&(0,e.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=y}async fetch({filename:y}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!y)throw new Error("Font filename must be specified.");const k=`${this.baseUrl}${y}`;return this._fetchData(k).catch(B=>{throw new Error(`Unable to load font data at: ${k}`)})}_fetchData(y){(0,e.unreachable)("Abstract method `_fetchData` called.")}}s.BaseStandardFontDataFactory=N;class M{constructor(){this.constructor===M&&(0,e.unreachable)("Cannot initialize BaseSVGFactory.")}create(y,k,B=!1){if(y<=0||k<=0)throw new Error("Invalid SVG dimensions");const R=this._createSVG("svg:svg");return R.setAttribute("version","1.1"),B||(R.setAttribute("width",`${y}px`),R.setAttribute("height",`${k}px`)),R.setAttribute("preserveAspectRatio","none"),R.setAttribute("viewBox",`0 0 ${y} ${k}`),R}createElement(y){if(typeof y!="string")throw new Error("Invalid SVG element type");return this._createSVG(y)}_createSVG(y){(0,e.unreachable)("Abstract method `_createSVG` called.")}}s.BaseSVGFactory=M},(_,s,b)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.MurmurHash3_64=void 0;var e=b(1);const c=3285377520,D=4294901760,N=65535;class M{constructor(y){this.h1=y?y&4294967295:c,this.h2=y?y&4294967295:c}update(y){let k,B;if(typeof y=="string"){k=new Uint8Array(y.length*2),B=0;for(let n=0,x=y.length;n<x;n++){const C=y.charCodeAt(n);C<=255?k[B++]=C:(k[B++]=C>>>8,k[B++]=C&255)}}else if((0,e.isArrayBuffer)(y))k=y.slice(),B=k.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const R=B>>2,P=B-R*4,h=new Uint32Array(k.buffer,0,R);let t=0,l=0,u=this.h1,T=this.h2;const v=3432918353,p=461845907,a=v&N,o=p&N;for(let n=0;n<R;n++)n&1?(t=h[n],t=t*v&D|t*a&N,t=t<<15|t>>>17,t=t*p&D|t*o&N,u^=t,u=u<<13|u>>>19,u=u*5+3864292196):(l=h[n],l=l*v&D|l*a&N,l=l<<15|l>>>17,l=l*p&D|l*o&N,T^=l,T=T<<13|T>>>19,T=T*5+3864292196);switch(t=0,P){case 3:t^=k[R*4+2]<<16;case 2:t^=k[R*4+1]<<8;case 1:t^=k[R*4],t=t*v&D|t*a&N,t=t<<15|t>>>17,t=t*p&D|t*o&N,R&1?u^=t:T^=t}this.h1=u,this.h2=T}hexdigest(){let y=this.h1,k=this.h2;y^=k>>>1,y=y*3981806797&D|y*36045&N,k=k*4283543511&D|((k<<16|y>>>16)*2950163797&D)>>>16,y^=k>>>1,y=y*444984403&D|y*60499&N,k=k*3301882366&D|((k<<16|y>>>16)*3120437893&D)>>>16,y^=k>>>1;const B=(y>>>0).toString(16),R=(k>>>0).toString(16);return B.padStart(8,"0")+R.padStart(8,"0")}}s.MurmurHash3_64=M},(_,s,b)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FontLoader=s.FontFaceObject=void 0;var e=b(1);class c{constructor({docId:S,onUnsupportedFeature:y,ownerDocument:k=globalThis.document,styleElement:B=null}){this.constructor===c&&(0,e.unreachable)("Cannot initialize BaseFontLoader."),this.docId=S,this._onUnsupportedFeature=y,this._document=k,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(S){this.nativeFontFaces.push(S),this._document.fonts.add(S)}insertRule(S){let y=this.styleElement;y||(y=this.styleElement=this._document.createElement("style"),y.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(y));const k=y.sheet;k.insertRule(S,k.cssRules.length)}clear(){for(const S of this.nativeFontFaces)this._document.fonts.delete(S);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(S){if(S.attached||S.missingFile)return;if(S.attached=!0,this.isFontLoadingAPISupported){const k=S.createNativeFontFace();if(k){this.addNativeFontFace(k);try{await k.loaded}catch(B){throw this._onUnsupportedFeature({featureId:e.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,e.warn)(`Failed to load font '${k.family}': '${B}'.`),S.disableFontFace=!0,B}}return}const y=S.createFontFaceRule();if(y){if(this.insertRule(y),this.isSyncFontLoadingSupported)return;await new Promise(k=>{const B=this._queueLoadingCallback(k);this._prepareFontLoadEvent([y],[S],B)})}}_queueLoadingCallback(S){(0,e.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var y;const S=!!((y=this._document)!=null&&y.fonts);return(0,e.shadow)(this,"isFontLoadingAPISupported",S)}get isSyncFontLoadingSupported(){(0,e.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,e.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(S,y,k){(0,e.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let D;s.FontLoader=D,s.FontLoader=D=class extends c{constructor(S){super(S),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let S=!1;if(typeof navigator>"u")S=!0;else{const y=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(y==null?void 0:y[1])>=14&&(S=!0)}return(0,e.shadow)(this,"isSyncFontLoadingSupported",S)}_queueLoadingCallback(S){function y(){for((0,e.assert)(!B.done,"completeRequest() cannot be called twice."),B.done=!0;k.requests.length>0&&k.requests[0].done;){const R=k.requests.shift();setTimeout(R.callback,0)}}const k=this.loadingContext,B={id:`pdfjs-font-loading-${k.nextRequestId++}`,done:!1,complete:y,callback:S};return k.requests.push(B),B}get _loadTestFont(){const S=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,e.shadow)(this,"_loadTestFont",S())}_prepareFontLoadEvent(S,y,k){function B(le,re){return le.charCodeAt(re)<<24|le.charCodeAt(re+1)<<16|le.charCodeAt(re+2)<<8|le.charCodeAt(re+3)&255}function R(le,re,te,X){const Y=le.substring(0,re),K=le.substring(re+te);return Y+X+K}let P,h;const t=this._document.createElement("canvas");t.width=1,t.height=1;const l=t.getContext("2d");let u=0;function T(le,re){if(u++,u>30){(0,e.warn)("Load test font never loaded."),re();return}if(l.font="30px "+le,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){re();return}setTimeout(T.bind(null,le,re))}const v=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=R(p,976,v.length,v);const o=16,n=1482184792;let x=B(p,o);for(P=0,h=v.length-3;P<h;P+=4)x=x-n+B(v,P)|0;P<v.length&&(x=x-n+B(v+"XXX",P)|0),p=R(p,o,4,(0,e.string32)(x));const C=`url(data:font/opentype;base64,${btoa(p)});`,z=`@font-face {font-family:"${v}";src:${C}}`;this.insertRule(z);const G=[];for(const le of y)G.push(le.loadedName);G.push(v);const ae=this._document.createElement("div");ae.style.visibility="hidden",ae.style.width=ae.style.height="10px",ae.style.position="absolute",ae.style.top=ae.style.left="0px";for(const le of G){const re=this._document.createElement("span");re.textContent="Hi",re.style.fontFamily=le,ae.append(re)}this._document.body.append(ae),T(v,()=>{ae.remove(),k.complete()})}};class N{constructor(S,{isEvalSupported:y=!0,disableFontFace:k=!1,ignoreErrors:B=!1,onUnsupportedFeature:R,fontRegistry:P=null}){this.compiledGlyphs=Object.create(null);for(const h in S)this[h]=S[h];this.isEvalSupported=y!==!1,this.disableFontFace=k===!0,this.ignoreErrors=B===!0,this._onUnsupportedFeature=R,this.fontRegistry=P}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let S;if(!this.cssFontInfo)S=new FontFace(this.loadedName,this.data,{});else{const y={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(y.style=`oblique ${this.cssFontInfo.italicAngle}deg`),S=new FontFace(this.cssFontInfo.fontFamily,this.data,y)}return this.fontRegistry&&this.fontRegistry.registerFont(this),S}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const S=(0,e.bytesToString)(this.data),y=`url(data:${this.mimetype};base64,${btoa(S)});`;let k;if(!this.cssFontInfo)k=`@font-face {font-family:"${this.loadedName}";src:${y}}`;else{let B=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(B+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),k=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${B}src:${y}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,y),k}getPathGenerator(S,y){if(this.compiledGlyphs[y]!==void 0)return this.compiledGlyphs[y];let k;try{k=S.get(this.loadedName+"_path_"+y)}catch(B){if(!this.ignoreErrors)throw B;return this._onUnsupportedFeature({featureId:e.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,e.warn)(`getPathGenerator - ignoring character: "${B}".`),this.compiledGlyphs[y]=function(R,P){}}if(this.isEvalSupported&&e.FeatureTest.isEvalSupported){const B=[];for(const R of k){const P=R.args!==void 0?R.args.join(","):"";B.push("c.",R.cmd,"(",P,`);
`)}return this.compiledGlyphs[y]=new Function("c","size",B.join(""))}return this.compiledGlyphs[y]=function(B,R){for(const P of k)P.cmd==="scale"&&(P.args=[R,-R]),B[P.cmd].apply(B,P.args)}}}s.FontFaceObject=N},(_,s,b)=>{var se,ht;Object.defineProperty(s,"__esModule",{value:!0}),s.CanvasGraphics=void 0;var e=b(8),c=b(1),D=b(13),N=b(14),M=b(3);const S=16,y=100,k=4096,B=15,R=10,P=M.isNodeJS&&typeof Path2D>"u"?-1:1e3,h=16;function t(V,g){if(V._removeMirroring)throw new Error("Context is already forwarding operations.");V.__originalSave=V.save,V.__originalRestore=V.restore,V.__originalRotate=V.rotate,V.__originalScale=V.scale,V.__originalTranslate=V.translate,V.__originalTransform=V.transform,V.__originalSetTransform=V.setTransform,V.__originalResetTransform=V.resetTransform,V.__originalClip=V.clip,V.__originalMoveTo=V.moveTo,V.__originalLineTo=V.lineTo,V.__originalBezierCurveTo=V.bezierCurveTo,V.__originalRect=V.rect,V.__originalClosePath=V.closePath,V.__originalBeginPath=V.beginPath,V._removeMirroring=()=>{V.save=V.__originalSave,V.restore=V.__originalRestore,V.rotate=V.__originalRotate,V.scale=V.__originalScale,V.translate=V.__originalTranslate,V.transform=V.__originalTransform,V.setTransform=V.__originalSetTransform,V.resetTransform=V.__originalResetTransform,V.clip=V.__originalClip,V.moveTo=V.__originalMoveTo,V.lineTo=V.__originalLineTo,V.bezierCurveTo=V.__originalBezierCurveTo,V.rect=V.__originalRect,V.closePath=V.__originalClosePath,V.beginPath=V.__originalBeginPath,delete V._removeMirroring},V.save=function(){g.save(),this.__originalSave()},V.restore=function(){g.restore(),this.__originalRestore()},V.translate=function(L,W){g.translate(L,W),this.__originalTranslate(L,W)},V.scale=function(L,W){g.scale(L,W),this.__originalScale(L,W)},V.transform=function(L,W,$,H,i,m){g.transform(L,W,$,H,i,m),this.__originalTransform(L,W,$,H,i,m)},V.setTransform=function(L,W,$,H,i,m){g.setTransform(L,W,$,H,i,m),this.__originalSetTransform(L,W,$,H,i,m)},V.resetTransform=function(){g.resetTransform(),this.__originalResetTransform()},V.rotate=function(L){g.rotate(L),this.__originalRotate(L)},V.clip=function(L){g.clip(L),this.__originalClip(L)},V.moveTo=function(d,L){g.moveTo(d,L),this.__originalMoveTo(d,L)},V.lineTo=function(d,L){g.lineTo(d,L),this.__originalLineTo(d,L)},V.bezierCurveTo=function(d,L,W,$,H,i){g.bezierCurveTo(d,L,W,$,H,i),this.__originalBezierCurveTo(d,L,W,$,H,i)},V.rect=function(d,L,W,$){g.rect(d,L,W,$),this.__originalRect(d,L,W,$)},V.closePath=function(){g.closePath(),this.__originalClosePath()},V.beginPath=function(){g.beginPath(),this.__originalBeginPath()}}class l{constructor(g){this.canvasFactory=g,this.cache=Object.create(null)}getCanvas(g,d,L){let W;return this.cache[g]!==void 0?(W=this.cache[g],this.canvasFactory.reset(W,d,L)):(W=this.canvasFactory.create(d,L),this.cache[g]=W),W}delete(g){delete this.cache[g]}clear(){for(const g in this.cache){const d=this.cache[g];this.canvasFactory.destroy(d),delete this.cache[g]}}}function u(V,g,d,L,W,$,H,i,m,E){const[A,F,O,w,f,j]=(0,e.getCurrentTransform)(V);if(F===0&&O===0){const J=H*A+f,ee=Math.round(J),oe=i*w+j,he=Math.round(oe),ie=(H+m)*A+f,ve=Math.abs(Math.round(ie)-ee)||1,be=(i+E)*w+j,ye=Math.abs(Math.round(be)-he)||1;return V.setTransform(Math.sign(A),0,0,Math.sign(w),ee,he),V.drawImage(g,d,L,W,$,0,0,ve,ye),V.setTransform(A,F,O,w,f,j),[ve,ye]}if(A===0&&w===0){const J=i*O+f,ee=Math.round(J),oe=H*F+j,he=Math.round(oe),ie=(i+E)*O+f,ve=Math.abs(Math.round(ie)-ee)||1,be=(H+m)*F+j,ye=Math.abs(Math.round(be)-he)||1;return V.setTransform(0,Math.sign(F),Math.sign(O),0,ee,he),V.drawImage(g,d,L,W,$,0,0,ye,ve),V.setTransform(A,F,O,w,f,j),[ye,ve]}V.drawImage(g,d,L,W,$,H,i,m,E);const ne=Math.hypot(A,F),q=Math.hypot(O,w);return[ne*m,q*E]}function T(V){const{width:g,height:d}=V;if(g>P||d>P)return null;const L=1e3,W=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),$=g+1;let H=new Uint8Array($*(d+1)),i,m,E;const A=g+7&-8;let F=new Uint8Array(A*d),O=0;for(const q of V.data){let J=128;for(;J>0;)F[O++]=q&J?0:255,J>>=1}let w=0;for(O=0,F[O]!==0&&(H[0]=1,++w),m=1;m<g;m++)F[O]!==F[O+1]&&(H[m]=F[O]?2:1,++w),O++;for(F[O]!==0&&(H[m]=2,++w),i=1;i<d;i++){O=i*A,E=i*$,F[O-A]!==F[O]&&(H[E]=F[O]?1:8,++w);let q=(F[O]?4:0)+(F[O-A]?8:0);for(m=1;m<g;m++)q=(q>>2)+(F[O+1]?4:0)+(F[O-A+1]?8:0),W[q]&&(H[E+m]=W[q],++w),O++;if(F[O-A]!==F[O]&&(H[E+m]=F[O]?2:4,++w),w>L)return null}for(O=A*(d-1),E=i*$,F[O]!==0&&(H[E]=8,++w),m=1;m<g;m++)F[O]!==F[O+1]&&(H[E+m]=F[O]?4:8,++w),O++;if(F[O]!==0&&(H[E+m]=4,++w),w>L)return null;const f=new Int32Array([0,$,-1,0,-$,0,0,0,1]),j=new Path2D;for(i=0;w&&i<=d;i++){let q=i*$;const J=q+g;for(;q<J&&!H[q];)q++;if(q===J)continue;j.moveTo(q%$,i);const ee=q;let oe=H[q];do{const he=f[oe];do q+=he;while(!H[q]);const ie=H[q];ie!==5&&ie!==10?(oe=ie,H[q]=0):(oe=ie&51*oe>>4,H[q]&=oe>>2|oe<<2),j.lineTo(q%$,q/$|0),H[q]||--w}while(ee!==q);--i}return F=null,H=null,function(q){q.save(),q.scale(1/g,-1/d),q.translate(0,-d),q.fill(j),q.beginPath(),q.restore()}}class v{constructor(g,d){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=c.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=c.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=c.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,g,d])}clone(){const g=Object.create(this);return g.clipBox=this.clipBox.slice(),g}setCurrentPoint(g,d){this.x=g,this.y=d}updatePathMinMax(g,d,L){[d,L]=c.Util.applyTransform([d,L],g),this.minX=Math.min(this.minX,d),this.minY=Math.min(this.minY,L),this.maxX=Math.max(this.maxX,d),this.maxY=Math.max(this.maxY,L)}updateRectMinMax(g,d){const L=c.Util.applyTransform(d,g),W=c.Util.applyTransform(d.slice(2),g);this.minX=Math.min(this.minX,L[0],W[0]),this.minY=Math.min(this.minY,L[1],W[1]),this.maxX=Math.max(this.maxX,L[0],W[0]),this.maxY=Math.max(this.maxY,L[1],W[1])}updateScalingPathMinMax(g,d){c.Util.scaleMinMax(g,d),this.minX=Math.min(this.minX,d[0]),this.maxX=Math.max(this.maxX,d[1]),this.minY=Math.min(this.minY,d[2]),this.maxY=Math.max(this.maxY,d[3])}updateCurvePathMinMax(g,d,L,W,$,H,i,m,E,A){const F=c.Util.bezierBoundingBox(d,L,W,$,H,i,m,E);if(A){A[0]=Math.min(A[0],F[0],F[2]),A[1]=Math.max(A[1],F[0],F[2]),A[2]=Math.min(A[2],F[1],F[3]),A[3]=Math.max(A[3],F[1],F[3]);return}this.updateRectMinMax(g,F)}getPathBoundingBox(g=D.PathType.FILL,d=null){const L=[this.minX,this.minY,this.maxX,this.maxY];if(g===D.PathType.STROKE){d||(0,c.unreachable)("Stroke bounding box must include transform.");const W=c.Util.singularValueDecompose2dScale(d),$=W[0]*this.lineWidth/2,H=W[1]*this.lineWidth/2;L[0]-=$,L[1]-=H,L[2]+=$,L[3]+=H}return L}updateClipFromPath(){const g=c.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(g||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(g){this.clipBox=g,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(g=D.PathType.FILL,d=null){return c.Util.intersect(this.clipBox,this.getPathBoundingBox(g,d))}}function p(V,g,d=null){if(typeof ImageData<"u"&&g instanceof ImageData){V.putImageData(g,0,0);return}const L=g.height,W=g.width,$=L%h,H=(L-$)/h,i=$===0?H:H+1,m=V.createImageData(W,h);let E=0,A;const F=g.data,O=m.data;let w,f,j,ne,q,J,ee,oe;if(d)switch(d.length){case 1:q=d[0],J=d[0],ee=d[0],oe=d[0];break;case 4:q=d[0],J=d[1],ee=d[2],oe=d[3];break}if(g.kind===c.ImageKind.GRAYSCALE_1BPP){const he=F.byteLength,ie=new Uint32Array(O.buffer,0,O.byteLength>>2),ve=ie.length,be=W+7>>3;let ye=4294967295,Ae=c.FeatureTest.isLittleEndian?4278190080:255;for(oe&&oe[0]===255&&oe[255]===0&&([ye,Ae]=[Ae,ye]),w=0;w<i;w++){for(j=w<H?h:$,A=0,f=0;f<j;f++){const xe=he-E;let we=0;const Ee=xe>be?W:xe*8-7,Re=Ee&-8;let Pe=0,Te=0;for(;we<Re;we+=8)Te=F[E++],ie[A++]=Te&128?ye:Ae,ie[A++]=Te&64?ye:Ae,ie[A++]=Te&32?ye:Ae,ie[A++]=Te&16?ye:Ae,ie[A++]=Te&8?ye:Ae,ie[A++]=Te&4?ye:Ae,ie[A++]=Te&2?ye:Ae,ie[A++]=Te&1?ye:Ae;for(;we<Ee;we++)Pe===0&&(Te=F[E++],Pe=128),ie[A++]=Te&Pe?ye:Ae,Pe>>=1}for(;A<ve;)ie[A++]=0;V.putImageData(m,0,w*h)}}else if(g.kind===c.ImageKind.RGBA_32BPP){const he=!!(q||J||ee);for(f=0,ne=W*h*4,w=0;w<H;w++){if(O.set(F.subarray(E,E+ne)),E+=ne,he)for(let ie=0;ie<ne;ie+=4)q&&(O[ie+0]=q[O[ie+0]]),J&&(O[ie+1]=J[O[ie+1]]),ee&&(O[ie+2]=ee[O[ie+2]]);V.putImageData(m,0,f),f+=h}if(w<i){if(ne=W*$*4,O.set(F.subarray(E,E+ne)),he)for(let ie=0;ie<ne;ie+=4)q&&(O[ie+0]=q[O[ie+0]]),J&&(O[ie+1]=J[O[ie+1]]),ee&&(O[ie+2]=ee[O[ie+2]]);V.putImageData(m,0,f)}}else if(g.kind===c.ImageKind.RGB_24BPP){const he=!!(q||J||ee);for(j=h,ne=W*j,w=0;w<i;w++){for(w>=H&&(j=$,ne=W*j),A=0,f=ne;f--;)O[A++]=F[E++],O[A++]=F[E++],O[A++]=F[E++],O[A++]=255;if(he)for(let ie=0;ie<A;ie+=4)q&&(O[ie+0]=q[O[ie+0]]),J&&(O[ie+1]=J[O[ie+1]]),ee&&(O[ie+2]=ee[O[ie+2]]);V.putImageData(m,0,w*h)}}else throw new Error(`bad image kind: ${g.kind}`)}function a(V,g){if(g.bitmap){V.drawImage(g.bitmap,0,0);return}const d=g.height,L=g.width,W=d%h,$=(d-W)/h,H=W===0?$:$+1,i=V.createImageData(L,h);let m=0;const E=g.data,A=i.data;for(let F=0;F<H;F++){const O=F<$?h:W;({srcPos:m}=(0,N.applyMaskImageData)({src:E,srcPos:m,dest:A,width:L,height:O})),V.putImageData(i,0,F*h)}}function o(V,g){const d=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let L=0,W=d.length;L<W;L++){const $=d[L];V[$]!==void 0&&(g[$]=V[$])}V.setLineDash!==void 0&&(g.setLineDash(V.getLineDash()),g.lineDashOffset=V.lineDashOffset)}function n(V,g){V.strokeStyle=V.fillStyle=g||"#000000",V.fillRule="nonzero",V.globalAlpha=1,V.lineWidth=1,V.lineCap="butt",V.lineJoin="miter",V.miterLimit=10,V.globalCompositeOperation="source-over",V.font="10px sans-serif",V.setLineDash!==void 0&&(V.setLineDash([]),V.lineDashOffset=0)}function x(V,g,d,L){const W=V.length;for(let $=3;$<W;$+=4){const H=V[$];if(H===0)V[$-3]=g,V[$-2]=d,V[$-1]=L;else if(H<255){const i=255-H;V[$-3]=V[$-3]*H+g*i>>8,V[$-2]=V[$-2]*H+d*i>>8,V[$-1]=V[$-1]*H+L*i>>8}}}function C(V,g,d){const L=V.length,W=1/255;for(let $=3;$<L;$+=4){const H=d?d[V[$]]:V[$];g[$]=g[$]*H*W|0}}function z(V,g,d){const L=V.length;for(let W=3;W<L;W+=4){const $=V[W-3]*77+V[W-2]*152+V[W-1]*28;g[W]=d?g[W]*d[$>>8]>>8:g[W]*$>>16}}function G(V,g,d,L,W,$,H,i,m,E,A){const F=!!$,O=F?$[0]:0,w=F?$[1]:0,f=F?$[2]:0;let j;W==="Luminosity"?j=z:j=C;const q=Math.min(L,Math.ceil(1048576/d));for(let J=0;J<L;J+=q){const ee=Math.min(q,L-J),oe=V.getImageData(i-E,J+(m-A),d,ee),he=g.getImageData(i,J+m,d,ee);F&&x(oe.data,O,w,f),j(oe.data,he.data,H),g.putImageData(he,i,J+m)}}function ae(V,g,d,L){const W=L[0],$=L[1],H=L[2]-W,i=L[3]-$;H===0||i===0||(G(g.context,d,H,i,g.subtype,g.backdrop,g.transferMap,W,$,g.offsetX,g.offsetY),V.save(),V.globalAlpha=1,V.globalCompositeOperation="source-over",V.setTransform(1,0,0,1,0,0),V.drawImage(d.canvas,0,0),V.restore())}function le(V,g){const d=c.Util.singularValueDecompose2dScale(V);d[0]=Math.fround(d[0]),d[1]=Math.fround(d[1]);const L=Math.fround((globalThis.devicePixelRatio||1)*e.PixelsPerInch.PDF_TO_CSS_UNITS);return g!==void 0?g:d[0]<=L||d[1]<=L}const re=["butt","round","square"],te=["miter","round","bevel"],X={},Y={},ge=class ge{constructor(g,d,L,W,$,H,i,m){pe(this,se);this.ctx=g,this.current=new v(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=d,this.objs=L,this.canvasFactory=W,this.imageLayer=$,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=H,this.cachedCanvases=new l(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=i,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(m==null?void 0:m.background)||null,this.foregroundColor=(m==null?void 0:m.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(g,d=null){return typeof g=="string"?g.startsWith("g_")?this.commonObjs.get(g):this.objs.get(g):d}beginDrawing({transform:g,viewport:d,transparency:L=!1,background:W=null}){const $=this.ctx.canvas.width,H=this.ctx.canvas.height,i=W||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const m=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const E=this.backgroundColor=this.ctx.fillStyle;let A=!0,F=i;if(this.ctx.fillStyle=i,F=this.ctx.fillStyle,A=typeof F=="string"&&/^#[0-9A-Fa-f]{6}$/.test(F),m==="#000000"&&E==="#ffffff"||m===E||!A)this.foregroundColor=this.backgroundColor=null;else{const[O,w,f]=(0,e.getRGB)(F),j=q=>(q/=255,q<=.03928?q/12.92:((q+.055)/1.055)**2.4),ne=Math.round(.2126*j(O)+.7152*j(w)+.0722*j(f));this.selectColor=(q,J,ee)=>{const oe=.2126*j(q)+.7152*j(J)+.0722*j(ee);return Math.round(oe)===ne?E:m}}}if(this.ctx.fillStyle=this.backgroundColor||i,this.ctx.fillRect(0,0,$,H),this.ctx.restore(),L){const m=this.cachedCanvases.getCanvas("transparent",$,H);this.compositeCtx=this.ctx,this.transparentCanvas=m.canvas,this.ctx=m.context,this.ctx.save(),this.ctx.transform(...(0,e.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),n(this.ctx,this.foregroundColor),g&&(this.ctx.transform(...g),this.outputScaleX=g[0],this.outputScaleY=g[0]),this.ctx.transform(...d.transform),this.viewportScale=d.scale,this.baseTransform=(0,e.getCurrentTransform)(this.ctx),this.imageLayer&&((0,e.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(g,d,L,W){const $=g.argsArray,H=g.fnArray;let i=d||0;const m=$.length;if(m===i)return i;const E=m-i>R&&typeof L=="function",A=E?Date.now()+B:0;let F=0;const O=this.commonObjs,w=this.objs;let f;for(;;){if(W!==void 0&&i===W.nextBreakPoint)return W.breakIt(i,L),i;if(f=H[i],f!==c.OPS.dependency)this[f].apply(this,$[i]);else for(const j of $[i]){const ne=j.startsWith("g_")?O:w;if(!ne.has(j))return ne.get(j,L),i}if(i++,i===m)return i;if(E&&++F>R){if(Date.now()>A)return L(),i;F=0}}}endDrawing(){ue(this,se,ht).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const g of this._cachedBitmapsMap.values()){for(const d of g.values())typeof HTMLCanvasElement<"u"&&d instanceof HTMLCanvasElement&&(d.width=d.height=0);g.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(g,d){const L=g.width,W=g.height;let $=Math.max(Math.hypot(d[0],d[1]),1),H=Math.max(Math.hypot(d[2],d[3]),1),i=L,m=W,E="prescale1",A,F;for(;$>2&&i>1||H>2&&m>1;){let O=i,w=m;$>2&&i>1&&(O=Math.ceil(i/2),$/=i/O),H>2&&m>1&&(w=Math.ceil(m/2),H/=m/w),A=this.cachedCanvases.getCanvas(E,O,w),F=A.context,F.clearRect(0,0,O,w),F.drawImage(g,0,0,i,m,0,0,O,w),g=A.canvas,i=O,m=w,E=E==="prescale1"?"prescale2":"prescale1"}return{img:g,paintWidth:i,paintHeight:m}}_createMaskCanvas(g){const d=this.ctx,{width:L,height:W}=g,$=this.current.fillColor,H=this.current.patternFill,i=(0,e.getCurrentTransform)(d);let m,E,A,F;if((g.bitmap||g.data)&&g.count>1){const ve=g.bitmap||g.data.buffer,be=i.slice(0,4);E=JSON.stringify(H?be:[be,$]),m=this._cachedBitmapsMap.get(ve),m||(m=new Map,this._cachedBitmapsMap.set(ve,m));const ye=m.get(E);if(ye&&!H){const Ae=Math.round(Math.min(i[0],i[2])+i[4]),xe=Math.round(Math.min(i[1],i[3])+i[5]);return{canvas:ye,offsetX:Ae,offsetY:xe}}A=ye}A||(F=this.cachedCanvases.getCanvas("maskCanvas",L,W),a(F.context,g));let O=c.Util.transform(i,[1/L,0,0,-1/W,0,0]);O=c.Util.transform(O,[1,0,0,1,0,-W]);const w=c.Util.applyTransform([0,0],O),f=c.Util.applyTransform([L,W],O),j=c.Util.normalizeRect([w[0],w[1],f[0],f[1]]),ne=Math.round(j[2]-j[0])||1,q=Math.round(j[3]-j[1])||1,J=this.cachedCanvases.getCanvas("fillCanvas",ne,q),ee=J.context,oe=Math.min(w[0],f[0]),he=Math.min(w[1],f[1]);ee.translate(-oe,-he),ee.transform(...O),A||(A=this._scaleImage(F.canvas,(0,e.getCurrentTransformInverse)(ee)),A=A.img,m&&H&&m.set(E,A)),ee.imageSmoothingEnabled=le((0,e.getCurrentTransform)(ee),g.interpolate),u(ee,A,0,0,A.width,A.height,0,0,L,W),ee.globalCompositeOperation="source-in";const ie=c.Util.transform((0,e.getCurrentTransformInverse)(ee),[1,0,0,1,-oe,-he]);return ee.fillStyle=H?$.getPattern(d,this,ie,D.PathType.FILL):$,ee.fillRect(0,0,L,W),m&&!H&&(this.cachedCanvases.delete("fillCanvas"),m.set(E,J.canvas)),{canvas:J.canvas,offsetX:Math.round(oe),offsetY:Math.round(he)}}setLineWidth(g){g!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=g,this.ctx.lineWidth=g}setLineCap(g){this.ctx.lineCap=re[g]}setLineJoin(g){this.ctx.lineJoin=te[g]}setMiterLimit(g){this.ctx.miterLimit=g}setDash(g,d){const L=this.ctx;L.setLineDash!==void 0&&(L.setLineDash(g),L.lineDashOffset=d)}setRenderingIntent(g){}setFlatness(g){}setGState(g){for(let d=0,L=g.length;d<L;d++){const W=g[d],$=W[0],H=W[1];switch($){case"LW":this.setLineWidth(H);break;case"LC":this.setLineCap(H);break;case"LJ":this.setLineJoin(H);break;case"ML":this.setMiterLimit(H);break;case"D":this.setDash(H[0],H[1]);break;case"RI":this.setRenderingIntent(H);break;case"FL":this.setFlatness(H);break;case"Font":this.setFont(H[0],H[1]);break;case"CA":this.current.strokeAlpha=W[1];break;case"ca":this.current.fillAlpha=W[1],this.ctx.globalAlpha=W[1];break;case"BM":this.ctx.globalCompositeOperation=H;break;case"SMask":this.current.activeSMask=H?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=H}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const g=this.inSMaskMode;this.current.activeSMask&&!g?this.beginSMaskMode():!this.current.activeSMask&&g&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const g=this.ctx.canvas.width,d=this.ctx.canvas.height,L="smaskGroupAt"+this.groupLevel,W=this.cachedCanvases.getCanvas(L,g,d);this.suspendedCtx=this.ctx,this.ctx=W.context;const $=this.ctx;$.setTransform(...(0,e.getCurrentTransform)(this.suspendedCtx)),o(this.suspendedCtx,$),t($,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),o(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(g){if(!this.current.activeSMask)return;g?(g[0]=Math.floor(g[0]),g[1]=Math.floor(g[1]),g[2]=Math.ceil(g[2]),g[3]=Math.ceil(g[3])):g=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const d=this.current.activeSMask,L=this.suspendedCtx;ae(L,d,this.ctx,g),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(o(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const g=this.current;this.stateStack.push(g),this.current=g.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),o(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(g,d,L,W,$,H){this.ctx.transform(g,d,L,W,$,H),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(g,d,L){const W=this.ctx,$=this.current;let H=$.x,i=$.y,m,E;const A=(0,e.getCurrentTransform)(W),F=A[0]===0&&A[3]===0||A[1]===0&&A[2]===0,O=F?L.slice(0):null;for(let w=0,f=0,j=g.length;w<j;w++)switch(g[w]|0){case c.OPS.rectangle:H=d[f++],i=d[f++];const ne=d[f++],q=d[f++],J=H+ne,ee=i+q;W.moveTo(H,i),ne===0||q===0?W.lineTo(J,ee):(W.lineTo(J,i),W.lineTo(J,ee),W.lineTo(H,ee)),F||$.updateRectMinMax(A,[H,i,J,ee]),W.closePath();break;case c.OPS.moveTo:H=d[f++],i=d[f++],W.moveTo(H,i),F||$.updatePathMinMax(A,H,i);break;case c.OPS.lineTo:H=d[f++],i=d[f++],W.lineTo(H,i),F||$.updatePathMinMax(A,H,i);break;case c.OPS.curveTo:m=H,E=i,H=d[f+4],i=d[f+5],W.bezierCurveTo(d[f],d[f+1],d[f+2],d[f+3],H,i),$.updateCurvePathMinMax(A,m,E,d[f],d[f+1],d[f+2],d[f+3],H,i,O),f+=6;break;case c.OPS.curveTo2:m=H,E=i,W.bezierCurveTo(H,i,d[f],d[f+1],d[f+2],d[f+3]),$.updateCurvePathMinMax(A,m,E,H,i,d[f],d[f+1],d[f+2],d[f+3],O),H=d[f+2],i=d[f+3],f+=4;break;case c.OPS.curveTo3:m=H,E=i,H=d[f+2],i=d[f+3],W.bezierCurveTo(d[f],d[f+1],H,i,H,i),$.updateCurvePathMinMax(A,m,E,d[f],d[f+1],H,i,H,i,O),f+=4;break;case c.OPS.closePath:W.closePath();break}F&&$.updateScalingPathMinMax(A,O),$.setCurrentPoint(H,i)}closePath(){this.ctx.closePath()}stroke(g){g=typeof g<"u"?g:!0;const d=this.ctx,L=this.current.strokeColor;d.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof L=="object"&&(L!=null&&L.getPattern)?(d.save(),d.strokeStyle=L.getPattern(d,this,(0,e.getCurrentTransformInverse)(d),D.PathType.STROKE),this.rescaleAndStroke(!1),d.restore()):this.rescaleAndStroke(!0)),g&&this.consumePath(this.current.getClippedPathBoundingBox()),d.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(g){g=typeof g<"u"?g:!0;const d=this.ctx,L=this.current.fillColor,W=this.current.patternFill;let $=!1;W&&(d.save(),d.fillStyle=L.getPattern(d,this,(0,e.getCurrentTransformInverse)(d),D.PathType.FILL),$=!0);const H=this.current.getClippedPathBoundingBox();this.contentVisible&&H!==null&&(this.pendingEOFill?(d.fill("evenodd"),this.pendingEOFill=!1):d.fill()),$&&d.restore(),g&&this.consumePath(H)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=X}eoClip(){this.pendingClip=Y}beginText(){this.current.textMatrix=c.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const g=this.pendingTextPaths,d=this.ctx;if(g===void 0){d.beginPath();return}d.save(),d.beginPath();for(const L of g)d.setTransform(...L.transform),d.translate(L.x,L.y),L.addToPath(d,L.fontSize);d.restore(),d.clip(),d.beginPath(),delete this.pendingTextPaths}setCharSpacing(g){this.current.charSpacing=g}setWordSpacing(g){this.current.wordSpacing=g}setHScale(g){this.current.textHScale=g/100}setLeading(g){this.current.leading=-g}setFont(g,d){const L=this.commonObjs.get(g),W=this.current;if(!L)throw new Error(`Can't find font for ${g}`);if(W.fontMatrix=L.fontMatrix||c.FONT_IDENTITY_MATRIX,(W.fontMatrix[0]===0||W.fontMatrix[3]===0)&&(0,c.warn)("Invalid font matrix for font "+g),d<0?(d=-d,W.fontDirection=-1):W.fontDirection=1,this.current.font=L,this.current.fontSize=d,L.isType3Font)return;const $=L.loadedName||"sans-serif";let H="normal";L.black?H="900":L.bold&&(H="bold");const i=L.italic?"italic":"normal",m=`"${$}", ${L.fallbackName}`;let E=d;d<S?E=S:d>y&&(E=y),this.current.fontSizeScale=d/E,this.ctx.font=`${i} ${H} ${E}px ${m}`}setTextRenderingMode(g){this.current.textRenderingMode=g}setTextRise(g){this.current.textRise=g}moveText(g,d){this.current.x=this.current.lineX+=g,this.current.y=this.current.lineY+=d}setLeadingMoveText(g,d){this.setLeading(-d),this.moveText(g,d)}setTextMatrix(g,d,L,W,$,H){this.current.textMatrix=[g,d,L,W,$,H],this.current.textMatrixScale=Math.hypot(g,d),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(g,d,L,W){const $=this.ctx,H=this.current,i=H.font,m=H.textRenderingMode,E=H.fontSize/H.fontSizeScale,A=m&c.TextRenderingMode.FILL_STROKE_MASK,F=!!(m&c.TextRenderingMode.ADD_TO_PATH_FLAG),O=H.patternFill&&!i.missingFile;let w;(i.disableFontFace||F||O)&&(w=i.getPathGenerator(this.commonObjs,g)),i.disableFontFace||O?($.save(),$.translate(d,L),$.beginPath(),w($,E),W&&$.setTransform(...W),(A===c.TextRenderingMode.FILL||A===c.TextRenderingMode.FILL_STROKE)&&$.fill(),(A===c.TextRenderingMode.STROKE||A===c.TextRenderingMode.FILL_STROKE)&&$.stroke(),$.restore()):((A===c.TextRenderingMode.FILL||A===c.TextRenderingMode.FILL_STROKE)&&$.fillText(g,d,L),(A===c.TextRenderingMode.STROKE||A===c.TextRenderingMode.FILL_STROKE)&&$.strokeText(g,d,L)),F&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,e.getCurrentTransform)($),x:d,y:L,fontSize:E,addToPath:w})}get isFontSubpixelAAEnabled(){const{context:g}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);g.scale(1.5,1),g.fillText("I",0,10);const d=g.getImageData(0,0,10,10).data;let L=!1;for(let W=3;W<d.length;W+=4)if(d[W]>0&&d[W]<255){L=!0;break}return(0,c.shadow)(this,"isFontSubpixelAAEnabled",L)}showText(g){const d=this.current,L=d.font;if(L.isType3Font)return this.showType3Text(g);const W=d.fontSize;if(W===0)return;const $=this.ctx,H=d.fontSizeScale,i=d.charSpacing,m=d.wordSpacing,E=d.fontDirection,A=d.textHScale*E,F=g.length,O=L.vertical,w=O?1:-1,f=L.defaultVMetrics,j=W*d.fontMatrix[0],ne=d.textRenderingMode===c.TextRenderingMode.FILL&&!L.disableFontFace&&!d.patternFill;$.save(),$.transform(...d.textMatrix),$.translate(d.x,d.y+d.textRise),E>0?$.scale(A,-1):$.scale(A,1);let q;if(d.patternFill){$.save();const ie=d.fillColor.getPattern($,this,(0,e.getCurrentTransformInverse)($),D.PathType.FILL);q=(0,e.getCurrentTransform)($),$.restore(),$.fillStyle=ie}let J=d.lineWidth;const ee=d.textMatrixScale;if(ee===0||J===0){const ie=d.textRenderingMode&c.TextRenderingMode.FILL_STROKE_MASK;(ie===c.TextRenderingMode.STROKE||ie===c.TextRenderingMode.FILL_STROKE)&&(J=this.getSinglePixelWidth())}else J/=ee;H!==1&&($.scale(H,H),J/=H),$.lineWidth=J;let oe=0,he;for(he=0;he<F;++he){const ie=g[he];if(typeof ie=="number"){oe+=w*ie*W/1e3;continue}let ve=!1;const be=(ie.isSpace?m:0)+i,ye=ie.fontChar,Ae=ie.accent;let xe,we,Ee=ie.width;if(O){const Pe=ie.vmetric||f,Te=-(ie.vmetric?Pe[1]:Ee*.5)*j,Le=Pe[2]*j;Ee=Pe?-Pe[0]:Ee,xe=Te/H,we=(oe+Le)/H}else xe=oe/H,we=0;if(L.remeasure&&Ee>0){const Pe=$.measureText(ye).width*1e3/W*H;if(Ee<Pe&&this.isFontSubpixelAAEnabled){const Te=Ee/Pe;ve=!0,$.save(),$.scale(Te,1),xe/=Te}else Ee!==Pe&&(xe+=(Ee-Pe)/2e3*W/H)}if(this.contentVisible&&(ie.isInFont||L.missingFile)){if(ne&&!Ae)$.fillText(ye,xe,we);else if(this.paintChar(ye,xe,we,q),Ae){const Pe=xe+W*Ae.offset.x/H,Te=we-W*Ae.offset.y/H;this.paintChar(Ae.fontChar,Pe,Te,q)}}let Re;O?Re=Ee*j-be*E:Re=Ee*j+be*E,oe+=Re,ve&&$.restore()}O?d.y-=oe:d.x+=oe*A,$.restore(),this.compose()}showType3Text(g){const d=this.ctx,L=this.current,W=L.font,$=L.fontSize,H=L.fontDirection,i=W.vertical?1:-1,m=L.charSpacing,E=L.wordSpacing,A=L.textHScale*H,F=L.fontMatrix||c.FONT_IDENTITY_MATRIX,O=g.length,w=L.textRenderingMode===c.TextRenderingMode.INVISIBLE;let f,j,ne,q;if(!(w||$===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,d.save(),d.transform(...L.textMatrix),d.translate(L.x,L.y),d.scale(A,H),f=0;f<O;++f){if(j=g[f],typeof j=="number"){q=i*j*$/1e3,this.ctx.translate(q,0),L.x+=q*A;continue}const J=(j.isSpace?E:0)+m,ee=W.charProcOperatorList[j.operatorListId];if(!ee){(0,c.warn)(`Type3 character "${j.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=j,this.save(),d.scale($,$),d.transform(...F),this.executeOperatorList(ee),this.restore()),ne=c.Util.applyTransform([j.width,0],F)[0]*$+J,d.translate(ne,0),L.x+=ne*A}d.restore(),this.processingType3=null}}setCharWidth(g,d){}setCharWidthAndBounds(g,d,L,W,$,H){this.ctx.rect(L,W,$-L,H-W),this.ctx.clip(),this.endPath()}getColorN_Pattern(g){let d;if(g[0]==="TilingPattern"){const L=g[1],W=this.baseTransform||(0,e.getCurrentTransform)(this.ctx),$={createCanvasGraphics:H=>new ge(H,this.commonObjs,this.objs,this.canvasFactory)};d=new D.TilingPattern(g,L,this.ctx,$,W)}else d=this._getPattern(g[1],g[2]);return d}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(g,d,L){var $;const W=(($=this.selectColor)==null?void 0:$.call(this,g,d,L))||c.Util.makeHexColor(g,d,L);this.ctx.strokeStyle=W,this.current.strokeColor=W}setFillRGBColor(g,d,L){var $;const W=(($=this.selectColor)==null?void 0:$.call(this,g,d,L))||c.Util.makeHexColor(g,d,L);this.ctx.fillStyle=W,this.current.fillColor=W,this.current.patternFill=!1}_getPattern(g,d=null){let L;return this.cachedPatterns.has(g)?L=this.cachedPatterns.get(g):(L=(0,D.getShadingPattern)(this.objs.get(g)),this.cachedPatterns.set(g,L)),d&&(L.matrix=d),L}shadingFill(g){if(!this.contentVisible)return;const d=this.ctx;this.save();const L=this._getPattern(g);d.fillStyle=L.getPattern(d,this,(0,e.getCurrentTransformInverse)(d),D.PathType.SHADING);const W=(0,e.getCurrentTransformInverse)(d);if(W){const $=d.canvas,H=$.width,i=$.height,m=c.Util.applyTransform([0,0],W),E=c.Util.applyTransform([0,i],W),A=c.Util.applyTransform([H,0],W),F=c.Util.applyTransform([H,i],W),O=Math.min(m[0],E[0],A[0],F[0]),w=Math.min(m[1],E[1],A[1],F[1]),f=Math.max(m[0],E[0],A[0],F[0]),j=Math.max(m[1],E[1],A[1],F[1]);this.ctx.fillRect(O,w,f-O,j-w)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,c.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,c.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(g,d){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(g)&&g.length===6&&this.transform(...g),this.baseTransform=(0,e.getCurrentTransform)(this.ctx),d)){const L=d[2]-d[0],W=d[3]-d[1];this.ctx.rect(d[0],d[1],L,W),this.current.updateRectMinMax((0,e.getCurrentTransform)(this.ctx),d),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(g){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const d=this.ctx;g.isolated||(0,c.info)("TODO: Support non-isolated groups."),g.knockout&&(0,c.warn)("Knockout groups not supported.");const L=(0,e.getCurrentTransform)(d);if(g.matrix&&d.transform(...g.matrix),!g.bbox)throw new Error("Bounding box is required.");let W=c.Util.getAxialAlignedBoundingBox(g.bbox,(0,e.getCurrentTransform)(d));const $=[0,0,d.canvas.width,d.canvas.height];W=c.Util.intersect(W,$)||[0,0,0,0];const H=Math.floor(W[0]),i=Math.floor(W[1]);let m=Math.max(Math.ceil(W[2])-H,1),E=Math.max(Math.ceil(W[3])-i,1),A=1,F=1;m>k&&(A=m/k,m=k),E>k&&(F=E/k,E=k),this.current.startNewPathAndClipBox([0,0,m,E]);let O="groupAt"+this.groupLevel;g.smask&&(O+="_smask_"+this.smaskCounter++%2);const w=this.cachedCanvases.getCanvas(O,m,E),f=w.context;f.scale(1/A,1/F),f.translate(-H,-i),f.transform(...L),g.smask?this.smaskStack.push({canvas:w.canvas,context:f,offsetX:H,offsetY:i,scaleX:A,scaleY:F,subtype:g.smask.subtype,backdrop:g.smask.backdrop,transferMap:g.smask.transferMap||null,startTransformInverse:null}):(d.setTransform(1,0,0,1,0,0),d.translate(H,i),d.scale(A,F),d.save()),o(d,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(d),this.groupLevel++}endGroup(g){if(!this.contentVisible)return;this.groupLevel--;const d=this.ctx,L=this.groupStack.pop();if(this.ctx=L,this.ctx.imageSmoothingEnabled=!1,g.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const W=(0,e.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...W);const $=c.Util.getAxialAlignedBoundingBox([0,0,d.canvas.width,d.canvas.height],W);this.ctx.drawImage(d.canvas,0,0),this.ctx.restore(),this.compose($)}}beginAnnotation(g,d,L,W,$){if(ue(this,se,ht).call(this),n(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(d)&&d.length===4){const H=d[2]-d[0],i=d[3]-d[1];if($&&this.annotationCanvasMap){L=L.slice(),L[4]-=d[0],L[5]-=d[1],d=d.slice(),d[0]=d[1]=0,d[2]=H,d[3]=i;const[m,E]=c.Util.singularValueDecompose2dScale((0,e.getCurrentTransform)(this.ctx)),{viewportScale:A}=this,F=Math.ceil(H*this.outputScaleX*A),O=Math.ceil(i*this.outputScaleY*A);this.annotationCanvas=this.canvasFactory.create(F,O);const{canvas:w,context:f}=this.annotationCanvas;this.annotationCanvasMap.set(g,w),this.annotationCanvas.savedCtx=this.ctx,this.ctx=f,this.ctx.setTransform(m,0,0,-E,0,i*E),n(this.ctx,this.foregroundColor)}else n(this.ctx,this.foregroundColor),this.ctx.rect(d[0],d[1],H,i),this.ctx.clip(),this.endPath()}this.current=new v(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...L),this.transform(...W)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(g){if(!this.contentVisible)return;const d=g.count;g=this.getObject(g.data,g),g.count=d;const L=this.ctx,W=this.processingType3;if(W&&(W.compiled===void 0&&(W.compiled=T(g)),W.compiled)){W.compiled(L);return}const $=this._createMaskCanvas(g),H=$.canvas;L.save(),L.setTransform(1,0,0,1,0,0),L.drawImage(H,$.offsetX,$.offsetY),L.restore(),this.compose()}paintImageMaskXObjectRepeat(g,d,L=0,W=0,$,H){if(!this.contentVisible)return;g=this.getObject(g.data,g);const i=this.ctx;i.save();const m=(0,e.getCurrentTransform)(i);i.transform(d,L,W,$,0,0);const E=this._createMaskCanvas(g);i.setTransform(1,0,0,1,0,0);for(let A=0,F=H.length;A<F;A+=2){const O=c.Util.transform(m,[d,L,W,$,H[A],H[A+1]]),[w,f]=c.Util.applyTransform([0,0],O);i.drawImage(E.canvas,w,f)}i.restore(),this.compose()}paintImageMaskXObjectGroup(g){if(!this.contentVisible)return;const d=this.ctx,L=this.current.fillColor,W=this.current.patternFill;for(const $ of g){const{data:H,width:i,height:m,transform:E}=$,A=this.cachedCanvases.getCanvas("maskCanvas",i,m),F=A.context;F.save();const O=this.getObject(H,$);a(F,O),F.globalCompositeOperation="source-in",F.fillStyle=W?L.getPattern(F,this,(0,e.getCurrentTransformInverse)(d),D.PathType.FILL):L,F.fillRect(0,0,i,m),F.restore(),d.save(),d.transform(...E),d.scale(1,-1),u(d,A.canvas,0,0,i,m,0,-1,1,1),d.restore()}this.compose()}paintImageXObject(g){if(!this.contentVisible)return;const d=this.getObject(g);if(!d){(0,c.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(d)}paintImageXObjectRepeat(g,d,L,W){if(!this.contentVisible)return;const $=this.getObject(g);if(!$){(0,c.warn)("Dependent image isn't ready yet");return}const H=$.width,i=$.height,m=[];for(let E=0,A=W.length;E<A;E+=2)m.push({transform:[d,0,0,L,W[E],W[E+1]],x:0,y:0,w:H,h:i});this.paintInlineImageXObjectGroup($,m)}paintInlineImageXObject(g){if(!this.contentVisible)return;const d=g.width,L=g.height,W=this.ctx;this.save(),W.scale(1/d,-1/L);let $;if(typeof HTMLElement=="function"&&g instanceof HTMLElement||!g.data)$=g;else{const E=this.cachedCanvases.getCanvas("inlineImage",d,L),A=E.context;p(A,g,this.current.transferMaps),$=E.canvas}const H=this._scaleImage($,(0,e.getCurrentTransformInverse)(W));W.imageSmoothingEnabled=le((0,e.getCurrentTransform)(W),g.interpolate);const[i,m]=u(W,H.img,0,0,H.paintWidth,H.paintHeight,0,-L,d,L);if(this.imageLayer){const[E,A]=c.Util.applyTransform([0,-L],(0,e.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:g,left:E,top:A,width:i,height:m})}this.compose(),this.restore()}paintInlineImageXObjectGroup(g,d){if(!this.contentVisible)return;const L=this.ctx,W=g.width,$=g.height,H=this.cachedCanvases.getCanvas("inlineImage",W,$),i=H.context;p(i,g,this.current.transferMaps);for(const m of d){if(L.save(),L.transform(...m.transform),L.scale(1,-1),u(L,H.canvas,m.x,m.y,m.w,m.h,0,-1,1,1),this.imageLayer){const[E,A]=c.Util.applyTransform([m.x,m.y],(0,e.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:g,left:E,top:A,width:W,height:$})}L.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(g){}markPointProps(g,d){}beginMarkedContent(g){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(g,d){g==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(d)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(g){const d=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(g);const L=this.ctx;this.pendingClip&&(d||(this.pendingClip===Y?L.clip("evenodd"):L.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),L.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const g=(0,e.getCurrentTransform)(this.ctx);if(g[1]===0&&g[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(g[0]),Math.abs(g[3]));else{const d=Math.abs(g[0]*g[3]-g[2]*g[1]),L=Math.hypot(g[0],g[2]),W=Math.hypot(g[1],g[3]);this._cachedGetSinglePixelWidth=Math.max(L,W)/d}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:g}=this.current,d=(0,e.getCurrentTransform)(this.ctx);let L,W;if(d[1]===0&&d[2]===0){const $=Math.abs(d[0]),H=Math.abs(d[3]);if(g===0)L=1/$,W=1/H;else{const i=$*g,m=H*g;L=i<1?1/i:1,W=m<1?1/m:1}}else{const $=Math.abs(d[0]*d[3]-d[2]*d[1]),H=Math.hypot(d[0],d[1]),i=Math.hypot(d[2],d[3]);if(g===0)L=i/$,W=H/$;else{const m=g*$;L=i>m?i/m:1,W=H>m?H/m:1}}this._cachedScaleForStroking=[L,W]}return this._cachedScaleForStroking}rescaleAndStroke(g){const{ctx:d}=this,{lineWidth:L}=this.current,[W,$]=this.getScaleForStroking();if(d.lineWidth=L||1,W===1&&$===1){d.stroke();return}let H,i,m;g&&(H=(0,e.getCurrentTransform)(d),i=d.getLineDash().slice(),m=d.lineDashOffset),d.scale(W,$);const E=Math.max(W,$);d.setLineDash(d.getLineDash().map(A=>A/E)),d.lineDashOffset/=E,d.stroke(),g&&(d.setTransform(...H),d.setLineDash(i),d.lineDashOffset=m)}isContentVisible(){for(let g=this.markedContentStack.length-1;g>=0;g--)if(!this.markedContentStack[g].visible)return!1;return!0}};se=new WeakSet,ht=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)};let K=ge;s.CanvasGraphics=K;for(const V in c.OPS)K.prototype[V]!==void 0&&(K.prototype[c.OPS[V]]=K.prototype[V])},(_,s,b)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TilingPattern=s.PathType=void 0,s.getShadingPattern=h;var e=b(1),c=b(8),D=b(3);const N={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};s.PathType=N;function M(u,T){if(!T||D.isNodeJS)return;const v=T[2]-T[0],p=T[3]-T[1],a=new Path2D;a.rect(T[0],T[1],v,p),u.clip(a)}class S{constructor(){this.constructor===S&&(0,e.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,e.unreachable)("Abstract method `getPattern` called.")}}class y extends S{constructor(T){super(),this._type=T[1],this._bbox=T[2],this._colorStops=T[3],this._p0=T[4],this._p1=T[5],this._r0=T[6],this._r1=T[7],this.matrix=null}_createGradient(T){let v;this._type==="axial"?v=T.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(v=T.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const p of this._colorStops)v.addColorStop(p[0],p[1]);return v}getPattern(T,v,p,a){let o;if(a===N.STROKE||a===N.FILL){const n=v.current.getClippedPathBoundingBox(a,(0,c.getCurrentTransform)(T))||[0,0,0,0],x=Math.ceil(n[2]-n[0])||1,C=Math.ceil(n[3]-n[1])||1,z=v.cachedCanvases.getCanvas("pattern",x,C,!0),G=z.context;G.clearRect(0,0,G.canvas.width,G.canvas.height),G.beginPath(),G.rect(0,0,G.canvas.width,G.canvas.height),G.translate(-n[0],-n[1]),p=e.Util.transform(p,[1,0,0,1,n[0],n[1]]),G.transform(...v.baseTransform),this.matrix&&G.transform(...this.matrix),M(G,this._bbox),G.fillStyle=this._createGradient(G),G.fill(),o=T.createPattern(z.canvas,"no-repeat");const ae=new DOMMatrix(p);try{o.setTransform(ae)}catch(le){(0,e.warn)(`RadialAxialShadingPattern.getPattern: "${le==null?void 0:le.message}".`)}}else M(T,this._bbox),o=this._createGradient(T);return o}}function k(u,T,v,p,a,o,n,x){const C=T.coords,z=T.colors,G=u.data,ae=u.width*4;let le;C[v+1]>C[p+1]&&(le=v,v=p,p=le,le=o,o=n,n=le),C[p+1]>C[a+1]&&(le=p,p=a,a=le,le=n,n=x,x=le),C[v+1]>C[p+1]&&(le=v,v=p,p=le,le=o,o=n,n=le);const re=(C[v]+T.offsetX)*T.scaleX,te=(C[v+1]+T.offsetY)*T.scaleY,X=(C[p]+T.offsetX)*T.scaleX,Y=(C[p+1]+T.offsetY)*T.scaleY,K=(C[a]+T.offsetX)*T.scaleX,se=(C[a+1]+T.offsetY)*T.scaleY;if(te>=se)return;const de=z[o],ge=z[o+1],V=z[o+2],g=z[n],d=z[n+1],L=z[n+2],W=z[x],$=z[x+1],H=z[x+2],i=Math.round(te),m=Math.round(se);let E,A,F,O,w,f,j,ne;for(let q=i;q<=m;q++){if(q<Y){let ie;q<te?ie=0:ie=(te-q)/(te-Y),E=re-(re-X)*ie,A=de-(de-g)*ie,F=ge-(ge-d)*ie,O=V-(V-L)*ie}else{let ie;q>se?ie=1:Y===se?ie=0:ie=(Y-q)/(Y-se),E=X-(X-K)*ie,A=g-(g-W)*ie,F=d-(d-$)*ie,O=L-(L-H)*ie}let J;q<te?J=0:q>se?J=1:J=(te-q)/(te-se),w=re-(re-K)*J,f=de-(de-W)*J,j=ge-(ge-$)*J,ne=V-(V-H)*J;const ee=Math.round(Math.min(E,w)),oe=Math.round(Math.max(E,w));let he=ae*q+ee*4;for(let ie=ee;ie<=oe;ie++)J=(E-ie)/(E-w),J<0?J=0:J>1&&(J=1),G[he++]=A-(A-f)*J|0,G[he++]=F-(F-j)*J|0,G[he++]=O-(O-ne)*J|0,G[he++]=255}}function B(u,T,v){const p=T.coords,a=T.colors;let o,n;switch(T.type){case"lattice":const x=T.verticesPerRow,C=Math.floor(p.length/x)-1,z=x-1;for(o=0;o<C;o++){let G=o*x;for(let ae=0;ae<z;ae++,G++)k(u,v,p[G],p[G+1],p[G+x],a[G],a[G+1],a[G+x]),k(u,v,p[G+x+1],p[G+1],p[G+x],a[G+x+1],a[G+1],a[G+x])}break;case"triangles":for(o=0,n=p.length;o<n;o+=3)k(u,v,p[o],p[o+1],p[o+2],a[o],a[o+1],a[o+2]);break;default:throw new Error("illegal figure")}}class R extends S{constructor(T){super(),this._coords=T[2],this._colors=T[3],this._figures=T[4],this._bounds=T[5],this._bbox=T[7],this._background=T[8],this.matrix=null}_createMeshCanvas(T,v,p){const x=Math.floor(this._bounds[0]),C=Math.floor(this._bounds[1]),z=Math.ceil(this._bounds[2])-x,G=Math.ceil(this._bounds[3])-C,ae=Math.min(Math.ceil(Math.abs(z*T[0]*1.1)),3e3),le=Math.min(Math.ceil(Math.abs(G*T[1]*1.1)),3e3),re=z/ae,te=G/le,X={coords:this._coords,colors:this._colors,offsetX:-x,offsetY:-C,scaleX:1/re,scaleY:1/te},Y=ae+2*2,K=le+2*2,se=p.getCanvas("mesh",Y,K,!1),de=se.context,ge=de.createImageData(ae,le);if(v){const g=ge.data;for(let d=0,L=g.length;d<L;d+=4)g[d]=v[0],g[d+1]=v[1],g[d+2]=v[2],g[d+3]=255}for(const g of this._figures)B(ge,g,X);return de.putImageData(ge,2,2),{canvas:se.canvas,offsetX:x-2*re,offsetY:C-2*te,scaleX:re,scaleY:te}}getPattern(T,v,p,a){M(T,this._bbox);let o;if(a===N.SHADING)o=e.Util.singularValueDecompose2dScale((0,c.getCurrentTransform)(T));else if(o=e.Util.singularValueDecompose2dScale(v.baseTransform),this.matrix){const x=e.Util.singularValueDecompose2dScale(this.matrix);o=[o[0]*x[0],o[1]*x[1]]}const n=this._createMeshCanvas(o,a===N.SHADING?null:this._background,v.cachedCanvases);return a!==N.SHADING&&(T.setTransform(...v.baseTransform),this.matrix&&T.transform(...this.matrix)),T.translate(n.offsetX,n.offsetY),T.scale(n.scaleX,n.scaleY),T.createPattern(n.canvas,"no-repeat")}}class P extends S{getPattern(){return"hotpink"}}function h(u){switch(u[0]){case"RadialAxial":return new y(u);case"Mesh":return new R(u);case"Dummy":return new P}throw new Error(`Unknown IR type: ${u[0]}`)}const t={COLORED:1,UNCOLORED:2};class l{static get MAX_PATTERN_SIZE(){return(0,e.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(T,v,p,a,o){this.operatorList=T[2],this.matrix=T[3]||[1,0,0,1,0,0],this.bbox=T[4],this.xstep=T[5],this.ystep=T[6],this.paintType=T[7],this.tilingType=T[8],this.color=v,this.ctx=p,this.canvasGraphicsFactory=a,this.baseTransform=o}createPatternCanvas(T){const v=this.operatorList,p=this.bbox,a=this.xstep,o=this.ystep,n=this.paintType,x=this.tilingType,C=this.color,z=this.canvasGraphicsFactory;(0,e.info)("TilingType: "+x);const G=p[0],ae=p[1],le=p[2],re=p[3],te=e.Util.singularValueDecompose2dScale(this.matrix),X=e.Util.singularValueDecompose2dScale(this.baseTransform),Y=[te[0]*X[0],te[1]*X[1]],K=this.getSizeAndScale(a,this.ctx.canvas.width,Y[0]),se=this.getSizeAndScale(o,this.ctx.canvas.height,Y[1]),de=T.cachedCanvases.getCanvas("pattern",K.size,se.size,!0),ge=de.context,V=z.createCanvasGraphics(ge);V.groupLevel=T.groupLevel,this.setFillAndStrokeStyleToContext(V,n,C);let g=G,d=ae,L=le,W=re;return G<0&&(g=0,L+=Math.abs(G)),ae<0&&(d=0,W+=Math.abs(ae)),ge.translate(-(K.scale*g),-(se.scale*d)),V.transform(K.scale,0,0,se.scale,0,0),ge.save(),this.clipBbox(V,g,d,L,W),V.baseTransform=(0,c.getCurrentTransform)(V.ctx),V.executeOperatorList(v),V.endDrawing(),{canvas:de.canvas,scaleX:K.scale,scaleY:se.scale,offsetX:g,offsetY:d}}getSizeAndScale(T,v,p){T=Math.abs(T);const a=Math.max(l.MAX_PATTERN_SIZE,v);let o=Math.ceil(T*p);return o>=a?o=a:p=o/T,{scale:p,size:o}}clipBbox(T,v,p,a,o){const n=a-v,x=o-p;T.ctx.rect(v,p,n,x),T.current.updateRectMinMax((0,c.getCurrentTransform)(T.ctx),[v,p,a,o]),T.clip(),T.endPath()}setFillAndStrokeStyleToContext(T,v,p){const a=T.ctx,o=T.current;switch(v){case t.COLORED:const n=this.ctx;a.fillStyle=n.fillStyle,a.strokeStyle=n.strokeStyle,o.fillColor=n.fillStyle,o.strokeColor=n.strokeStyle;break;case t.UNCOLORED:const x=e.Util.makeHexColor(p[0],p[1],p[2]);a.fillStyle=x,a.strokeStyle=x,o.fillColor=x,o.strokeColor=x;break;default:throw new e.FormatError(`Unsupported paint type: ${v}`)}}getPattern(T,v,p,a){let o=p;a!==N.SHADING&&(o=e.Util.transform(o,v.baseTransform),this.matrix&&(o=e.Util.transform(o,this.matrix)));const n=this.createPatternCanvas(v);let x=new DOMMatrix(o);x=x.translate(n.offsetX,n.offsetY),x=x.scale(1/n.scaleX,1/n.scaleY);const C=T.createPattern(n.canvas,"repeat");try{C.setTransform(x)}catch(z){(0,e.warn)(`TilingPattern.getPattern: "${z==null?void 0:z.message}".`)}return C}}s.TilingPattern=l},(_,s,b)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.applyMaskImageData=c;var e=b(1);function c({src:D,srcPos:N=0,dest:M,destPos:S=0,width:y,height:k,inverseDecode:B=!1}){const R=e.FeatureTest.isLittleEndian?4278190080:255,[P,h]=B?[0,R]:[R,0],t=y>>3,l=y&7,u=D.length;M=new Uint32Array(M.buffer);for(let T=0;T<k;T++){for(const p=N+t;N<p;N++){const a=N<u?D[N]:255;M[S++]=a&128?h:P,M[S++]=a&64?h:P,M[S++]=a&32?h:P,M[S++]=a&16?h:P,M[S++]=a&8?h:P,M[S++]=a&4?h:P,M[S++]=a&2?h:P,M[S++]=a&1?h:P}if(l===0)continue;const v=N<u?D[N++]:255;for(let p=0;p<l;p++)M[S++]=v&1<<7-p?h:P}return{srcPos:N,destPos:S}}},(_,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GlobalWorkerOptions=void 0;const b=Object.create(null);s.GlobalWorkerOptions=b,b.workerPort=b.workerPort===void 0?null:b.workerPort,b.workerSrc=b.workerSrc===void 0?"":b.workerSrc},(_,s,b)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.MessageHandler=void 0;var e=b(1);const c={DATA:1,ERROR:2},D={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function N(S){switch(S instanceof Error||typeof S=="object"&&S!==null||(0,e.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),S.name){case"AbortException":return new e.AbortException(S.message);case"MissingPDFException":return new e.MissingPDFException(S.message);case"PasswordException":return new e.PasswordException(S.message,S.code);case"UnexpectedResponseException":return new e.UnexpectedResponseException(S.message,S.status);case"UnknownErrorException":return new e.UnknownErrorException(S.message,S.details);default:return new e.UnknownErrorException(S.message,S.toString())}}class M{constructor(y,k,B){this.sourceName=y,this.targetName=k,this.comObj=B,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=R=>{const P=R.data;if(P.targetName!==this.sourceName)return;if(P.stream){this._processStreamMessage(P);return}if(P.callback){const t=P.callbackId,l=this.callbackCapabilities[t];if(!l)throw new Error(`Cannot resolve callback ${t}`);if(delete this.callbackCapabilities[t],P.callback===c.DATA)l.resolve(P.data);else if(P.callback===c.ERROR)l.reject(N(P.reason));else throw new Error("Unexpected callback case");return}const h=this.actionHandler[P.action];if(!h)throw new Error(`Unknown action from worker: ${P.action}`);if(P.callbackId){const t=this.sourceName,l=P.sourceName;new Promise(function(u){u(h(P.data))}).then(function(u){B.postMessage({sourceName:t,targetName:l,callback:c.DATA,callbackId:P.callbackId,data:u})},function(u){B.postMessage({sourceName:t,targetName:l,callback:c.ERROR,callbackId:P.callbackId,reason:N(u)})});return}if(P.streamId){this._createStreamSink(P);return}h(P.data)},B.addEventListener("message",this._onComObjOnMessage)}on(y,k){const B=this.actionHandler;if(B[y])throw new Error(`There is already an actionName called "${y}"`);B[y]=k}send(y,k,B){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:y,data:k},B)}sendWithPromise(y,k,B){const R=this.callbackId++,P=(0,e.createPromiseCapability)();this.callbackCapabilities[R]=P;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:y,callbackId:R,data:k},B)}catch(h){P.reject(h)}return P.promise}sendWithStream(y,k,B,R){const P=this.streamId++,h=this.sourceName,t=this.targetName,l=this.comObj;return new ReadableStream({start:u=>{const T=(0,e.createPromiseCapability)();return this.streamControllers[P]={controller:u,startCall:T,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:h,targetName:t,action:y,streamId:P,data:k,desiredSize:u.desiredSize},R),T.promise},pull:u=>{const T=(0,e.createPromiseCapability)();return this.streamControllers[P].pullCall=T,l.postMessage({sourceName:h,targetName:t,stream:D.PULL,streamId:P,desiredSize:u.desiredSize}),T.promise},cancel:u=>{(0,e.assert)(u instanceof Error,"cancel must have a valid reason");const T=(0,e.createPromiseCapability)();return this.streamControllers[P].cancelCall=T,this.streamControllers[P].isClosed=!0,l.postMessage({sourceName:h,targetName:t,stream:D.CANCEL,streamId:P,reason:N(u)}),T.promise}},B)}_createStreamSink(y){const k=y.streamId,B=this.sourceName,R=y.sourceName,P=this.comObj,h=this,t=this.actionHandler[y.action],l={enqueue(u,T=1,v){if(this.isCancelled)return;const p=this.desiredSize;this.desiredSize-=T,p>0&&this.desiredSize<=0&&(this.sinkCapability=(0,e.createPromiseCapability)(),this.ready=this.sinkCapability.promise),P.postMessage({sourceName:B,targetName:R,stream:D.ENQUEUE,streamId:k,chunk:u},v)},close(){this.isCancelled||(this.isCancelled=!0,P.postMessage({sourceName:B,targetName:R,stream:D.CLOSE,streamId:k}),delete h.streamSinks[k])},error(u){(0,e.assert)(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,P.postMessage({sourceName:B,targetName:R,stream:D.ERROR,streamId:k,reason:N(u)}))},sinkCapability:(0,e.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:y.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[k]=l,new Promise(function(u){u(t(y.data,l))}).then(function(){P.postMessage({sourceName:B,targetName:R,stream:D.START_COMPLETE,streamId:k,success:!0})},function(u){P.postMessage({sourceName:B,targetName:R,stream:D.START_COMPLETE,streamId:k,reason:N(u)})})}_processStreamMessage(y){const k=y.streamId,B=this.sourceName,R=y.sourceName,P=this.comObj,h=this.streamControllers[k],t=this.streamSinks[k];switch(y.stream){case D.START_COMPLETE:y.success?h.startCall.resolve():h.startCall.reject(N(y.reason));break;case D.PULL_COMPLETE:y.success?h.pullCall.resolve():h.pullCall.reject(N(y.reason));break;case D.PULL:if(!t){P.postMessage({sourceName:B,targetName:R,stream:D.PULL_COMPLETE,streamId:k,success:!0});break}t.desiredSize<=0&&y.desiredSize>0&&t.sinkCapability.resolve(),t.desiredSize=y.desiredSize,new Promise(function(l){l(t.onPull&&t.onPull())}).then(function(){P.postMessage({sourceName:B,targetName:R,stream:D.PULL_COMPLETE,streamId:k,success:!0})},function(l){P.postMessage({sourceName:B,targetName:R,stream:D.PULL_COMPLETE,streamId:k,reason:N(l)})});break;case D.ENQUEUE:if((0,e.assert)(h,"enqueue should have stream controller"),h.isClosed)break;h.controller.enqueue(y.chunk);break;case D.CLOSE:if((0,e.assert)(h,"close should have stream controller"),h.isClosed)break;h.isClosed=!0,h.controller.close(),this._deleteStreamController(h,k);break;case D.ERROR:(0,e.assert)(h,"error should have stream controller"),h.controller.error(N(y.reason)),this._deleteStreamController(h,k);break;case D.CANCEL_COMPLETE:y.success?h.cancelCall.resolve():h.cancelCall.reject(N(y.reason)),this._deleteStreamController(h,k);break;case D.CANCEL:if(!t)break;new Promise(function(l){l(t.onCancel&&t.onCancel(N(y.reason)))}).then(function(){P.postMessage({sourceName:B,targetName:R,stream:D.CANCEL_COMPLETE,streamId:k,success:!0})},function(l){P.postMessage({sourceName:B,targetName:R,stream:D.CANCEL_COMPLETE,streamId:k,reason:N(l)})}),t.sinkCapability.reject(N(y.reason)),t.isCancelled=!0,delete this.streamSinks[k];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(y,k){await Promise.allSettled([y.startCall&&y.startCall.promise,y.pullCall&&y.pullCall.promise,y.cancelCall&&y.cancelCall.promise]),delete this.streamControllers[k]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}s.MessageHandler=M},(_,s,b)=>{var D,N;Object.defineProperty(s,"__esModule",{value:!0}),s.Metadata=void 0;var e=b(1);class c{constructor({parsedData:S,rawData:y}){pe(this,D);pe(this,N);fe(this,D,S),fe(this,N,y)}getRaw(){return I(this,N)}get(S){return I(this,D).get(S)??null}getAll(){return(0,e.objectFromMap)(I(this,D))}has(S){return I(this,D).has(S)}}D=new WeakMap,N=new WeakMap,s.Metadata=c},(_,s,b)=>{var M,S,y,k,B,R,pt;Object.defineProperty(s,"__esModule",{value:!0}),s.OptionalContentConfig=void 0;var e=b(1);const c=Symbol("INTERNAL");class D{constructor(t,l){pe(this,M,!0);this.name=t,this.intent=l}get visible(){return I(this,M)}_setVisible(t,l){t!==c&&(0,e.unreachable)("Internal method `_setVisible` called."),fe(this,M,l)}}M=new WeakMap;class N{constructor(t){pe(this,R);pe(this,S,!0);pe(this,y,new Map);pe(this,k,null);pe(this,B,null);if(this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,fe(this,B,t.order);for(const l of t.groups)I(this,y).set(l.id,new D(l.name,l.intent));if(t.baseState==="OFF")for(const l of I(this,y).values())l._setVisible(c,!1);for(const l of t.on)I(this,y).get(l)._setVisible(c,!0);for(const l of t.off)I(this,y).get(l)._setVisible(c,!1);fe(this,k,new Map);for(const[l,u]of I(this,y))I(this,k).set(l,u.visible)}}isVisible(t){if(I(this,y).size===0)return!0;if(!t)return(0,e.warn)("Optional content group not defined."),!0;if(t.type==="OCG")return I(this,y).has(t.id)?I(this,y).get(t.id).visible:((0,e.warn)(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return ue(this,R,pt).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const l of t.ids){if(!I(this,y).has(l))return(0,e.warn)(`Optional content group not found: ${l}`),!0;if(I(this,y).get(l).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const l of t.ids){if(!I(this,y).has(l))return(0,e.warn)(`Optional content group not found: ${l}`),!0;if(!I(this,y).get(l).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const l of t.ids){if(!I(this,y).has(l))return(0,e.warn)(`Optional content group not found: ${l}`),!0;if(!I(this,y).get(l).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const l of t.ids){if(!I(this,y).has(l))return(0,e.warn)(`Optional content group not found: ${l}`),!0;if(I(this,y).get(l).visible)return!1}return!0}return(0,e.warn)(`Unknown optional content policy ${t.policy}.`),!0}return(0,e.warn)(`Unknown group type ${t.type}.`),!0}setVisibility(t,l=!0){if(!I(this,y).has(t)){(0,e.warn)(`Optional content group not found: ${t}`);return}I(this,y).get(t)._setVisible(c,!!l),fe(this,S,null)}get hasInitialVisibility(){if(I(this,S)!==null)return I(this,S);for(const[t,l]of I(this,y)){const u=I(this,k).get(t);if(l.visible!==u)return fe(this,S,!1)}return fe(this,S,!0)}getOrder(){return I(this,y).size?I(this,B)?I(this,B).slice():[...I(this,y).keys()]:null}getGroups(){return I(this,y).size>0?(0,e.objectFromMap)(I(this,y)):null}getGroup(t){return I(this,y).get(t)||null}}S=new WeakMap,y=new WeakMap,k=new WeakMap,B=new WeakMap,R=new WeakSet,pt=function(t){const l=t.length;if(l<2)return!0;const u=t[0];for(let T=1;T<l;T++){const v=t[T];let p;if(Array.isArray(v))p=ue(this,R,pt).call(this,v);else if(I(this,y).has(v))p=I(this,y).get(v).visible;else return(0,e.warn)(`Optional content group not found: ${v}`),!0;switch(u){case"And":if(!p)return!1;break;case"Or":if(p)return!0;break;case"Not":return!p;default:return!0}}return u==="And"},s.OptionalContentConfig=N},(_,s,b)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFDataTransportStream=void 0;var e=b(1),c=b(8);class D{constructor(y,k){(0,e.assert)(k,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=y.progressiveDone||!1,this._contentDispositionFilename=y.contentDispositionFilename||null;const B=y.initialData;if((B==null?void 0:B.length)>0){const R=new Uint8Array(B).buffer;this._queuedChunks.push(R)}this._pdfDataRangeTransport=k,this._isStreamingSupported=!y.disableStream,this._isRangeSupported=!y.disableRange,this._contentLength=y.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((R,P)=>{this._onReceiveData({begin:R,chunk:P})}),this._pdfDataRangeTransport.addProgressListener((R,P)=>{this._onProgress({loaded:R,total:P})}),this._pdfDataRangeTransport.addProgressiveReadListener(R=>{this._onReceiveData({chunk:R})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(y){const k=new Uint8Array(y.chunk).buffer;if(y.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(k):this._queuedChunks.push(k);else{const B=this._rangeReaders.some(function(R){return R._begin!==y.begin?!1:(R._enqueue(k),!0)});(0,e.assert)(B,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var y;return((y=this._fullRequestReader)==null?void 0:y._loaded)??0}_onProgress(y){if(y.total===void 0){const k=this._rangeReaders[0];k!=null&&k.onProgress&&k.onProgress({loaded:y.loaded})}else{const k=this._fullRequestReader;k!=null&&k.onProgress&&k.onProgress({loaded:y.loaded,total:y.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(y){const k=this._rangeReaders.indexOf(y);k>=0&&this._rangeReaders.splice(k,1)}getFullReader(){(0,e.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const y=this._queuedChunks;return this._queuedChunks=null,new N(this,y,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(y,k){if(k<=this._progressiveDataLength)return null;const B=new M(this,y,k);return this._pdfDataRangeTransport.requestDataRange(y,k),this._rangeReaders.push(B),B}cancelAllRequests(y){this._fullRequestReader&&this._fullRequestReader.cancel(y);for(const k of this._rangeReaders.slice(0))k.cancel(y);this._pdfDataRangeTransport.abort()}}s.PDFDataTransportStream=D;class N{constructor(y,k,B=!1,R=null){this._stream=y,this._done=B||!1,this._filename=(0,c.isPdfFile)(R)?R:null,this._queuedChunks=k||[],this._loaded=0;for(const P of this._queuedChunks)this._loaded+=P.byteLength;this._requests=[],this._headersReady=Promise.resolve(),y._fullRequestReader=this,this.onProgress=null}_enqueue(y){this._done||(this._requests.length>0?this._requests.shift().resolve({value:y,done:!1}):this._queuedChunks.push(y),this._loaded+=y.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const y=(0,e.createPromiseCapability)();return this._requests.push(y),y.promise}cancel(y){this._done=!0;for(const k of this._requests)k.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class M{constructor(y,k,B){this._stream=y,this._begin=k,this._end=B,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(y){if(!this._done){if(this._requests.length===0)this._queuedChunk=y;else{this._requests.shift().resolve({value:y,done:!1});for(const B of this._requests)B.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const k=this._queuedChunk;return this._queuedChunk=null,{value:k,done:!1}}if(this._done)return{value:void 0,done:!0};const y=(0,e.createPromiseCapability)();return this._requests.push(y),y.promise}cancel(y){this._done=!0;for(const k of this._requests)k.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(_,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaText=void 0;class b{static textContent(c){const D=[],N={items:D,styles:Object.create(null)};function M(S){var B;if(!S)return;let y=null;const k=S.name;if(k==="#text")y=S.value;else if(b.shouldBuildText(k))(B=S==null?void 0:S.attributes)!=null&&B.textContent?y=S.attributes.textContent:S.value&&(y=S.value);else return;if(y!==null&&D.push({str:y}),!!S.children)for(const R of S.children)M(R)}return M(c),N}static shouldBuildText(c){return!(c==="textarea"||c==="input"||c==="option"||c==="select")}}s.XfaText=b},(_,s,b)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NodeStandardFontDataFactory=s.NodeCanvasFactory=s.NodeCMapReaderFactory=void 0;var e=b(9);const c=function(S){return new Promise((y,k)=>{require$$5.readFile(S,(R,P)=>{if(R||!P){k(new Error(R));return}y(new Uint8Array(P))})})};class D extends e.BaseCanvasFactory{_createCanvas(y,k){return require$$5.createCanvas(y,k)}}s.NodeCanvasFactory=D;class N extends e.BaseCMapReaderFactory{_fetchData(y,k){return c(y).then(B=>({cMapData:B,compressionType:k}))}}s.NodeCMapReaderFactory=N;class M extends e.BaseStandardFontDataFactory{_fetchData(y){return c(y)}}s.NodeStandardFontDataFactory=M},(_,s,b)=>{var S,y,k,B,R,P,h,t,l,ft,Mt,gt,Ot;Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationEditorLayer=void 0;var e=b(7),c=b(1),D=b(23),N=b(24);const a=class a{constructor(n){pe(this,l);pe(this,S);pe(this,y,!1);pe(this,k,this.pointerup.bind(this));pe(this,B,this.pointerdown.bind(this));pe(this,R,new Map);pe(this,P,!1);pe(this,h,!1);pe(this,t);a._initialized||(a._initialized=!0,D.FreeTextEditor.initialize(n.l10n),N.InkEditor.initialize(n.l10n),n.uiManager.registerEditorTypes([D.FreeTextEditor,N.InkEditor])),fe(this,t,n.uiManager),this.annotationStorage=n.annotationStorage,this.pageIndex=n.pageIndex,this.div=n.div,fe(this,S,n.accessibilityManager),I(this,t).addLayer(this)}updateToolbar(n){I(this,t).updateToolbar(n)}updateMode(n=I(this,t).getMode()){ue(this,l,Ot).call(this),n===c.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),I(this,t).unselectAll()}addInkEditorIfNeeded(n){if(!n&&I(this,t).getMode()!==c.AnnotationEditorType.INK)return;if(!n){for(const C of I(this,R).values())if(C.isEmpty()){C.setInBackground();return}}ue(this,l,gt).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(n){I(this,t).setEditingState(n)}addCommands(n){I(this,t).addCommands(n)}enable(){this.div.style.pointerEvents="auto";for(const n of I(this,R).values())n.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const n of I(this,R).values())n.disableEditing()}setActiveEditor(n){I(this,t).getActive()!==n&&I(this,t).setActiveEditor(n)}enableClick(){this.div.addEventListener("pointerdown",I(this,B)),this.div.addEventListener("pointerup",I(this,k))}disableClick(){this.div.removeEventListener("pointerdown",I(this,B)),this.div.removeEventListener("pointerup",I(this,k))}attach(n){I(this,R).set(n.id,n)}detach(n){var x;I(this,R).delete(n.id),(x=I(this,S))==null||x.removePointerInTextLayer(n.contentDiv)}remove(n){I(this,t).removeEditor(n),this.detach(n),this.annotationStorage.remove(n.id),n.div.style.display="none",setTimeout(()=>{n.div.style.display="",n.div.remove(),n.isAttachedToDOM=!1,document.activeElement===document.body&&I(this,t).focusMainContainer()},0),I(this,h)||this.addInkEditorIfNeeded(!1)}add(n){if(ue(this,l,ft).call(this,n),I(this,t).addEditor(n),this.attach(n),!n.isAttachedToDOM){const x=n.render();this.div.append(x),n.isAttachedToDOM=!0}this.moveEditorInDOM(n),n.onceAdded(),this.addToAnnotationStorage(n)}moveEditorInDOM(n){var x;(x=I(this,S))==null||x.moveElementInDOM(this.div,n.div,n.contentDiv,!0)}addToAnnotationStorage(n){!n.isEmpty()&&!this.annotationStorage.has(n.id)&&this.annotationStorage.setValue(n.id,n)}addOrRebuild(n){n.needsToBeRebuilt()?n.rebuild():this.add(n)}addANewEditor(n){const x=()=>{this.addOrRebuild(n)},C=()=>{n.remove()};this.addCommands({cmd:x,undo:C,mustExec:!0})}addUndoableEditor(n){const x=()=>{this.addOrRebuild(n)},C=()=>{n.remove()};this.addCommands({cmd:x,undo:C,mustExec:!1})}getNextId(){return I(this,t).getId()}deserialize(n){switch(n.annotationType){case c.AnnotationEditorType.FREETEXT:return D.FreeTextEditor.deserialize(n,this);case c.AnnotationEditorType.INK:return N.InkEditor.deserialize(n,this)}return null}setSelected(n){I(this,t).setSelected(n)}toggleSelected(n){I(this,t).toggleSelected(n)}isSelected(n){return I(this,t).isSelected(n)}unselect(n){I(this,t).unselect(n)}pointerup(n){const x=e.KeyboardManager.platform.isMac;if(!(n.button!==0||n.ctrlKey&&x)&&n.target===this.div&&I(this,P)){if(fe(this,P,!1),!I(this,y)){fe(this,y,!0);return}ue(this,l,gt).call(this,n)}}pointerdown(n){const x=e.KeyboardManager.platform.isMac;if(n.button!==0||n.ctrlKey&&x||n.target!==this.div)return;fe(this,P,!0);const C=I(this,t).getActive();fe(this,y,!C||C.isEmpty())}drop(n){const x=n.dataTransfer.getData("text/plain"),C=I(this,t).getEditor(x);if(!C)return;n.preventDefault(),n.dataTransfer.dropEffect="move",ue(this,l,ft).call(this,C);const z=this.div.getBoundingClientRect(),G=n.clientX-z.x,ae=n.clientY-z.y;C.translate(G-C.startX,ae-C.startY),this.moveEditorInDOM(C),C.div.focus()}dragover(n){n.preventDefault()}destroy(){var n,x;((n=I(this,t).getActive())==null?void 0:n.parent)===this&&I(this,t).setActiveEditor(null);for(const C of I(this,R).values())(x=I(this,S))==null||x.removePointerInTextLayer(C.contentDiv),C.isAttachedToDOM=!1,C.div.remove(),C.parent=null;this.div=null,I(this,R).clear(),I(this,t).removeLayer(this)}render(n){this.viewport=n.viewport,(0,e.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const x of I(this,t).getEditors(this.pageIndex))this.add(x);this.updateMode()}update(n){this.viewport=n.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[n,x,C,z]=this.viewport.viewBox,G=C-n,ae=z-x;return[G,ae]}get viewportBaseDimensions(){const{width:n,height:x,rotation:C}=this.viewport;return C%180===0?[n,x]:[x,n]}setDimensions(){const{width:n,height:x,rotation:C}=this.viewport,z=C%180!==0,G=Math.floor(n)+"px",ae=Math.floor(x)+"px";this.div.style.width=z?ae:G,this.div.style.height=z?G:ae,this.div.setAttribute("data-main-rotation",C)}};S=new WeakMap,y=new WeakMap,k=new WeakMap,B=new WeakMap,R=new WeakMap,P=new WeakMap,h=new WeakMap,t=new WeakMap,l=new WeakSet,ft=function(n){var x;n.parent!==this&&(this.attach(n),n.pageIndex=this.pageIndex,(x=n.parent)==null||x.detach(n),n.parent=this,n.div&&n.isAttachedToDOM&&(n.div.remove(),this.div.append(n.div)))},Mt=function(n){switch(I(this,t).getMode()){case c.AnnotationEditorType.FREETEXT:return new D.FreeTextEditor(n);case c.AnnotationEditorType.INK:return new N.InkEditor(n)}return null},gt=function(n){const x=this.getNextId(),C=ue(this,l,Mt).call(this,{parent:this,id:x,x:n.offsetX,y:n.offsetY});return C&&this.add(C),C},Ot=function(){fe(this,h,!0);for(const n of I(this,R).values())n.isEmpty()&&n.remove();fe(this,h,!1)},ke(a,"_initialized",!1);let M=a;s.AnnotationEditorLayer=M},(_,s,b)=>{var M,S,y,k,B,R,P,h,Dt,It,Lt,mt;Object.defineProperty(s,"__esModule",{value:!0}),s.FreeTextEditor=void 0;var e=b(1),c=b(7),D=b(6);const v=class v extends D.AnnotationEditor{constructor(o){super({...o,name:"freeTextEditor"});pe(this,h);pe(this,M,this.editorDivBlur.bind(this));pe(this,S,this.editorDivFocus.bind(this));pe(this,y,this.editorDivKeydown.bind(this));pe(this,k);pe(this,B,"");pe(this,R,!1);pe(this,P);fe(this,k,o.color||v._defaultColor||D.AnnotationEditor._defaultLineColor),fe(this,P,o.fontSize||v._defaultFontSize)}static initialize(o){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(x=>[x,o.get(x)]));const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(o,n){switch(o){case e.AnnotationEditorParamsType.FREETEXT_SIZE:v._defaultFontSize=n;break;case e.AnnotationEditorParamsType.FREETEXT_COLOR:v._defaultColor=n;break}}updateParams(o,n){switch(o){case e.AnnotationEditorParamsType.FREETEXT_SIZE:ue(this,h,Dt).call(this,n);break;case e.AnnotationEditorParamsType.FREETEXT_COLOR:ue(this,h,It).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[e.AnnotationEditorParamsType.FREETEXT_SIZE,v._defaultFontSize],[e.AnnotationEditorParamsType.FREETEXT_COLOR,v._defaultColor||D.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[e.AnnotationEditorParamsType.FREETEXT_SIZE,I(this,P)],[e.AnnotationEditorParamsType.FREETEXT_COLOR,I(this,k)]]}getInitialTranslation(){return[-v._internalPadding*this.parent.scaleFactor,-(v._internalPadding+I(this,P))*this.parent.scaleFactor]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(e.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",I(this,y)),this.editorDiv.addEventListener("focus",I(this,S)),this.editorDiv.addEventListener("blur",I(this,M)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",I(this,y)),this.editorDiv.removeEventListener("focus",I(this,S)),this.editorDiv.removeEventListener("blur",I(this,M)),this.div.focus(),this.isEditing=!1)}focusin(o){super.focusin(o),o.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}commit(){super.commit(),I(this,R)||(fe(this,R,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),fe(this,B,ue(this,h,Lt).call(this).trimEnd()),ue(this,h,mt).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(o){this.enableEditMode(),this.editorDiv.focus()}keydown(o){o.target===this.div&&o.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(o){v._keyboardManager.exec(this,o)}editorDivFocus(o){this.isEditing=!0}editorDivBlur(o){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let o,n;this.width&&(o=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),v._l10nPromise.get("editor_free_text_aria_label").then(C=>{var z;return(z=this.editorDiv)==null?void 0:z.setAttribute("aria-label",C)}),v._l10nPromise.get("free_text_default_content").then(C=>{var z;return(z=this.editorDiv)==null?void 0:z.setAttribute("default-content",C)}),this.editorDiv.contentEditable=!0;const{style:x}=this.editorDiv;if(x.fontSize=`calc(${I(this,P)}px * var(--scale-factor))`,x.color=I(this,k),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,c.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[C,z]=this.parent.viewportBaseDimensions;this.setAt(o*C,n*z,this.width*C,this.height*z);for(const G of I(this,B).split(`
`)){const ae=document.createElement("div");ae.append(G?document.createTextNode(G):document.createElement("br")),this.editorDiv.append(ae)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(o,n){const x=super.deserialize(o,n);return fe(x,P,o.fontSize),fe(x,k,e.Util.makeHexColor(...o.color)),fe(x,B,o.value),x}serialize(){if(this.isEmpty())return null;const o=v._internalPadding*this.parent.scaleFactor,n=this.getRect(o,o),x=D.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:e.AnnotationEditorType.FREETEXT,color:x,fontSize:I(this,P),value:I(this,B),pageIndex:this.parent.pageIndex,rect:n,rotation:this.rotation}}};M=new WeakMap,S=new WeakMap,y=new WeakMap,k=new WeakMap,B=new WeakMap,R=new WeakMap,P=new WeakMap,h=new WeakSet,Dt=function(o){const n=C=>{this.editorDiv.style.fontSize=`calc(${C}px * var(--scale-factor))`,this.translate(0,-(C-I(this,P))*this.parent.scaleFactor),fe(this,P,C),ue(this,h,mt).call(this)},x=I(this,P);this.parent.addCommands({cmd:()=>{n(o)},undo:()=>{n(x)},mustExec:!0,type:e.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},It=function(o){const n=I(this,k);this.parent.addCommands({cmd:()=>{fe(this,k,o),this.editorDiv.style.color=o},undo:()=>{fe(this,k,n),this.editorDiv.style.color=n},mustExec:!0,type:e.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Lt=function(){const o=this.editorDiv.getElementsByTagName("div");if(o.length===0)return this.editorDiv.innerText;const n=[];for(let x=0,C=o.length;x<C;x++){const G=o[x].firstChild;(G==null?void 0:G.nodeName)==="#text"?n.push(G.data):n.push("")}return n.join(`
`)},mt=function(){const[o,n]=this.parent.viewportBaseDimensions,x=this.div.getBoundingClientRect();this.width=x.width/o,this.height=x.height/n},ke(v,"_freeTextDefaultContent",""),ke(v,"_l10nPromise"),ke(v,"_internalPadding",0),ke(v,"_defaultColor",null),ke(v,"_defaultFontSize",10),ke(v,"_keyboardManager",new c.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],v.prototype.commitOrRemove]])),ke(v,"_type","freetext");let N=v;s.FreeTextEditor=N},(_,s,b)=>{var y,k,B,R,P,h,t,l,u,T,v,p,a,o,n,Nt,jt,Ut,Bt,yt,Wt,qt,$t,Ie,bt,et,tt,Ge,_t,nt,g,vt,Gt,Ht,zt,At,rt,He,xt;Object.defineProperty(s,"__esModule",{value:!0}),s.InkEditor=void 0,Object.defineProperty(s,"fitCurve",{enumerable:!0,get:function(){return D.fitCurve}});var e=b(1),c=b(6),D=b(25),N=b(7);const M=16,A=class A extends c.AnnotationEditor{constructor(w){super({...w,name:"inkEditor"});pe(this,n);pe(this,y,0);pe(this,k,0);pe(this,B,0);pe(this,R,this.canvasPointermove.bind(this));pe(this,P,this.canvasPointerleave.bind(this));pe(this,h,this.canvasPointerup.bind(this));pe(this,t,this.canvasPointerdown.bind(this));pe(this,l,!1);pe(this,u,!1);pe(this,T,null);pe(this,v,null);pe(this,p,0);pe(this,a,0);pe(this,o,null);this.color=w.color||null,this.thickness=w.thickness||null,this.opacity=w.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(w){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(f=>[f,w.get(f)]))}static updateDefaultParams(w,f){switch(w){case e.AnnotationEditorParamsType.INK_THICKNESS:A._defaultThickness=f;break;case e.AnnotationEditorParamsType.INK_COLOR:A._defaultColor=f;break;case e.AnnotationEditorParamsType.INK_OPACITY:A._defaultOpacity=f/100;break}}updateParams(w,f){switch(w){case e.AnnotationEditorParamsType.INK_THICKNESS:ue(this,n,Nt).call(this,f);break;case e.AnnotationEditorParamsType.INK_COLOR:ue(this,n,jt).call(this,f);break;case e.AnnotationEditorParamsType.INK_OPACITY:ue(this,n,Ut).call(this,f);break}}static get defaultPropertiesToUpdate(){return[[e.AnnotationEditorParamsType.INK_THICKNESS,A._defaultThickness],[e.AnnotationEditorParamsType.INK_COLOR,A._defaultColor||c.AnnotationEditor._defaultLineColor],[e.AnnotationEditorParamsType.INK_OPACITY,Math.round(A._defaultOpacity*100)]]}get propertiesToUpdate(){return[[e.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||A._defaultThickness],[e.AnnotationEditorParamsType.INK_COLOR,this.color||A._defaultColor||c.AnnotationEditor._defaultLineColor],[e.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??A._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(ue(this,n,et).call(this),ue(this,n,tt).call(this)),this.isAttachedToDOM||(this.parent.add(this),ue(this,n,Ge).call(this)),ue(this,n,He).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,I(this,v).disconnect(),fe(this,v,null),super.remove())}enableEditMode(){I(this,l)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",I(this,t)),this.canvas.addEventListener("pointerup",I(this,h)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",I(this,t)),this.canvas.removeEventListener("pointerup",I(this,h)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){I(this,l)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),fe(this,l,!0),this.div.classList.add("disabled"),ue(this,n,He).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(w){super.focusin(w),this.enableEditMode()}canvasPointerdown(w){w.button!==0||!this.isInEditMode()||I(this,l)||(this.setInForeground(),w.type!=="mouse"&&this.div.focus(),w.stopPropagation(),this.canvas.addEventListener("pointerleave",I(this,P)),this.canvas.addEventListener("pointermove",I(this,R)),ue(this,n,Wt).call(this,w.offsetX,w.offsetY))}canvasPointermove(w){w.stopPropagation(),ue(this,n,qt).call(this,w.offsetX,w.offsetY)}canvasPointerup(w){w.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(w.stopPropagation(),ue(this,n,bt).call(this,w),this.setInBackground())}canvasPointerleave(w){ue(this,n,bt).call(this,w),this.setInBackground()}render(){if(this.div)return this.div;let w,f;this.width&&(w=this.x,f=this.y),super.render(),A._l10nPromise.get("editor_ink_aria_label").then(ee=>{var oe;return(oe=this.div)==null?void 0:oe.setAttribute("aria-label",ee)});const[j,ne,q,J]=ue(this,n,Bt).call(this);if(this.setAt(j,ne,0,0),this.setDims(q,J),ue(this,n,et).call(this),this.width){const[ee,oe]=this.parent.viewportBaseDimensions;this.setAt(w*ee,f*oe,this.width*ee,this.height*oe),fe(this,u,!0),ue(this,n,Ge).call(this),this.setDims(this.width*ee,this.height*oe),ue(this,n,Ie).call(this),ue(this,n,xt).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return ue(this,n,tt).call(this),this.div}setDimensions(w,f){const j=Math.round(w),ne=Math.round(f);if(I(this,p)===j&&I(this,a)===ne)return;fe(this,p,j),fe(this,a,ne),this.canvas.style.visibility="hidden",I(this,y)&&Math.abs(I(this,y)-w/f)>.01&&(f=Math.ceil(w/I(this,y)),this.setDims(w,f));const[q,J]=this.parent.viewportBaseDimensions;this.width=w/q,this.height=f/J,I(this,l)&&ue(this,n,_t).call(this,w,f),ue(this,n,Ge).call(this),ue(this,n,Ie).call(this),this.canvas.style.visibility="visible"}static deserialize(w,f){var ve,be;const j=super.deserialize(w,f);j.thickness=w.thickness,j.color=e.Util.makeHexColor(...w.color),j.opacity=w.opacity;const[ne,q]=f.pageDimensions,J=j.width*ne,ee=j.height*q,oe=f.scaleFactor,he=w.thickness/2;fe(j,y,J/ee),fe(j,l,!0),fe(j,p,Math.round(J)),fe(j,a,Math.round(ee));for(const{bezier:ye}of w.paths){const Ae=[];j.paths.push(Ae);let xe=oe*(ye[0]-he),we=oe*(ee-ye[1]-he);for(let Re=2,Pe=ye.length;Re<Pe;Re+=6){const Te=oe*(ye[Re]-he),Le=oe*(ee-ye[Re+1]-he),Be=oe*(ye[Re+2]-he),We=oe*(ee-ye[Re+3]-he),ce=oe*(ye[Re+4]-he),Q=oe*(ee-ye[Re+5]-he);Ae.push([[xe,we],[Te,Le],[Be,We],[ce,Q]]),xe=ce,we=Q}const Ee=ue(this,g,vt).call(this,Ae);j.bezierPath2D.push(Ee)}const ie=ue(ve=j,n,At).call(ve);return fe(j,B,Math.max(M,ie[2]-ie[0])),fe(j,k,Math.max(M,ie[3]-ie[1])),ue(be=j,n,_t).call(be,J,ee),j}serialize(){if(this.isEmpty())return null;const w=this.getRect(0,0),f=this.rotation%180===0?w[3]-w[1]:w[2]-w[0],j=c.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:e.AnnotationEditorType.INK,color:j,thickness:this.thickness,opacity:this.opacity,paths:ue(this,n,Gt).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,f),pageIndex:this.parent.pageIndex,rect:w,rotation:this.rotation}}};y=new WeakMap,k=new WeakMap,B=new WeakMap,R=new WeakMap,P=new WeakMap,h=new WeakMap,t=new WeakMap,l=new WeakMap,u=new WeakMap,T=new WeakMap,v=new WeakMap,p=new WeakMap,a=new WeakMap,o=new WeakMap,n=new WeakSet,Nt=function(w){const f=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=w,ue(this,n,He).call(this)},undo:()=>{this.thickness=f,ue(this,n,He).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},jt=function(w){const f=this.color;this.parent.addCommands({cmd:()=>{this.color=w,ue(this,n,Ie).call(this)},undo:()=>{this.color=f,ue(this,n,Ie).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Ut=function(w){w/=100;const f=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=w,ue(this,n,Ie).call(this)},undo:()=>{this.opacity=f,ue(this,n,Ie).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Bt=function(){const{width:w,height:f,rotation:j}=this.parent.viewport;switch(j){case 90:return[0,w,w,f];case 180:return[w,f,w,f];case 270:return[f,0,w,f];default:return[0,0,w,f]}},yt=function(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,N.opacityToHex)(this.opacity)}`},Wt=function(w,f){this.isEditing=!0,I(this,u)||(fe(this,u,!0),ue(this,n,Ge).call(this),this.thickness||(this.thickness=A._defaultThickness),this.color||(this.color=A._defaultColor||c.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=A._defaultOpacity)),this.currentPath.push([w,f]),fe(this,T,null),ue(this,n,yt).call(this),this.ctx.beginPath(),this.ctx.moveTo(w,f),fe(this,o,()=>{I(this,o)&&(I(this,T)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):ue(this,n,Ie).call(this),this.ctx.lineTo(...I(this,T)),fe(this,T,null),this.ctx.stroke()),window.requestAnimationFrame(I(this,o)))}),window.requestAnimationFrame(I(this,o))},qt=function(w,f){const[j,ne]=this.currentPath.at(-1);w===j&&f===ne||(this.currentPath.push([w,f]),fe(this,T,[w,f]))},$t=function(w,f){var he;this.ctx.closePath(),fe(this,o,null),w=Math.min(Math.max(w,0),this.canvas.width),f=Math.min(Math.max(f,0),this.canvas.height);const[j,ne]=this.currentPath.at(-1);(w!==j||f!==ne)&&this.currentPath.push([w,f]);let q;if(this.currentPath.length!==1)q=(0,D.fitCurve)(this.currentPath,30,null);else{const ie=[w,f];q=[[ie,ie.slice(),ie.slice(),ie]]}const J=ue(he=A,g,vt).call(he,q);this.currentPath.length=0;const ee=()=>{this.paths.push(q),this.bezierPath2D.push(J),this.rebuild()},oe=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(ue(this,n,et).call(this),ue(this,n,tt).call(this)),ue(this,n,He).call(this))};this.parent.addCommands({cmd:ee,undo:oe,mustExec:!0})},Ie=function(){if(this.isEmpty()){ue(this,n,nt).call(this);return}ue(this,n,yt).call(this);const{canvas:w,ctx:f}=this;f.setTransform(1,0,0,1,0,0),f.clearRect(0,0,w.width,w.height),ue(this,n,nt).call(this);for(const j of this.bezierPath2D)f.stroke(j)},bt=function(w){ue(this,n,$t).call(this,w.offsetX,w.offsetY),this.canvas.removeEventListener("pointerleave",I(this,P)),this.canvas.removeEventListener("pointermove",I(this,R)),this.parent.addToAnnotationStorage(this)},et=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",A._l10nPromise.get("editor_ink_canvas_aria_label").then(w=>{var f;return(f=this.canvas)==null?void 0:f.setAttribute("aria-label",w)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},tt=function(){fe(this,v,new ResizeObserver(w=>{const f=w[0].contentRect;f.width&&f.height&&this.setDimensions(f.width,f.height)})),I(this,v).observe(this.div)},Ge=function(){if(!I(this,u))return;const[w,f]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*w),this.canvas.height=Math.ceil(this.height*f),ue(this,n,nt).call(this)},_t=function(w,f){const j=ue(this,n,rt).call(this),ne=(w-j)/I(this,B),q=(f-j)/I(this,k);this.scaleFactor=Math.min(ne,q)},nt=function(){const w=ue(this,n,rt).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+w,this.translationY*this.scaleFactor+w)},g=new WeakSet,vt=function(w){const f=new Path2D;for(let j=0,ne=w.length;j<ne;j++){const[q,J,ee,oe]=w[j];j===0&&f.moveTo(...q),f.bezierCurveTo(J[0],J[1],ee[0],ee[1],oe[0],oe[1])}return f},Gt=function(w,f,j,ne){const J=[],ee=this.thickness/2;let oe,he;for(const ie of this.paths){oe=[],he=[];for(let ve=0,be=ie.length;ve<be;ve++){const[ye,Ae,xe,we]=ie[ve],Ee=w*(ye[0]+f)+ee,Re=ne-w*(ye[1]+j)-ee,Pe=w*(Ae[0]+f)+ee,Te=ne-w*(Ae[1]+j)-ee,Le=w*(xe[0]+f)+ee,Be=ne-w*(xe[1]+j)-ee,We=w*(we[0]+f)+ee,ce=ne-w*(we[1]+j)-ee;ve===0&&(oe.push(Ee,Re),he.push(Ee,Re)),oe.push(Pe,Te,Le,Be,We,ce),ue(this,n,Ht).call(this,Ee,Re,Pe,Te,Le,Be,We,ce,4,he)}J.push({bezier:oe,points:he})}return J},Ht=function(w,f,j,ne,q,J,ee,oe,he,ie){if(ue(this,n,zt).call(this,w,f,j,ne,q,J,ee,oe)){ie.push(ee,oe);return}for(let ve=1;ve<he-1;ve++){const be=ve/he,ye=1-be;let Ae=be*w+ye*j,xe=be*f+ye*ne,we=be*j+ye*q,Ee=be*ne+ye*J;const Re=be*q+ye*ee,Pe=be*J+ye*oe;Ae=be*Ae+ye*we,xe=be*xe+ye*Ee,we=be*we+ye*Re,Ee=be*Ee+ye*Pe,Ae=be*Ae+ye*we,xe=be*xe+ye*Ee,ie.push(Ae,xe)}ie.push(ee,oe)},zt=function(w,f,j,ne,q,J,ee,oe){const ie=(3*j-2*w-ee)**2,ve=(3*ne-2*f-oe)**2,be=(3*q-w-2*ee)**2,ye=(3*J-f-2*oe)**2;return Math.max(ie,be)+Math.max(ve,ye)<=10},At=function(){let w=1/0,f=-1/0,j=1/0,ne=-1/0;for(const q of this.paths)for(const[J,ee,oe,he]of q){const ie=e.Util.bezierBoundingBox(...J,...ee,...oe,...he);w=Math.min(w,ie[0]),j=Math.min(j,ie[1]),f=Math.max(f,ie[2]),ne=Math.max(ne,ie[3])}return[w,j,f,ne]},rt=function(){return I(this,l)?Math.ceil(this.thickness*this.parent.scaleFactor):0},He=function(w=!1){if(this.isEmpty())return;if(!I(this,l)){ue(this,n,Ie).call(this);return}const f=ue(this,n,At).call(this),j=ue(this,n,rt).call(this);fe(this,B,Math.max(M,f[2]-f[0])),fe(this,k,Math.max(M,f[3]-f[1]));const ne=Math.ceil(j+I(this,B)*this.scaleFactor),q=Math.ceil(j+I(this,k)*this.scaleFactor),[J,ee]=this.parent.viewportBaseDimensions;this.width=ne/J,this.height=q/ee,fe(this,y,ne/q),ue(this,n,xt).call(this);const oe=this.translationX,he=this.translationY;this.translationX=-f[0],this.translationY=-f[1],ue(this,n,Ge).call(this),ue(this,n,Ie).call(this),fe(this,p,ne),fe(this,a,q),this.setDims(ne,q);const ie=w?j/this.scaleFactor/2:0;this.translate(oe-this.translationX-ie,he-this.translationY-ie)},xt=function(){const{style:w}=this.div;I(this,y)>=1?(w.minHeight=`${M}px`,w.minWidth=`${Math.round(I(this,y)*M)}px`):(w.minWidth=`${M}px`,w.minHeight=`${Math.round(M/I(this,y))}px`)},pe(A,g),ke(A,"_defaultColor",null),ke(A,"_defaultOpacity",1),ke(A,"_defaultThickness",1),ke(A,"_l10nPromise"),ke(A,"_type","ink");let S=A;s.InkEditor=S},(_,s,b)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.fitCurve=void 0;const e=b(26);s.fitCurve=e},_=>{function s(h,t,l){if(!Array.isArray(h))throw new TypeError("First argument should be an array");if(h.forEach(p=>{if(!Array.isArray(p)||p.some(a=>typeof a!="number")||p.length!==h[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),h=h.filter((p,a)=>a===0||!p.every((o,n)=>o===h[a-1][n])),h.length<2)return[];const u=h.length,T=B(h[1],h[0]),v=B(h[u-2],h[u-1]);return b(h,T,v,t,l)}function b(h,t,l,u,T){var p,a,o,n,x,C,z,G,ae,le,re,te,X;if(h.length===2)return te=R.vectorLen(R.subtract(h[0],h[1]))/3,p=[h[0],R.addArrays(h[0],R.mulItems(t,te)),R.addArrays(h[1],R.mulItems(l,te)),h[1]],[p];if(a=M(h),[p,n,C]=e(h,a,a,t,l,T),n===0||n<u)return[p];if(n<u*u)for(o=a,x=n,z=C,X=0;X<20;X++){if(o=D(p,h,o),[p,n,C]=e(h,a,o,t,l,T),n<u)return[p];if(C===z){let Y=n/x;if(Y>.9999&&Y<1.0001)break}x=n,z=C}return re=[],G=R.subtract(h[C-1],h[C+1]),G.every(Y=>Y===0)&&(G=R.subtract(h[C-1],h[C]),[G[0],G[1]]=[-G[1],G[0]]),ae=R.normalize(G),le=R.mulItems(ae,-1),re=re.concat(b(h.slice(0,C+1),t,ae,u,T)),re=re.concat(b(h.slice(C),le,l,u,T)),re}function e(h,t,l,u,T,v){var p,a,o;return p=c(h,l,u,T),[a,o]=S(h,p,t),v&&v({bez:p,points:h,params:t,maxErr:a,maxPoint:o}),[p,a,o]}function c(h,t,l,u){var T,v,p,a,o,n,x,C,z,G,ae,le,re,te,X,Y,K,se=h[0],de=h[h.length-1];for(T=[se,null,null,de],v=R.zeros_Xx2x2(t.length),re=0,te=t.length;re<te;re++)Y=t[re],K=1-Y,p=v[re],p[0]=R.mulItems(l,3*Y*(K*K)),p[1]=R.mulItems(u,3*K*(Y*Y));for(a=[[0,0],[0,0]],o=[0,0],re=0,te=h.length;re<te;re++)Y=t[re],p=v[re],a[0][0]+=R.dot(p[0],p[0]),a[0][1]+=R.dot(p[0],p[1]),a[1][0]+=R.dot(p[0],p[1]),a[1][1]+=R.dot(p[1],p[1]),X=R.subtract(h[re],P.q([se,se,de,de],Y)),o[0]+=R.dot(p[0],X),o[1]+=R.dot(p[1],X);return n=a[0][0]*a[1][1]-a[1][0]*a[0][1],x=a[0][0]*o[1]-a[1][0]*o[0],C=o[0]*a[1][1]-o[1]*a[0][1],z=n===0?0:C/n,G=n===0?0:x/n,le=R.vectorLen(R.subtract(se,de)),ae=1e-6*le,z<ae||G<ae?(T[1]=R.addArrays(se,R.mulItems(l,le/3)),T[2]=R.addArrays(de,R.mulItems(u,le/3))):(T[1]=R.addArrays(se,R.mulItems(l,z)),T[2]=R.addArrays(de,R.mulItems(u,G))),T}function D(h,t,l){return l.map((u,T)=>N(h,t[T],u))}function N(h,t,l){var u=R.subtract(P.q(h,l),t),T=P.qprime(h,l),v=R.mulMatrix(u,T),p=R.sum(R.squareItems(T))+2*R.mulMatrix(u,P.qprimeprime(h,l));return p===0?l:l-v/p}function M(h){var t=[],l,u,T;return h.forEach((v,p)=>{l=p?u+R.vectorLen(R.subtract(v,T)):0,t.push(l),u=l,T=v}),t=t.map(v=>v/u),t}function S(h,t,l){var u,T,v,p,a,o,n,x;T=0,v=Math.floor(h.length/2);const C=y(t,10);for(a=0,o=h.length;a<o;a++)n=h[a],x=k(t,l[a],C,10),p=R.subtract(P.q(t,x),n),u=p[0]*p[0]+p[1]*p[1],u>T&&(T=u,v=a);return[T,v]}var y=function(h,t){for(var l,u=[0],T=h[0],v=0,p=1;p<=t;p++)l=P.q(h,p/t),v+=R.vectorLen(R.subtract(l,T)),u.push(v),T=l;return u=u.map(a=>a/v),u};function k(h,t,l,u){if(t<0)return 0;if(t>1)return 1;for(var T,v,p,a,o,n=1;n<=u;n++)if(t<=l[n]){a=(n-1)/u,p=n/u,v=l[n-1],T=l[n],o=(t-v)/(T-v)*(p-a)+a;break}return o}function B(h,t){return R.normalize(R.subtract(h,t))}class R{static zeros_Xx2x2(t){for(var l=[];t--;)l.push([0,0]);return l}static mulItems(t,l){return t.map(u=>u*l)}static mulMatrix(t,l){return t.reduce((u,T,v)=>u+T*l[v],0)}static subtract(t,l){return t.map((u,T)=>u-l[T])}static addArrays(t,l){return t.map((u,T)=>u+l[T])}static addItems(t,l){return t.map(u=>u+l)}static sum(t){return t.reduce((l,u)=>l+u)}static dot(t,l){return R.mulMatrix(t,l)}static vectorLen(t){return Math.hypot(...t)}static divItems(t,l){return t.map(u=>u/l)}static squareItems(t){return t.map(l=>l*l)}static normalize(t){return this.divItems(t,this.vectorLen(t))}}class P{static q(t,l){var u=1-l,T=R.mulItems(t[0],u*u*u),v=R.mulItems(t[1],3*u*u*l),p=R.mulItems(t[2],3*u*l*l),a=R.mulItems(t[3],l*l*l);return R.addArrays(R.addArrays(T,v),R.addArrays(p,a))}static qprime(t,l){var u=1-l,T=R.mulItems(R.subtract(t[1],t[0]),3*u*u),v=R.mulItems(R.subtract(t[2],t[1]),6*u*l),p=R.mulItems(R.subtract(t[3],t[2]),3*l*l);return R.addArrays(R.addArrays(T,v),p)}static qprimeprime(t,l){return R.addArrays(R.mulItems(R.addArrays(R.subtract(t[2],R.mulItems(t[1],2)),t[0]),6*(1-l)),R.mulItems(R.addArrays(R.subtract(t[3],R.mulItems(t[2],2)),t[1]),6*l))}}_.exports=s,_.exports.fitCubic=b,_.exports.createTangent=B},(_,s,b)=>{var g,Et,St,Pt;Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationLayer=void 0;var e=b(1),c=b(8),D=b(5),N=b(28),M=b(29);const S=1e3,y=9,k=new WeakSet;function B(H){return{width:H[2]-H[0],height:H[3]-H[1]}}class R{static create(i){switch(i.data.annotationType){case e.AnnotationType.LINK:return new h(i);case e.AnnotationType.TEXT:return new t(i);case e.AnnotationType.WIDGET:switch(i.data.fieldType){case"Tx":return new u(i);case"Btn":return i.data.radioButton?new v(i):i.data.checkBox?new T(i):new p(i);case"Ch":return new a(i)}return new l(i);case e.AnnotationType.POPUP:return new o(i);case e.AnnotationType.FREETEXT:return new x(i);case e.AnnotationType.LINE:return new C(i);case e.AnnotationType.SQUARE:return new z(i);case e.AnnotationType.CIRCLE:return new G(i);case e.AnnotationType.POLYLINE:return new ae(i);case e.AnnotationType.CARET:return new re(i);case e.AnnotationType.INK:return new te(i);case e.AnnotationType.POLYGON:return new le(i);case e.AnnotationType.HIGHLIGHT:return new X(i);case e.AnnotationType.UNDERLINE:return new Y(i);case e.AnnotationType.SQUIGGLY:return new K(i);case e.AnnotationType.STRIKEOUT:return new se(i);case e.AnnotationType.STAMP:return new de(i);case e.AnnotationType.FILEATTACHMENT:return new ge(i);default:return new P(i)}}}class P{constructor(i,{isRenderable:m=!1,ignoreBorder:E=!1,createQuadrilaterals:A=!1}={}){this.isRenderable=m,this.data=i.data,this.layer=i.layer,this.page=i.page,this.viewport=i.viewport,this.linkService=i.linkService,this.downloadManager=i.downloadManager,this.imageResourcesPath=i.imageResourcesPath,this.renderForms=i.renderForms,this.svgFactory=i.svgFactory,this.annotationStorage=i.annotationStorage,this.enableScripting=i.enableScripting,this.hasJSActions=i.hasJSActions,this._fieldObjects=i.fieldObjects,this._mouseState=i.mouseState,m&&(this.container=this._createContainer(E)),A&&(this.quadrilaterals=this._createQuadrilaterals(E))}_createContainer(i=!1){const m=this.data,E=this.page,A=this.viewport,F=document.createElement("section"),{width:O,height:w}=B(m.rect),[f,j,ne,q]=A.viewBox,J=ne-f,ee=q-j;F.setAttribute("data-annotation-id",m.id);const oe=e.Util.normalizeRect([m.rect[0],E.view[3]-m.rect[1]+E.view[1],m.rect[2],E.view[3]-m.rect[3]+E.view[1]]);if(!i&&m.borderStyle.width>0){F.style.borderWidth=`${m.borderStyle.width}px`;const ie=m.borderStyle.horizontalCornerRadius,ve=m.borderStyle.verticalCornerRadius;if(ie>0||ve>0){const ye=`calc(${ie}px * var(--scale-factor)) / calc(${ve}px * var(--scale-factor))`;F.style.borderRadius=ye}else if(this instanceof v){const ye=`calc(${O}px * var(--scale-factor)) / calc(${w}px * var(--scale-factor))`;F.style.borderRadius=ye}switch(m.borderStyle.style){case e.AnnotationBorderStyleType.SOLID:F.style.borderStyle="solid";break;case e.AnnotationBorderStyleType.DASHED:F.style.borderStyle="dashed";break;case e.AnnotationBorderStyleType.BEVELED:(0,e.warn)("Unimplemented border style: beveled");break;case e.AnnotationBorderStyleType.INSET:(0,e.warn)("Unimplemented border style: inset");break;case e.AnnotationBorderStyleType.UNDERLINE:F.style.borderBottomStyle="solid";break}const be=m.borderColor||null;be?F.style.borderColor=e.Util.makeHexColor(be[0]|0,be[1]|0,be[2]|0):F.style.borderWidth=0}F.style.left=`${100*(oe[0]-f)/J}%`,F.style.top=`${100*(oe[1]-j)/ee}%`;const{rotation:he}=m;return m.hasOwnCanvas||he===0?(F.style.width=`${100*O/J}%`,F.style.height=`${100*w/ee}%`):this.setRotation(he,F),F}setRotation(i,m=this.container){const[E,A,F,O]=this.viewport.viewBox,w=F-E,f=O-A,{width:j,height:ne}=B(this.data.rect);let q,J;i%180===0?(q=100*j/w,J=100*ne/f):(q=100*ne/w,J=100*j/f),m.style.width=`${q}%`,m.style.height=`${J}%`,m.setAttribute("data-main-rotation",(360-i)%360)}get _commonActions(){const i=(m,E,A)=>{const F=A.detail[m];A.target.style[E]=N.ColorConverters[`${F[0]}_HTML`](F.slice(1))};return(0,e.shadow)(this,"_commonActions",{display:m=>{const E=m.detail.display%2===1;this.container.style.visibility=E?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:E,print:m.detail.display===0||m.detail.display===3})},print:m=>{this.annotationStorage.setValue(this.data.id,{print:m.detail.print})},hidden:m=>{this.container.style.visibility=m.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:m.detail.hidden})},focus:m=>{setTimeout(()=>m.target.focus({preventScroll:!1}),0)},userName:m=>{m.target.title=m.detail.userName},readonly:m=>{m.detail.readonly?m.target.setAttribute("readonly",""):m.target.removeAttribute("readonly")},required:m=>{this._setRequired(m.target,m.detail.required)},bgColor:m=>{i("bgColor","backgroundColor",m)},fillColor:m=>{i("fillColor","backgroundColor",m)},fgColor:m=>{i("fgColor","color",m)},textColor:m=>{i("textColor","color",m)},borderColor:m=>{i("borderColor","borderColor",m)},strokeColor:m=>{i("strokeColor","borderColor",m)},rotation:m=>{const E=m.detail.rotation;this.setRotation(E),this.annotationStorage.setValue(this.data.id,{rotation:E})}})}_dispatchEventFromSandbox(i,m){const E=this._commonActions;for(const A of Object.keys(m.detail)){const F=i[A]||E[A];F&&F(m)}}_setDefaultPropertiesFromJS(i){if(!this.enableScripting)return;const m=this.annotationStorage.getRawValue(this.data.id);if(!m)return;const E=this._commonActions;for(const[A,F]of Object.entries(m)){const O=E[A];if(O){const w={detail:{[A]:F},target:i};O(w),delete m[A]}}}_createQuadrilaterals(i=!1){if(!this.data.quadPoints)return null;const m=[],E=this.data.rect;for(const A of this.data.quadPoints)this.data.rect=[A[2].x,A[2].y,A[1].x,A[1].y],m.push(this._createContainer(i));return this.data.rect=E,m}_createPopup(i,m){let E=this.container;this.quadrilaterals&&(i=i||this.quadrilaterals,E=this.quadrilaterals[0]),i||(i=document.createElement("div"),i.className="popupTriggerArea",E.append(i));const F=new n({container:E,trigger:i,color:m.color,titleObj:m.titleObj,modificationDate:m.modificationDate,contentsObj:m.contentsObj,richText:m.richText,hideWrapper:!0}).render();F.style.left="100%",E.append(F)}_renderQuadrilaterals(i){for(const m of this.quadrilaterals)m.className=i;return this.quadrilaterals}render(){(0,e.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(i,m=null){const E=[];if(this._fieldObjects){const A=this._fieldObjects[i];if(A)for(const{page:F,id:O,exportValues:w}of A){if(F===-1||O===m)continue;const f=typeof w=="string"?w:null,j=document.querySelector(`[data-element-id="${O}"]`);if(j&&!k.has(j)){(0,e.warn)(`_getElementsByName - element not allowed: ${O}`);continue}E.push({id:O,exportValue:f,domElement:j})}return E}for(const A of document.getElementsByName(i)){const{id:F,exportValue:O}=A;F!==m&&k.has(A)&&E.push({id:F,exportValue:O,domElement:A})}return E}static get platform(){const i=typeof navigator<"u"?navigator.platform:"";return(0,e.shadow)(this,"platform",{isWin:i.includes("Win"),isMac:i.includes("Mac")})}}class h extends P{constructor(i,m=null){super(i,{isRenderable:!0,ignoreBorder:!!(m!=null&&m.ignoreBorder),createQuadrilaterals:!0}),this.isTooltipOnly=i.data.isTooltipOnly}render(){const{data:i,linkService:m}=this,E=document.createElement("a");E.setAttribute("data-element-id",i.id);let A=!1;return i.url?(m.addLinkAttributes(E,i.url,i.newWindow),A=!0):i.action?(this._bindNamedAction(E,i.action),A=!0):i.dest?(this._bindLink(E,i.dest),A=!0):(i.actions&&(i.actions.Action||i.actions["Mouse Up"]||i.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(E,i),A=!0),i.resetForm?(this._bindResetFormAction(E,i.resetForm),A=!0):this.isTooltipOnly&&!A&&(this._bindLink(E,""),A=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((F,O)=>{const w=O===0?E:E.cloneNode();return F.append(w),F}):(this.container.className="linkAnnotation",A&&this.container.append(E),this.container)}_bindLink(i,m){i.href=this.linkService.getDestinationHash(m),i.onclick=()=>(m&&this.linkService.goToDestination(m),!1),(m||m==="")&&(i.className="internalLink")}_bindNamedAction(i,m){i.href=this.linkService.getAnchorUrl(""),i.onclick=()=>(this.linkService.executeNamedAction(m),!1),i.className="internalLink"}_bindJSAction(i,m){i.href=this.linkService.getAnchorUrl("");const E=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const A of Object.keys(m.actions)){const F=E.get(A);F&&(i[F]=()=>{var O;return(O=this.linkService.eventBus)==null||O.dispatch("dispatcheventinsandbox",{source:this,detail:{id:m.id,name:A}}),!1})}i.onclick||(i.onclick=()=>!1),i.className="internalLink"}_bindResetFormAction(i,m){const E=i.onclick;if(E||(i.href=this.linkService.getAnchorUrl("")),i.className="internalLink",!this._fieldObjects){(0,e.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),E||(i.onclick=()=>!1);return}i.onclick=()=>{var ne;E&&E();const{fields:A,refs:F,include:O}=m,w=[];if(A.length!==0||F.length!==0){const q=new Set(F);for(const J of A){const ee=this._fieldObjects[J]||[];for(const{id:oe}of ee)q.add(oe)}for(const J of Object.values(this._fieldObjects))for(const ee of J)q.has(ee.id)===O&&w.push(ee)}else for(const q of Object.values(this._fieldObjects))w.push(...q);const f=this.annotationStorage,j=[];for(const q of w){const{id:J}=q;switch(j.push(J),q.type){case"text":{const oe=q.defaultValue||"";f.setValue(J,{value:oe});break}case"checkbox":case"radiobutton":{const oe=q.defaultValue===q.exportValues;f.setValue(J,{value:oe});break}case"combobox":case"listbox":{const oe=q.defaultValue||"";f.setValue(J,{value:oe});break}default:continue}const ee=document.querySelector(`[data-element-id="${J}"]`);if(ee){if(!k.has(ee)){(0,e.warn)(`_bindResetFormAction - element not allowed: ${J}`);continue}}else continue;ee.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((ne=this.linkService.eventBus)==null||ne.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:j,name:"ResetForm"}})),!1}}}class t extends P{constructor(i){var E,A,F;const m=!!(i.data.hasPopup||(E=i.data.titleObj)!=null&&E.str||(A=i.data.contentsObj)!=null&&A.str||(F=i.data.richText)!=null&&F.str);super(i,{isRenderable:m})}render(){this.container.className="textAnnotation";const i=document.createElement("img");return i.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",i.alt="[{{type}} Annotation]",i.dataset.l10nId="text_annotation_type",i.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(i,this.data),this.container.append(i),this.container}}class l extends P{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(i){const{isWin:m,isMac:E}=P.platform;return m&&i.ctrlKey||E&&i.metaKey}_setEventListener(i,m,E,A){m.includes("mouse")?i.addEventListener(m,F=>{var O;(O=this.linkService.eventBus)==null||O.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:E,value:A(F),shift:F.shiftKey,modifier:this._getKeyModifier(F)}})}):i.addEventListener(m,F=>{var O;(O=this.linkService.eventBus)==null||O.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:E,value:A(F)}})})}_setEventListeners(i,m,E){var A;for(const[F,O]of m)(O==="Action"||(A=this.data.actions)!=null&&A[O])&&this._setEventListener(i,F,O,E)}_setBackgroundColor(i){const m=this.data.backgroundColor||null;i.style.backgroundColor=m===null?"transparent":e.Util.makeHexColor(m[0],m[1],m[2])}_setTextStyle(i){const m=["left","center","right"],{fontColor:E}=this.data.defaultAppearanceData,A=this.data.defaultAppearanceData.fontSize||y,F=i.style;let O;if(this.data.multiLine){const w=Math.abs(this.data.rect[3]-this.data.rect[1]),f=Math.round(w/(e.LINE_FACTOR*A))||1,j=w/f;O=Math.min(A,Math.round(j/e.LINE_FACTOR))}else{const w=Math.abs(this.data.rect[3]-this.data.rect[1]);O=Math.min(A,Math.round(w/e.LINE_FACTOR))}F.fontSize=`calc(${O}px * var(--scale-factor))`,F.color=e.Util.makeHexColor(E[0],E[1],E[2]),this.data.textAlignment!==null&&(F.textAlign=m[this.data.textAlignment])}_setRequired(i,m){m?i.setAttribute("required",!0):i.removeAttribute("required"),i.setAttribute("aria-required",m)}}class u extends l{constructor(i){const m=i.renderForms||!i.data.hasAppearance&&!!i.data.fieldValue;super(i,{isRenderable:m})}setPropertyOnSiblings(i,m,E,A){const F=this.annotationStorage;for(const O of this._getElementsByName(i.name,i.id))O.domElement&&(O.domElement[m]=E),F.setValue(O.id,{[A]:E})}render(){var A;const i=this.annotationStorage,m=this.data.id;this.container.className="textWidgetAnnotation";let E=null;if(this.renderForms){const F=i.getValue(m,{value:this.data.fieldValue});let O=F.formattedValue||F.value||"";const w=i.getValue(m,{charLimit:this.data.maxLen}).charLimit;w&&O.length>w&&(O=O.slice(0,w));const f={userValue:O,formattedValue:null,valueOnFocus:""};this.data.multiLine?(E=document.createElement("textarea"),E.textContent=O,this.data.doNotScroll&&(E.style.overflowY="hidden")):(E=document.createElement("input"),E.type="text",E.setAttribute("value",O),this.data.doNotScroll&&(E.style.overflowX="hidden")),k.add(E),E.setAttribute("data-element-id",m),E.disabled=this.data.readOnly,E.name=this.data.fieldName,E.tabIndex=S,this._setRequired(E,this.data.required),w&&(E.maxLength=w),E.addEventListener("input",ne=>{i.setValue(m,{value:ne.target.value}),this.setPropertyOnSiblings(E,"value",ne.target.value,"value")}),E.addEventListener("resetform",ne=>{const q=this.data.defaultFieldValue??"";E.value=f.userValue=q,f.formattedValue=null});let j=ne=>{const{formattedValue:q}=f;q!=null&&(ne.target.value=q),ne.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){E.addEventListener("focus",q=>{f.userValue&&(q.target.value=f.userValue),f.valueOnFocus=q.target.value}),E.addEventListener("updatefromsandbox",q=>{const J={value(ee){f.userValue=ee.detail.value??"",i.setValue(m,{value:f.userValue.toString()}),ee.target.value=f.userValue},formattedValue(ee){const{formattedValue:oe}=ee.detail;f.formattedValue=oe,oe!=null&&ee.target!==document.activeElement&&(ee.target.value=oe),i.setValue(m,{formattedValue:oe})},selRange(ee){ee.target.setSelectionRange(...ee.detail.selRange)},charLimit:ee=>{var ve;const{charLimit:oe}=ee.detail,{target:he}=ee;if(oe===0){he.removeAttribute("maxLength");return}he.setAttribute("maxLength",oe);let ie=f.userValue;!ie||ie.length<=oe||(ie=ie.slice(0,oe),he.value=f.userValue=ie,i.setValue(m,{value:ie}),(ve=this.linkService.eventBus)==null||ve.dispatch("dispatcheventinsandbox",{source:this,detail:{id:m,name:"Keystroke",value:ie,willCommit:!0,commitKey:1,selStart:he.selectionStart,selEnd:he.selectionEnd}}))}};this._dispatchEventFromSandbox(J,q)}),E.addEventListener("keydown",q=>{var oe;let J=-1;if(q.key==="Escape"?J=0:q.key==="Enter"?J=2:q.key==="Tab"&&(J=3),J===-1)return;const{value:ee}=q.target;f.valueOnFocus!==ee&&(f.userValue=ee,(oe=this.linkService.eventBus)==null||oe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:m,name:"Keystroke",value:ee,willCommit:!0,commitKey:J,selStart:q.target.selectionStart,selEnd:q.target.selectionEnd}}))});const ne=j;j=null,E.addEventListener("blur",q=>{var ee;const{value:J}=q.target;f.userValue=J,this._mouseState.isDown&&f.valueOnFocus!==J&&((ee=this.linkService.eventBus)==null||ee.dispatch("dispatcheventinsandbox",{source:this,detail:{id:m,name:"Keystroke",value:J,willCommit:!0,commitKey:1,selStart:q.target.selectionStart,selEnd:q.target.selectionEnd}})),ne(q)}),(A=this.data.actions)!=null&&A.Keystroke&&E.addEventListener("beforeinput",q=>{var ye;const{data:J,target:ee}=q,{value:oe,selectionStart:he,selectionEnd:ie}=ee;let ve=he,be=ie;switch(q.inputType){case"deleteWordBackward":{const Ae=oe.substring(0,he).match(/\w*[^\w]*$/);Ae&&(ve-=Ae[0].length);break}case"deleteWordForward":{const Ae=oe.substring(he).match(/^[^\w]*\w*/);Ae&&(be+=Ae[0].length);break}case"deleteContentBackward":he===ie&&(ve-=1);break;case"deleteContentForward":he===ie&&(be+=1);break}q.preventDefault(),(ye=this.linkService.eventBus)==null||ye.dispatch("dispatcheventinsandbox",{source:this,detail:{id:m,name:"Keystroke",value:oe,change:J||"",willCommit:!1,selStart:ve,selEnd:be}})}),this._setEventListeners(E,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],q=>q.target.value)}if(j&&E.addEventListener("blur",j),this.data.comb){const q=(this.data.rect[2]-this.data.rect[0])/w;E.classList.add("comb"),E.style.letterSpacing=`calc(${q}px * var(--scale-factor) - 1ch)`}}else E=document.createElement("div"),E.textContent=this.data.fieldValue,E.style.verticalAlign="middle",E.style.display="table-cell";return this._setTextStyle(E),this._setBackgroundColor(E),this._setDefaultPropertiesFromJS(E),this.container.append(E),this.container}}class T extends l{constructor(i){super(i,{isRenderable:i.renderForms})}render(){const i=this.annotationStorage,m=this.data,E=m.id;let A=i.getValue(E,{value:m.exportValue===m.fieldValue}).value;typeof A=="string"&&(A=A!=="Off",i.setValue(E,{value:A})),this.container.className="buttonWidgetAnnotation checkBox";const F=document.createElement("input");return k.add(F),F.setAttribute("data-element-id",E),F.disabled=m.readOnly,this._setRequired(F,this.data.required),F.type="checkbox",F.name=m.fieldName,A&&F.setAttribute("checked",!0),F.setAttribute("exportValue",m.exportValue),F.tabIndex=S,F.addEventListener("change",O=>{const{name:w,checked:f}=O.target;for(const j of this._getElementsByName(w,E)){const ne=f&&j.exportValue===m.exportValue;j.domElement&&(j.domElement.checked=ne),i.setValue(j.id,{value:ne})}i.setValue(E,{value:f})}),F.addEventListener("resetform",O=>{const w=m.defaultFieldValue||"Off";O.target.checked=w===m.exportValue}),this.enableScripting&&this.hasJSActions&&(F.addEventListener("updatefromsandbox",O=>{const w={value(f){f.target.checked=f.detail.value!=="Off",i.setValue(E,{value:f.target.checked})}};this._dispatchEventFromSandbox(w,O)}),this._setEventListeners(F,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],O=>O.target.checked)),this._setBackgroundColor(F),this._setDefaultPropertiesFromJS(F),this.container.append(F),this.container}}class v extends l{constructor(i){super(i,{isRenderable:i.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const i=this.annotationStorage,m=this.data,E=m.id;let A=i.getValue(E,{value:m.fieldValue===m.buttonValue}).value;typeof A=="string"&&(A=A!==m.buttonValue,i.setValue(E,{value:A}));const F=document.createElement("input");if(k.add(F),F.setAttribute("data-element-id",E),F.disabled=m.readOnly,this._setRequired(F,this.data.required),F.type="radio",F.name=m.fieldName,A&&F.setAttribute("checked",!0),F.tabIndex=S,F.addEventListener("change",O=>{const{name:w,checked:f}=O.target;for(const j of this._getElementsByName(w,E))i.setValue(j.id,{value:!1});i.setValue(E,{value:f})}),F.addEventListener("resetform",O=>{const w=m.defaultFieldValue;O.target.checked=w!=null&&w===m.buttonValue}),this.enableScripting&&this.hasJSActions){const O=m.buttonValue;F.addEventListener("updatefromsandbox",w=>{const f={value:j=>{const ne=O===j.detail.value;for(const q of this._getElementsByName(j.target.name)){const J=ne&&q.id===E;q.domElement&&(q.domElement.checked=J),i.setValue(q.id,{value:J})}}};this._dispatchEventFromSandbox(f,w)}),this._setEventListeners(F,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],w=>w.target.checked)}return this._setBackgroundColor(F),this._setDefaultPropertiesFromJS(F),this.container.append(F),this.container}}class p extends h{constructor(i){super(i,{ignoreBorder:i.data.hasAppearance})}render(){const i=super.render();i.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(i.title=this.data.alternativeText);const m=i.lastChild;return this.enableScripting&&this.hasJSActions&&m&&(this._setDefaultPropertiesFromJS(m),m.addEventListener("updatefromsandbox",E=>{this._dispatchEventFromSandbox({},E)})),i}}class a extends l{constructor(i){super(i,{isRenderable:i.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const i=this.annotationStorage,m=this.data.id,E=i.getValue(m,{value:this.data.fieldValue}),A=document.createElement("select");k.add(A),A.setAttribute("data-element-id",m),A.disabled=this.data.readOnly,this._setRequired(A,this.data.required),A.name=this.data.fieldName,A.tabIndex=S;let F=this.data.combo&&this.data.options.length>0;this.data.combo||(A.size=this.data.options.length,this.data.multiSelect&&(A.multiple=!0)),A.addEventListener("resetform",j=>{const ne=this.data.defaultFieldValue;for(const q of A.options)q.selected=q.value===ne});for(const j of this.data.options){const ne=document.createElement("option");ne.textContent=j.displayValue,ne.value=j.exportValue,E.value.includes(j.exportValue)&&(ne.setAttribute("selected",!0),F=!1),A.append(ne)}let O=null;if(F){const j=document.createElement("option");j.value=" ",j.setAttribute("hidden",!0),j.setAttribute("selected",!0),A.prepend(j),O=()=>{j.remove(),A.removeEventListener("input",O),O=null},A.addEventListener("input",O)}const w=(j,ne)=>{const q=ne?"value":"textContent",J=j.target.options;return j.target.multiple?Array.prototype.filter.call(J,ee=>ee.selected).map(ee=>ee[q]):J.selectedIndex===-1?null:J[J.selectedIndex][q]},f=j=>{const ne=j.target.options;return Array.prototype.map.call(ne,q=>({displayValue:q.textContent,exportValue:q.value}))};return this.enableScripting&&this.hasJSActions?(A.addEventListener("updatefromsandbox",j=>{const ne={value(q){O==null||O();const J=q.detail.value,ee=new Set(Array.isArray(J)?J:[J]);for(const oe of A.options)oe.selected=ee.has(oe.value);i.setValue(m,{value:w(q,!0)})},multipleSelection(q){A.multiple=!0},remove(q){const J=A.options,ee=q.detail.remove;J[ee].selected=!1,A.remove(ee),J.length>0&&Array.prototype.findIndex.call(J,he=>he.selected)===-1&&(J[0].selected=!0),i.setValue(m,{value:w(q,!0),items:f(q)})},clear(q){for(;A.length!==0;)A.remove(0);i.setValue(m,{value:null,items:[]})},insert(q){const{index:J,displayValue:ee,exportValue:oe}=q.detail.insert,he=A.children[J],ie=document.createElement("option");ie.textContent=ee,ie.value=oe,he?he.before(ie):A.append(ie),i.setValue(m,{value:w(q,!0),items:f(q)})},items(q){const{items:J}=q.detail;for(;A.length!==0;)A.remove(0);for(const ee of J){const{displayValue:oe,exportValue:he}=ee,ie=document.createElement("option");ie.textContent=oe,ie.value=he,A.append(ie)}A.options.length>0&&(A.options[0].selected=!0),i.setValue(m,{value:w(q,!0),items:f(q)})},indices(q){const J=new Set(q.detail.indices);for(const ee of q.target.options)ee.selected=J.has(ee.index);i.setValue(m,{value:w(q,!0)})},editable(q){q.target.disabled=!q.detail.editable}};this._dispatchEventFromSandbox(ne,j)}),A.addEventListener("input",j=>{var J;const ne=w(j,!0),q=w(j,!1);i.setValue(m,{value:ne}),(J=this.linkService.eventBus)==null||J.dispatch("dispatcheventinsandbox",{source:this,detail:{id:m,name:"Keystroke",value:q,changeEx:ne,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(A,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],j=>j.target.checked)):A.addEventListener("input",function(j){i.setValue(m,{value:w(j,!0)})}),this.data.combo&&this._setTextStyle(A),this._setBackgroundColor(A),this._setDefaultPropertiesFromJS(A),this.container.append(A),this.container}}class o extends P{constructor(i){var E,A,F;const m=!!((E=i.data.titleObj)!=null&&E.str||(A=i.data.contentsObj)!=null&&A.str||(F=i.data.richText)!=null&&F.str);super(i,{isRenderable:m})}render(){const i=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",i.includes(this.data.parentType))return this.container;const m=`[data-annotation-id="${this.data.parentId}"]`,E=this.layer.querySelectorAll(m);if(E.length===0)return this.container;const A=new n({container:this.container,trigger:Array.from(E),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),F=this.page,O=e.Util.normalizeRect([this.data.parentRect[0],F.view[3]-this.data.parentRect[1]+F.view[1],this.data.parentRect[2],F.view[3]-this.data.parentRect[3]+F.view[1]]),w=O[0]+this.data.parentRect[2]-this.data.parentRect[0],f=O[1],[j,ne,q,J]=this.viewport.viewBox,ee=q-j,oe=J-ne;return this.container.style.left=`${100*(w-j)/ee}%`,this.container.style.top=`${100*(f-ne)/oe}%`,this.container.append(A.render()),this.container}}class n{constructor(i){this.container=i.container,this.trigger=i.trigger,this.color=i.color,this.titleObj=i.titleObj,this.modificationDate=i.modificationDate,this.contentsObj=i.contentsObj,this.richText=i.richText,this.hideWrapper=i.hideWrapper||!1,this.pinned=!1}render(){var w,f;const m=document.createElement("div");m.className="popupWrapper",this.hideElement=this.hideWrapper?m:this.container,this.hideElement.hidden=!0;const E=document.createElement("div");E.className="popup";const A=this.color;if(A){const j=.7*(255-A[0])+A[0],ne=.7*(255-A[1])+A[1],q=.7*(255-A[2])+A[2];E.style.backgroundColor=e.Util.makeHexColor(j|0,ne|0,q|0)}const F=document.createElement("h1");F.dir=this.titleObj.dir,F.textContent=this.titleObj.str,E.append(F);const O=c.PDFDateString.toDateObject(this.modificationDate);if(O){const j=document.createElement("span");j.className="popupDate",j.textContent="{{date}}, {{time}}",j.dataset.l10nId="annotation_date_string",j.dataset.l10nArgs=JSON.stringify({date:O.toLocaleDateString(),time:O.toLocaleTimeString()}),E.append(j)}if((w=this.richText)!=null&&w.str&&(!((f=this.contentsObj)!=null&&f.str)||this.contentsObj.str===this.richText.str))M.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:E}),E.lastChild.className="richText popupContent";else{const j=this._formatContents(this.contentsObj);E.append(j)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const j of this.trigger)j.addEventListener("click",this._toggle.bind(this)),j.addEventListener("mouseover",this._show.bind(this,!1)),j.addEventListener("mouseout",this._hide.bind(this,!1));return E.addEventListener("click",this._hide.bind(this,!0)),m.append(E),m}_formatContents({str:i,dir:m}){const E=document.createElement("p");E.className="popupContent",E.dir=m;const A=i.split(/(?:\r\n?|\n)/);for(let F=0,O=A.length;F<O;++F){const w=A[F];E.append(document.createTextNode(w)),F<O-1&&E.append(document.createElement("br"))}return E}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(i=!1){i&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(i=!0){i&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class x extends P{constructor(i){var E,A,F;const m=!!(i.data.hasPopup||(E=i.data.titleObj)!=null&&E.str||(A=i.data.contentsObj)!=null&&A.str||(F=i.data.richText)!=null&&F.str);super(i,{isRenderable:m,ignoreBorder:!0}),this.textContent=i.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const i=document.createElement("div");i.className="annotationTextContent",i.setAttribute("role","comment");for(const m of this.textContent){const E=document.createElement("span");E.textContent=m,i.append(E)}this.container.append(i)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class C extends P{constructor(i){var E,A,F;const m=!!(i.data.hasPopup||(E=i.data.titleObj)!=null&&E.str||(A=i.data.contentsObj)!=null&&A.str||(F=i.data.richText)!=null&&F.str);super(i,{isRenderable:m,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const i=this.data,{width:m,height:E}=B(i.rect),A=this.svgFactory.create(m,E,!0),F=this.svgFactory.createElement("svg:line");return F.setAttribute("x1",i.rect[2]-i.lineCoordinates[0]),F.setAttribute("y1",i.rect[3]-i.lineCoordinates[1]),F.setAttribute("x2",i.rect[2]-i.lineCoordinates[2]),F.setAttribute("y2",i.rect[3]-i.lineCoordinates[3]),F.setAttribute("stroke-width",i.borderStyle.width||1),F.setAttribute("stroke","transparent"),F.setAttribute("fill","transparent"),A.append(F),this.container.append(A),this._createPopup(F,i),this.container}}class z extends P{constructor(i){var E,A,F;const m=!!(i.data.hasPopup||(E=i.data.titleObj)!=null&&E.str||(A=i.data.contentsObj)!=null&&A.str||(F=i.data.richText)!=null&&F.str);super(i,{isRenderable:m,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const i=this.data,{width:m,height:E}=B(i.rect),A=this.svgFactory.create(m,E,!0),F=i.borderStyle.width,O=this.svgFactory.createElement("svg:rect");return O.setAttribute("x",F/2),O.setAttribute("y",F/2),O.setAttribute("width",m-F),O.setAttribute("height",E-F),O.setAttribute("stroke-width",F||1),O.setAttribute("stroke","transparent"),O.setAttribute("fill","transparent"),A.append(O),this.container.append(A),this._createPopup(O,i),this.container}}class G extends P{constructor(i){var E,A,F;const m=!!(i.data.hasPopup||(E=i.data.titleObj)!=null&&E.str||(A=i.data.contentsObj)!=null&&A.str||(F=i.data.richText)!=null&&F.str);super(i,{isRenderable:m,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const i=this.data,{width:m,height:E}=B(i.rect),A=this.svgFactory.create(m,E,!0),F=i.borderStyle.width,O=this.svgFactory.createElement("svg:ellipse");return O.setAttribute("cx",m/2),O.setAttribute("cy",E/2),O.setAttribute("rx",m/2-F/2),O.setAttribute("ry",E/2-F/2),O.setAttribute("stroke-width",F||1),O.setAttribute("stroke","transparent"),O.setAttribute("fill","transparent"),A.append(O),this.container.append(A),this._createPopup(O,i),this.container}}class ae extends P{constructor(i){var E,A,F;const m=!!(i.data.hasPopup||(E=i.data.titleObj)!=null&&E.str||(A=i.data.contentsObj)!=null&&A.str||(F=i.data.richText)!=null&&F.str);super(i,{isRenderable:m,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const i=this.data,{width:m,height:E}=B(i.rect),A=this.svgFactory.create(m,E,!0);let F=[];for(const w of i.vertices){const f=w.x-i.rect[0],j=i.rect[3]-w.y;F.push(f+","+j)}F=F.join(" ");const O=this.svgFactory.createElement(this.svgElementName);return O.setAttribute("points",F),O.setAttribute("stroke-width",i.borderStyle.width||1),O.setAttribute("stroke","transparent"),O.setAttribute("fill","transparent"),A.append(O),this.container.append(A),this._createPopup(O,i),this.container}}class le extends ae{constructor(i){super(i),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class re extends P{constructor(i){var E,A,F;const m=!!(i.data.hasPopup||(E=i.data.titleObj)!=null&&E.str||(A=i.data.contentsObj)!=null&&A.str||(F=i.data.richText)!=null&&F.str);super(i,{isRenderable:m,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class te extends P{constructor(i){var E,A,F;const m=!!(i.data.hasPopup||(E=i.data.titleObj)!=null&&E.str||(A=i.data.contentsObj)!=null&&A.str||(F=i.data.richText)!=null&&F.str);super(i,{isRenderable:m,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const i=this.data,{width:m,height:E}=B(i.rect),A=this.svgFactory.create(m,E,!0);for(const F of i.inkLists){let O=[];for(const f of F){const j=f.x-i.rect[0],ne=i.rect[3]-f.y;O.push(`${j},${ne}`)}O=O.join(" ");const w=this.svgFactory.createElement(this.svgElementName);w.setAttribute("points",O),w.setAttribute("stroke-width",i.borderStyle.width||1),w.setAttribute("stroke","transparent"),w.setAttribute("fill","transparent"),this._createPopup(w,i),A.append(w)}return this.container.append(A),this.container}}class X extends P{constructor(i){var E,A,F;const m=!!(i.data.hasPopup||(E=i.data.titleObj)!=null&&E.str||(A=i.data.contentsObj)!=null&&A.str||(F=i.data.richText)!=null&&F.str);super(i,{isRenderable:m,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class Y extends P{constructor(i){var E,A,F;const m=!!(i.data.hasPopup||(E=i.data.titleObj)!=null&&E.str||(A=i.data.contentsObj)!=null&&A.str||(F=i.data.richText)!=null&&F.str);super(i,{isRenderable:m,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class K extends P{constructor(i){var E,A,F;const m=!!(i.data.hasPopup||(E=i.data.titleObj)!=null&&E.str||(A=i.data.contentsObj)!=null&&A.str||(F=i.data.richText)!=null&&F.str);super(i,{isRenderable:m,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class se extends P{constructor(i){var E,A,F;const m=!!(i.data.hasPopup||(E=i.data.titleObj)!=null&&E.str||(A=i.data.contentsObj)!=null&&A.str||(F=i.data.richText)!=null&&F.str);super(i,{isRenderable:m,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class de extends P{constructor(i){var E,A,F;const m=!!(i.data.hasPopup||(E=i.data.titleObj)!=null&&E.str||(A=i.data.contentsObj)!=null&&A.str||(F=i.data.richText)!=null&&F.str);super(i,{isRenderable:m,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class ge extends P{constructor(i){var A;super(i,{isRenderable:!0});const{filename:m,content:E}=this.data.file;this.filename=(0,c.getFilenameFromUrl)(m),this.content=E,(A=this.linkService.eventBus)==null||A.dispatch("fileattachmentannotation",{source:this,filename:m,content:E})}render(){var m,E;this.container.className="fileAttachmentAnnotation";const i=document.createElement("div");return i.className="popupTriggerArea",i.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((m=this.data.titleObj)!=null&&m.str||(E=this.data.contentsObj)!=null&&E.str||this.data.richText)&&this._createPopup(i,this.data),this.container.append(i),this.container}_download(){var i;(i=this.downloadManager)==null||i.openOrDownloadData(this.container,this.content,this.filename)}}const $=class ${static render(i){var w,f;const{annotations:m,div:E,viewport:A,accessibilityManager:F}=i;ue(this,g,St).call(this,E,A);let O=0;for(const j of m){if(j.annotationType!==e.AnnotationType.POPUP){const{width:q,height:J}=B(j.rect);if(q<=0||J<=0)continue}const ne=R.create({data:j,layer:E,page:i.page,viewport:A,linkService:i.linkService,downloadManager:i.downloadManager,imageResourcesPath:i.imageResourcesPath||"",renderForms:i.renderForms!==!1,svgFactory:new c.DOMSVGFactory,annotationStorage:i.annotationStorage||new D.AnnotationStorage,enableScripting:i.enableScripting,hasJSActions:i.hasJSActions,fieldObjects:i.fieldObjects,mouseState:i.mouseState||{isDown:!1}});if(ne.isRenderable){const q=ne.render();if(j.hidden&&(q.style.visibility="hidden"),Array.isArray(q))for(const J of q)J.style.zIndex=O++,ue(w=$,g,Et).call(w,J,j.id,E,F);else q.style.zIndex=O++,ne instanceof o?E.prepend(q):ue(f=$,g,Et).call(f,q,j.id,E,F)}}ue(this,g,Pt).call(this,E,i.annotationCanvasMap)}static update(i){const{annotationCanvasMap:m,div:E,viewport:A}=i;ue(this,g,St).call(this,E,A),ue(this,g,Pt).call(this,E,m),E.hidden=!1}};g=new WeakSet,Et=function(i,m,E,A){const F=i.firstChild||i;F.id=`${c.AnnotationPrefix}${m}`,E.append(i),A==null||A.moveElementInDOM(E,i,F,!1)},St=function(i,{width:m,height:E,rotation:A}){const{style:F}=i,O=A%180!==0,w=Math.floor(m)+"px",f=Math.floor(E)+"px";F.width=O?f:w,F.height=O?w:f,i.setAttribute("data-main-rotation",A)},Pt=function(i,m){if(m){for(const[E,A]of m){const F=i.querySelector(`[data-annotation-id="${E}"]`);if(!F)continue;const{firstChild:O}=F;O?O.nodeName==="CANVAS"?O.replaceWith(A):O.before(A):F.append(A)}m.clear()}},pe($,g);let V=$;s.AnnotationLayer=V},(_,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorConverters=void 0;function b(c){return Math.floor(Math.max(0,Math.min(1,c))*255).toString(16).padStart(2,"0")}class e{static CMYK_G([D,N,M,S]){return["G",1-Math.min(1,.3*D+.59*M+.11*N+S)]}static G_CMYK([D]){return["CMYK",0,0,0,1-D]}static G_RGB([D]){return["RGB",D,D,D]}static G_HTML([D]){const N=b(D);return`#${N}${N}${N}`}static RGB_G([D,N,M]){return["G",.3*D+.59*N+.11*M]}static RGB_HTML([D,N,M]){const S=b(D),y=b(N),k=b(M);return`#${S}${y}${k}`}static T_HTML(){return"#00000000"}static CMYK_RGB([D,N,M,S]){return["RGB",1-Math.min(1,D+S),1-Math.min(1,M+S),1-Math.min(1,N+S)]}static CMYK_HTML(D){const N=this.CMYK_RGB(D).slice(1);return this.RGB_HTML(N)}static RGB_CMYK([D,N,M]){const S=1-D,y=1-N,k=1-M,B=Math.min(S,y,k);return["CMYK",S,y,k,B]}}s.ColorConverters=e},(_,s,b)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaLayer=void 0;var e=b(20);class c{static setupStorage(N,M,S,y,k){const B=y.getValue(M,{value:null});switch(S.name){case"textarea":if(B.value!==null&&(N.textContent=B.value),k==="print")break;N.addEventListener("input",R=>{y.setValue(M,{value:R.target.value})});break;case"input":if(S.attributes.type==="radio"||S.attributes.type==="checkbox"){if(B.value===S.attributes.xfaOn?N.setAttribute("checked",!0):B.value===S.attributes.xfaOff&&N.removeAttribute("checked"),k==="print")break;N.addEventListener("change",R=>{y.setValue(M,{value:R.target.checked?R.target.getAttribute("xfaOn"):R.target.getAttribute("xfaOff")})})}else{if(B.value!==null&&N.setAttribute("value",B.value),k==="print")break;N.addEventListener("input",R=>{y.setValue(M,{value:R.target.value})})}break;case"select":if(B.value!==null)for(const R of S.children)R.attributes.value===B.value&&(R.attributes.selected=!0);N.addEventListener("input",R=>{const P=R.target.options,h=P.selectedIndex===-1?"":P[P.selectedIndex].value;y.setValue(M,{value:h})});break}}static setAttributes({html:N,element:M,storage:S=null,intent:y,linkService:k}){const{attributes:B}=M,R=N instanceof HTMLAnchorElement;B.type==="radio"&&(B.name=`${B.name}-${y}`);for(const[P,h]of Object.entries(B))if(h!=null)switch(P){case"class":h.length&&N.setAttribute(P,h.join(" "));break;case"dataId":break;case"id":N.setAttribute("data-element-id",h);break;case"style":Object.assign(N.style,h);break;case"textContent":N.textContent=h;break;default:(!R||P!=="href"&&P!=="newWindow")&&N.setAttribute(P,h)}R&&k.addLinkAttributes(N,B.href,B.newWindow),S&&B.dataId&&this.setupStorage(N,B.dataId,M,S)}static render(N){var t;const M=N.annotationStorage,S=N.linkService,y=N.xfaHtml,k=N.intent||"display",B=document.createElement(y.name);y.attributes&&this.setAttributes({html:B,element:y,intent:k,linkService:S});const R=[[y,-1,B]],P=N.div;if(P.append(B),N.viewport){const l=`matrix(${N.viewport.transform.join(",")})`;P.style.transform=l}k!=="richText"&&P.setAttribute("class","xfaLayer xfaFont");const h=[];for(;R.length>0;){const[l,u,T]=R.at(-1);if(u+1===l.children.length){R.pop();continue}const v=l.children[++R.at(-1)[1]];if(v===null)continue;const{name:p}=v;if(p==="#text"){const o=document.createTextNode(v.value);h.push(o),T.append(o);continue}let a;if((t=v==null?void 0:v.attributes)!=null&&t.xmlns?a=document.createElementNS(v.attributes.xmlns,p):a=document.createElement(p),T.append(a),v.attributes&&this.setAttributes({html:a,element:v,storage:M,intent:k,linkService:S}),v.children&&v.children.length>0)R.push([v,-1,a]);else if(v.value){const o=document.createTextNode(v.value);e.XfaText.shouldBuildText(p)&&h.push(o),a.append(o)}}for(const l of P.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))l.setAttribute("readOnly",!0);return{textDivs:h}}static update(N){const M=`matrix(${N.viewport.transform.join(",")})`;N.div.style.transform=M,N.div.hidden=!1}}s.XfaLayer=c},(_,s,b)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextLayerRenderTask=void 0,s.renderTextLayer=T;var e=b(1),c=b(8);const D=1e5,N=30,M=.8,S=new Map,y=/^\s+$/g;function k(v,p){const a=S.get(v);if(a)return a;p.save(),p.font=`${N}px ${v}`;const o=p.measureText("");let n=o.fontBoundingBoxAscent,x=Math.abs(o.fontBoundingBoxDescent);if(n){p.restore();const z=n/(n+x);return S.set(v,z),z}p.strokeStyle="red",p.clearRect(0,0,N,N),p.strokeText("g",0,0);let C=p.getImageData(0,0,N,N).data;x=0;for(let z=C.length-1-3;z>=0;z-=4)if(C[z]>0){x=Math.ceil(z/4/N);break}p.clearRect(0,0,N,N),p.strokeText("A",0,N),C=p.getImageData(0,0,N,N).data,n=0;for(let z=0,G=C.length;z<G;z+=4)if(C[z]>0){n=N-Math.floor(z/4/N);break}if(p.restore(),n){const z=n/(n+x);return S.set(v,z),z}return S.set(v,M),M}function B(v,p,a,o){const n=document.createElement("span"),x=v._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:p.str!=="",hasEOL:p.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:p.str!=="",hasEOL:p.hasEOL,fontSize:0};v._textDivs.push(n);const C=e.Util.transform(v._viewport.transform,p.transform);let z=Math.atan2(C[1],C[0]);const G=a[p.fontName];G.vertical&&(z+=Math.PI/2);const ae=Math.hypot(C[2],C[3]),le=ae*k(G.fontFamily,o);let re,te;z===0?(re=C[4],te=C[5]-le):(re=C[4]+le*Math.sin(z),te=C[5]-le*Math.cos(z)),n.style.left=`${re}px`,n.style.top=`${te}px`,n.style.fontSize=`${ae}px`,n.style.fontFamily=G.fontFamily,x.fontSize=ae,n.setAttribute("role","presentation"),n.textContent=p.str,n.dir=p.dir,v._fontInspectorEnabled&&(n.dataset.fontName=p.fontName),z!==0&&(x.angle=z*(180/Math.PI));let X=!1;if(p.str.length>1||v._enhanceTextSelection&&y.test(p.str))X=!0;else if(p.str!==" "&&p.transform[0]!==p.transform[3]){const Y=Math.abs(p.transform[0]),K=Math.abs(p.transform[3]);Y!==K&&Math.max(Y,K)/Math.min(Y,K)>1.5&&(X=!0)}if(X&&(G.vertical?x.canvasWidth=p.height*v._viewport.scale:x.canvasWidth=p.width*v._viewport.scale),v._textDivProperties.set(n,x),v._textContentStream&&v._layoutText(n),v._enhanceTextSelection&&x.hasText){let Y=1,K=0;z!==0&&(Y=Math.cos(z),K=Math.sin(z));const se=(G.vertical?p.height:p.width)*v._viewport.scale,de=ae;let ge,V;z!==0?(ge=[Y,K,-K,Y,re,te],V=e.Util.getAxialAlignedBoundingBox([0,0,se,de],ge)):V=[re,te,re+se,te+de],v._bounds.push({left:V[0],top:V[1],right:V[2],bottom:V[3],div:n,size:[se,de],m:ge})}}function R(v){if(v._canceled)return;const p=v._textDivs,a=v._capability,o=p.length;if(o>D){v._renderingDone=!0,a.resolve();return}if(!v._textContentStream)for(let n=0;n<o;n++)v._layoutText(p[n]);v._renderingDone=!0,a.resolve()}function P(v,p,a){let o=0;for(let n=0;n<a;n++){const x=v[p++];x>0&&(o=o?Math.min(x,o):x)}return o}function h(v){const p=v._bounds,a=v._viewport,o=t(a.width,a.height,p);for(let n=0;n<o.length;n++){const x=p[n].div,C=v._textDivProperties.get(x);if(C.angle===0){C.paddingLeft=p[n].left-o[n].left,C.paddingTop=p[n].top-o[n].top,C.paddingRight=o[n].right-p[n].right,C.paddingBottom=o[n].bottom-p[n].bottom,v._textDivProperties.set(x,C);continue}const z=o[n],G=p[n],ae=G.m,le=ae[0],re=ae[1],te=[[0,0],[0,G.size[1]],[G.size[0],0],G.size],X=new Float64Array(64);for(let K=0,se=te.length;K<se;K++){const de=e.Util.applyTransform(te[K],ae);X[K+0]=le&&(z.left-de[0])/le,X[K+4]=re&&(z.top-de[1])/re,X[K+8]=le&&(z.right-de[0])/le,X[K+12]=re&&(z.bottom-de[1])/re,X[K+16]=re&&(z.left-de[0])/-re,X[K+20]=le&&(z.top-de[1])/le,X[K+24]=re&&(z.right-de[0])/-re,X[K+28]=le&&(z.bottom-de[1])/le,X[K+32]=le&&(z.left-de[0])/-le,X[K+36]=re&&(z.top-de[1])/-re,X[K+40]=le&&(z.right-de[0])/-le,X[K+44]=re&&(z.bottom-de[1])/-re,X[K+48]=re&&(z.left-de[0])/re,X[K+52]=le&&(z.top-de[1])/-le,X[K+56]=re&&(z.right-de[0])/re,X[K+60]=le&&(z.bottom-de[1])/-le}const Y=1+Math.min(Math.abs(le),Math.abs(re));C.paddingLeft=P(X,32,16)/Y,C.paddingTop=P(X,48,16)/Y,C.paddingRight=P(X,0,16)/Y,C.paddingBottom=P(X,16,16)/Y,v._textDivProperties.set(x,C)}}function t(v,p,a){const o=a.map(function(x,C){return{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom,index:C,x1New:void 0,x2New:void 0}});l(v,o);const n=new Array(a.length);for(const x of o){const C=x.index;n[C]={left:x.x1New,top:0,right:x.x2New,bottom:0}}a.map(function(x,C){const z=n[C],G=o[C];G.x1=x.top,G.y1=v-z.right,G.x2=x.bottom,G.y2=v-z.left,G.index=C,G.x1New=void 0,G.x2New=void 0}),l(p,o);for(const x of o){const C=x.index;n[C].top=x.x1New,n[C].bottom=x.x2New}return n}function l(v,p){p.sort(function(n,x){return n.x1-x.x1||n.index-x.index});const o=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const n of p){let x=0;for(;x<o.length&&o[x].end<=n.y1;)x++;let C=o.length-1;for(;C>=0&&o[C].start>=n.y2;)C--;let z,G,ae,le,re=-1/0;for(ae=x;ae<=C;ae++){z=o[ae],G=z.boundary;let Y;G.x2>n.x1?Y=G.index>n.index?G.x1New:n.x1:G.x2New===void 0?Y=(G.x2+n.x1)/2:Y=G.x2New,Y>re&&(re=Y)}for(n.x1New=re,ae=x;ae<=C;ae++)z=o[ae],G=z.boundary,G.x2New===void 0?G.x2>n.x1?G.index>n.index&&(G.x2New=G.x2):G.x2New=re:G.x2New>re&&(G.x2New=Math.max(re,G.x2));const te=[];let X=null;for(ae=x;ae<=C;ae++){z=o[ae],G=z.boundary;const Y=G.x2>n.x2?G:n;X===Y?te.at(-1).end=z.end:(te.push({start:z.start,end:z.end,boundary:Y}),X=Y)}for(o[x].start<n.y1&&(te[0].start=n.y1,te.unshift({start:o[x].start,end:n.y1,boundary:o[x].boundary})),n.y2<o[C].end&&(te.at(-1).end=n.y2,te.push({start:n.y2,end:o[C].end,boundary:o[C].boundary})),ae=x;ae<=C;ae++){if(z=o[ae],G=z.boundary,G.x2New!==void 0)continue;let Y=!1;for(le=x-1;!Y&&le>=0&&o[le].start>=G.y1;le--)Y=o[le].boundary===G;for(le=C+1;!Y&&le<o.length&&o[le].end<=G.y2;le++)Y=o[le].boundary===G;for(le=0;!Y&&le<te.length;le++)Y=te[le].boundary===G;Y||(G.x2New=re)}Array.prototype.splice.apply(o,[x,C-x+1,...te])}for(const n of o){const x=n.boundary;x.x2New===void 0&&(x.x2New=Math.max(v,x.x2))}}class u{constructor({textContent:p,textContentStream:a,container:o,viewport:n,textDivs:x,textContentItemsStr:C,enhanceTextSelection:z}){var G;z&&(0,c.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=p,this._textContentStream=a,this._container=o,this._document=o.ownerDocument,this._viewport=n,this._textDivs=x||[],this._textContentItemsStr=C||[],this._enhanceTextSelection=!!z,this._fontInspectorEnabled=!!((G=globalThis.FontInspector)!=null&&G.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,e.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new e.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(p,a){for(let o=0,n=p.length;o<n;o++){if(p[o].str===void 0){if(p[o].type==="beginMarkedContentProps"||p[o].type==="beginMarkedContent"){const x=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),p[o].id!==null&&this._container.setAttribute("id",`${p[o].id}`),x.append(this._container)}else p[o].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(p[o].str),B(this,p[o],a,this._layoutTextCtx)}}_layoutText(p){const a=this._textDivProperties.get(p);let o="";if(a.canvasWidth!==0&&a.hasText){const{fontFamily:n}=p.style,{fontSize:x}=a;(x!==this._layoutTextLastFontSize||n!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${x*this._devicePixelRatio}px ${n}`,this._layoutTextLastFontSize=x,this._layoutTextLastFontFamily=n);const{width:C}=this._layoutTextCtx.measureText(p.textContent);if(C>0){const z=this._devicePixelRatio*a.canvasWidth/C;this._enhanceTextSelection&&(a.scale=z),o=`scaleX(${z})`}}if(a.angle!==0&&(o=`rotate(${a.angle}deg) ${o}`),o.length>0&&(this._enhanceTextSelection&&(a.originalTransform=o),p.style.transform=o),a.hasText&&this._container.append(p),a.hasEOL){const n=document.createElement("br");n.setAttribute("role","presentation"),this._container.append(n)}}_render(p=0){const a=(0,e.createPromiseCapability)();let o=Object.create(null);const n=this._document.createElement("canvas");if(n.height=n.width=N,this._layoutTextCtx=n.getContext("2d",{alpha:!1}),this._textContent){const x=this._textContent.items,C=this._textContent.styles;this._processItems(x,C),a.resolve()}else if(this._textContentStream){const x=()=>{this._reader.read().then(({value:C,done:z})=>{if(z){a.resolve();return}Object.assign(o,C.styles),this._processItems(C.items,o),x()},a.reject)};this._reader=this._textContentStream.getReader(),x()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');a.promise.then(()=>{o=null,p?this._renderTimer=setTimeout(()=>{R(this),this._renderTimer=null},p):R(this)},this._capability.reject)}expandTextDivs(p=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(h(this),this._bounds=null);const a=[],o=[];for(let n=0,x=this._textDivs.length;n<x;n++){const C=this._textDivs[n],z=this._textDivProperties.get(C);z.hasText&&(p?(a.length=0,o.length=0,z.originalTransform&&a.push(z.originalTransform),z.paddingTop>0?(o.push(`${z.paddingTop}px`),a.push(`translateY(${-z.paddingTop}px)`)):o.push(0),z.paddingRight>0?o.push(`${z.paddingRight/z.scale}px`):o.push(0),z.paddingBottom>0?o.push(`${z.paddingBottom}px`):o.push(0),z.paddingLeft>0?(o.push(`${z.paddingLeft/z.scale}px`),a.push(`translateX(${-z.paddingLeft/z.scale}px)`)):o.push(0),C.style.padding=o.join(" "),a.length&&(C.style.transform=a.join(" "))):(C.style.padding=null,C.style.transform=z.originalTransform))}}}s.TextLayerRenderTask=u;function T(v){const p=new u({textContent:v.textContent,textContentStream:v.textContentStream,container:v.container,viewport:v.viewport,textDivs:v.textDivs,textContentItemsStr:v.textContentItemsStr,enhanceTextSelection:v.enhanceTextSelection});return p._render(v.timeout),p}},(_,s,b)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SVGGraphics=void 0;var e=b(8),c=b(1),D=b(3);let N=class{constructor(){(0,c.unreachable)("Not implemented: SVGGraphics")}};s.SVGGraphics=N;{let t=function(a){let o=[];const n=[];for(const x of a){if(x.fn==="save"){o.push({fnId:92,fn:"group",items:[]}),n.push(o),o=o.at(-1).items;continue}x.fn==="restore"?o=n.pop():o.push(x)}return o},l=function(a){if(Number.isInteger(a))return a.toString();const o=a.toFixed(10);let n=o.length-1;if(o[n]!=="0")return o;do n--;while(o[n]==="0");return o.substring(0,o[n]==="."?n:n+1)},u=function(a){if(a[4]===0&&a[5]===0){if(a[1]===0&&a[2]===0)return a[0]===1&&a[3]===1?"":`scale(${l(a[0])} ${l(a[3])})`;if(a[0]===a[3]&&a[1]===-a[2]){const o=Math.acos(a[0])*180/Math.PI;return`rotate(${l(o)})`}}else if(a[0]===1&&a[1]===0&&a[2]===0&&a[3]===1)return`translate(${l(a[4])} ${l(a[5])})`;return`matrix(${l(a[0])} ${l(a[1])} ${l(a[2])} ${l(a[3])} ${l(a[4])} ${l(a[5])})`};const M={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},S="http://www.w3.org/XML/1998/namespace",y="http://www.w3.org/1999/xlink",k=["butt","round","square"],B=["miter","round","bevel"],R=function(a,o="",n=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!n)return URL.createObjectURL(new Blob([a],{type:o}));const x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let C=`data:${o};base64,`;for(let z=0,G=a.length;z<G;z+=3){const ae=a[z]&255,le=a[z+1]&255,re=a[z+2]&255,te=ae>>2,X=(ae&3)<<4|le>>4,Y=z+1<G?(le&15)<<2|re>>6:64,K=z+2<G?re&63:64;C+=x[te]+x[X]+x[Y]+x[K]}return C},P=function(){const a=new Uint8Array([137,80,78,71,13,10,26,10]),o=12,n=new Int32Array(256);for(let re=0;re<256;re++){let te=re;for(let X=0;X<8;X++)te&1?te=3988292384^te>>1&2147483647:te=te>>1&2147483647;n[re]=te}function x(re,te,X){let Y=-1;for(let K=te;K<X;K++){const se=(Y^re[K])&255,de=n[se];Y=Y>>>8^de}return Y^-1}function C(re,te,X,Y){let K=Y;const se=te.length;X[K]=se>>24&255,X[K+1]=se>>16&255,X[K+2]=se>>8&255,X[K+3]=se&255,K+=4,X[K]=re.charCodeAt(0)&255,X[K+1]=re.charCodeAt(1)&255,X[K+2]=re.charCodeAt(2)&255,X[K+3]=re.charCodeAt(3)&255,K+=4,X.set(te,K),K+=te.length;const de=x(X,Y+4,K);X[K]=de>>24&255,X[K+1]=de>>16&255,X[K+2]=de>>8&255,X[K+3]=de&255}function z(re,te,X){let Y=1,K=0;for(let se=te;se<X;++se)Y=(Y+(re[se]&255))%65521,K=(K+Y)%65521;return K<<16|Y}function G(re){if(!D.isNodeJS)return ae(re);try{let te;parseInt(process.versions.node)>=8?te=re:te=Buffer.from(re);const X=require$$5.deflateSync(te,{level:9});return X instanceof Uint8Array?X:new Uint8Array(X)}catch(te){(0,c.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+te)}return ae(re)}function ae(re){let te=re.length;const X=65535,Y=Math.ceil(te/X),K=new Uint8Array(2+te+Y*5+4);let se=0;K[se++]=120,K[se++]=156;let de=0;for(;te>X;)K[se++]=0,K[se++]=255,K[se++]=255,K[se++]=0,K[se++]=0,K.set(re.subarray(de,de+X),se),se+=X,de+=X,te-=X;K[se++]=1,K[se++]=te&255,K[se++]=te>>8&255,K[se++]=~te&65535&255,K[se++]=(~te&65535)>>8&255,K.set(re.subarray(de),se),se+=re.length-de;const ge=z(re,0,re.length);return K[se++]=ge>>24&255,K[se++]=ge>>16&255,K[se++]=ge>>8&255,K[se++]=ge&255,K}function le(re,te,X,Y){const K=re.width,se=re.height;let de,ge,V;const g=re.data;switch(te){case c.ImageKind.GRAYSCALE_1BPP:ge=0,de=1,V=K+7>>3;break;case c.ImageKind.RGB_24BPP:ge=2,de=8,V=K*3;break;case c.ImageKind.RGBA_32BPP:ge=6,de=8,V=K*4;break;default:throw new Error("invalid format")}const d=new Uint8Array((1+V)*se);let L=0,W=0;for(let A=0;A<se;++A)d[L++]=0,d.set(g.subarray(W,W+V),L),W+=V,L+=V;if(te===c.ImageKind.GRAYSCALE_1BPP&&Y){L=0;for(let A=0;A<se;A++){L++;for(let F=0;F<V;F++)d[L++]^=255}}const $=new Uint8Array([K>>24&255,K>>16&255,K>>8&255,K&255,se>>24&255,se>>16&255,se>>8&255,se&255,de,ge,0,0,0]),H=G(d),i=a.length+o*3+$.length+H.length,m=new Uint8Array(i);let E=0;return m.set(a,E),E+=a.length,C("IHDR",$,m,E),E+=o+$.length,C("IDATA",H,m,E),E+=o+H.length,C("IEND",new Uint8Array(0),m,E),R(m,"image/png",X)}return function(te,X,Y){const K=te.kind===void 0?c.ImageKind.GRAYSCALE_1BPP:te.kind;return le(te,K,X,Y)}}();class h{constructor(){this.fontSizeScale=1,this.fontWeight=M.fontWeight,this.fontSize=0,this.textMatrix=c.IDENTITY_MATRIX,this.fontMatrix=c.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=c.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=M.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(o,n){this.x=o,this.y=n}}let T=0,v=0,p=0;s.SVGGraphics=N=class{constructor(a,o,n=!1){(0,e.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new e.DOMSVGFactory,this.current=new h,this.transformMatrix=c.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=a,this.objs=o,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!n,this._operatorIdMapping=[];for(const x in c.OPS)this._operatorIdMapping[c.OPS[x]]=x}save(){this.transformStack.push(this.transformMatrix);const a=this.current;this.extraStack.push(a),this.current=a.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(a){this.save(),this.executeOpTree(a),this.restore()}loadDependencies(a){const o=a.fnArray,n=a.argsArray;for(let x=0,C=o.length;x<C;x++)if(o[x]===c.OPS.dependency)for(const z of n[x]){const G=z.startsWith("g_")?this.commonObjs:this.objs,ae=new Promise(le=>{G.get(z,le)});this.current.dependencies.push(ae)}return Promise.all(this.current.dependencies)}transform(a,o,n,x,C,z){const G=[a,o,n,x,C,z];this.transformMatrix=c.Util.transform(this.transformMatrix,G),this.tgrp=null}getSVG(a,o){this.viewport=o;const n=this._initialize(o);return this.loadDependencies(a).then(()=>(this.transformMatrix=c.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(a)),n))}convertOpList(a){const o=this._operatorIdMapping,n=a.argsArray,x=a.fnArray,C=[];for(let z=0,G=x.length;z<G;z++){const ae=x[z];C.push({fnId:ae,fn:o[ae],args:n[z]})}return t(C)}executeOpTree(a){for(const o of a){const n=o.fn,x=o.fnId,C=o.args;switch(x|0){case c.OPS.beginText:this.beginText();break;case c.OPS.dependency:break;case c.OPS.setLeading:this.setLeading(C);break;case c.OPS.setLeadingMoveText:this.setLeadingMoveText(C[0],C[1]);break;case c.OPS.setFont:this.setFont(C);break;case c.OPS.showText:this.showText(C[0]);break;case c.OPS.showSpacedText:this.showText(C[0]);break;case c.OPS.endText:this.endText();break;case c.OPS.moveText:this.moveText(C[0],C[1]);break;case c.OPS.setCharSpacing:this.setCharSpacing(C[0]);break;case c.OPS.setWordSpacing:this.setWordSpacing(C[0]);break;case c.OPS.setHScale:this.setHScale(C[0]);break;case c.OPS.setTextMatrix:this.setTextMatrix(C[0],C[1],C[2],C[3],C[4],C[5]);break;case c.OPS.setTextRise:this.setTextRise(C[0]);break;case c.OPS.setTextRenderingMode:this.setTextRenderingMode(C[0]);break;case c.OPS.setLineWidth:this.setLineWidth(C[0]);break;case c.OPS.setLineJoin:this.setLineJoin(C[0]);break;case c.OPS.setLineCap:this.setLineCap(C[0]);break;case c.OPS.setMiterLimit:this.setMiterLimit(C[0]);break;case c.OPS.setFillRGBColor:this.setFillRGBColor(C[0],C[1],C[2]);break;case c.OPS.setStrokeRGBColor:this.setStrokeRGBColor(C[0],C[1],C[2]);break;case c.OPS.setStrokeColorN:this.setStrokeColorN(C);break;case c.OPS.setFillColorN:this.setFillColorN(C);break;case c.OPS.shadingFill:this.shadingFill(C[0]);break;case c.OPS.setDash:this.setDash(C[0],C[1]);break;case c.OPS.setRenderingIntent:this.setRenderingIntent(C[0]);break;case c.OPS.setFlatness:this.setFlatness(C[0]);break;case c.OPS.setGState:this.setGState(C[0]);break;case c.OPS.fill:this.fill();break;case c.OPS.eoFill:this.eoFill();break;case c.OPS.stroke:this.stroke();break;case c.OPS.fillStroke:this.fillStroke();break;case c.OPS.eoFillStroke:this.eoFillStroke();break;case c.OPS.clip:this.clip("nonzero");break;case c.OPS.eoClip:this.clip("evenodd");break;case c.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case c.OPS.paintImageXObject:this.paintImageXObject(C[0]);break;case c.OPS.paintInlineImageXObject:this.paintInlineImageXObject(C[0]);break;case c.OPS.paintImageMaskXObject:this.paintImageMaskXObject(C[0]);break;case c.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(C[0],C[1]);break;case c.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case c.OPS.closePath:this.closePath();break;case c.OPS.closeStroke:this.closeStroke();break;case c.OPS.closeFillStroke:this.closeFillStroke();break;case c.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case c.OPS.nextLine:this.nextLine();break;case c.OPS.transform:this.transform(C[0],C[1],C[2],C[3],C[4],C[5]);break;case c.OPS.constructPath:this.constructPath(C[0],C[1]);break;case c.OPS.endPath:this.endPath();break;case 92:this.group(o.items);break;default:(0,c.warn)(`Unimplemented operator ${n}`);break}}}setWordSpacing(a){this.current.wordSpacing=a}setCharSpacing(a){this.current.charSpacing=a}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(a,o,n,x,C,z){const G=this.current;G.textMatrix=G.lineMatrix=[a,o,n,x,C,z],G.textMatrixScale=Math.hypot(a,o),G.x=G.lineX=0,G.y=G.lineY=0,G.xcoords=[],G.ycoords=[],G.tspan=this.svgFactory.createElement("svg:tspan"),G.tspan.setAttributeNS(null,"font-family",G.fontFamily),G.tspan.setAttributeNS(null,"font-size",`${l(G.fontSize)}px`),G.tspan.setAttributeNS(null,"y",l(-G.y)),G.txtElement=this.svgFactory.createElement("svg:text"),G.txtElement.append(G.tspan)}beginText(){const a=this.current;a.x=a.lineX=0,a.y=a.lineY=0,a.textMatrix=c.IDENTITY_MATRIX,a.lineMatrix=c.IDENTITY_MATRIX,a.textMatrixScale=1,a.tspan=this.svgFactory.createElement("svg:tspan"),a.txtElement=this.svgFactory.createElement("svg:text"),a.txtgrp=this.svgFactory.createElement("svg:g"),a.xcoords=[],a.ycoords=[]}moveText(a,o){const n=this.current;n.x=n.lineX+=a,n.y=n.lineY+=o,n.xcoords=[],n.ycoords=[],n.tspan=this.svgFactory.createElement("svg:tspan"),n.tspan.setAttributeNS(null,"font-family",n.fontFamily),n.tspan.setAttributeNS(null,"font-size",`${l(n.fontSize)}px`),n.tspan.setAttributeNS(null,"y",l(-n.y))}showText(a){const o=this.current,n=o.font,x=o.fontSize;if(x===0)return;const C=o.fontSizeScale,z=o.charSpacing,G=o.wordSpacing,ae=o.fontDirection,le=o.textHScale*ae,re=n.vertical,te=re?1:-1,X=n.defaultVMetrics,Y=x*o.fontMatrix[0];let K=0;for(const ge of a){if(ge===null){K+=ae*G;continue}else if(typeof ge=="number"){K+=te*ge*x/1e3;continue}const V=(ge.isSpace?G:0)+z,g=ge.fontChar;let d,L,W=ge.width;if(re){let H;const i=ge.vmetric||X;H=ge.vmetric?i[1]:W*.5,H=-H*Y;const m=i[2]*Y;W=i?-i[0]:W,d=H/C,L=(K+m)/C}else d=K/C,L=0;(ge.isInFont||n.missingFile)&&(o.xcoords.push(o.x+d),re&&o.ycoords.push(-o.y+L),o.tspan.textContent+=g);let $;re?$=W*Y-V*ae:$=W*Y+V*ae,K+=$}o.tspan.setAttributeNS(null,"x",o.xcoords.map(l).join(" ")),re?o.tspan.setAttributeNS(null,"y",o.ycoords.map(l).join(" ")):o.tspan.setAttributeNS(null,"y",l(-o.y)),re?o.y-=K:o.x+=K*le,o.tspan.setAttributeNS(null,"font-family",o.fontFamily),o.tspan.setAttributeNS(null,"font-size",`${l(o.fontSize)}px`),o.fontStyle!==M.fontStyle&&o.tspan.setAttributeNS(null,"font-style",o.fontStyle),o.fontWeight!==M.fontWeight&&o.tspan.setAttributeNS(null,"font-weight",o.fontWeight);const se=o.textRenderingMode&c.TextRenderingMode.FILL_STROKE_MASK;if(se===c.TextRenderingMode.FILL||se===c.TextRenderingMode.FILL_STROKE?(o.fillColor!==M.fillColor&&o.tspan.setAttributeNS(null,"fill",o.fillColor),o.fillAlpha<1&&o.tspan.setAttributeNS(null,"fill-opacity",o.fillAlpha)):o.textRenderingMode===c.TextRenderingMode.ADD_TO_PATH?o.tspan.setAttributeNS(null,"fill","transparent"):o.tspan.setAttributeNS(null,"fill","none"),se===c.TextRenderingMode.STROKE||se===c.TextRenderingMode.FILL_STROKE){const ge=1/(o.textMatrixScale||1);this._setStrokeAttributes(o.tspan,ge)}let de=o.textMatrix;o.textRise!==0&&(de=de.slice(),de[5]+=o.textRise),o.txtElement.setAttributeNS(null,"transform",`${u(de)} scale(${l(le)}, -1)`),o.txtElement.setAttributeNS(S,"xml:space","preserve"),o.txtElement.append(o.tspan),o.txtgrp.append(o.txtElement),this._ensureTransformGroup().append(o.txtElement)}setLeadingMoveText(a,o){this.setLeading(-o),this.moveText(a,o)}addFontStyle(a){if(!a.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const o=R(a.data,a.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${a.loadedName}"; src: url(${o}); }
`}setFont(a){const o=this.current,n=this.commonObjs.get(a[0]);let x=a[1];o.font=n,this.embedFonts&&!n.missingFile&&!this.embeddedFonts[n.loadedName]&&(this.addFontStyle(n),this.embeddedFonts[n.loadedName]=n),o.fontMatrix=n.fontMatrix||c.FONT_IDENTITY_MATRIX;let C="normal";n.black?C="900":n.bold&&(C="bold");const z=n.italic?"italic":"normal";x<0?(x=-x,o.fontDirection=-1):o.fontDirection=1,o.fontSize=x,o.fontFamily=n.loadedName,o.fontWeight=C,o.fontStyle=z,o.tspan=this.svgFactory.createElement("svg:tspan"),o.tspan.setAttributeNS(null,"y",l(-o.y)),o.xcoords=[],o.ycoords=[]}endText(){var o;const a=this.current;a.textRenderingMode&c.TextRenderingMode.ADD_TO_PATH_FLAG&&((o=a.txtElement)!=null&&o.hasChildNodes())&&(a.element=a.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(a){a>0&&(this.current.lineWidth=a)}setLineCap(a){this.current.lineCap=k[a]}setLineJoin(a){this.current.lineJoin=B[a]}setMiterLimit(a){this.current.miterLimit=a}setStrokeAlpha(a){this.current.strokeAlpha=a}setStrokeRGBColor(a,o,n){this.current.strokeColor=c.Util.makeHexColor(a,o,n)}setFillAlpha(a){this.current.fillAlpha=a}setFillRGBColor(a,o,n){this.current.fillColor=c.Util.makeHexColor(a,o,n),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(a){this.current.strokeColor=this._makeColorN_Pattern(a)}setFillColorN(a){this.current.fillColor=this._makeColorN_Pattern(a)}shadingFill(a){const o=this.viewport.width,n=this.viewport.height,x=c.Util.inverseTransform(this.transformMatrix),C=c.Util.applyTransform([0,0],x),z=c.Util.applyTransform([0,n],x),G=c.Util.applyTransform([o,0],x),ae=c.Util.applyTransform([o,n],x),le=Math.min(C[0],z[0],G[0],ae[0]),re=Math.min(C[1],z[1],G[1],ae[1]),te=Math.max(C[0],z[0],G[0],ae[0]),X=Math.max(C[1],z[1],G[1],ae[1]),Y=this.svgFactory.createElement("svg:rect");Y.setAttributeNS(null,"x",le),Y.setAttributeNS(null,"y",re),Y.setAttributeNS(null,"width",te-le),Y.setAttributeNS(null,"height",X-re),Y.setAttributeNS(null,"fill",this._makeShadingPattern(a)),this.current.fillAlpha<1&&Y.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Y)}_makeColorN_Pattern(a){return a[0]==="TilingPattern"?this._makeTilingPattern(a):this._makeShadingPattern(a)}_makeTilingPattern(a){const o=a[1],n=a[2],x=a[3]||c.IDENTITY_MATRIX,[C,z,G,ae]=a[4],le=a[5],re=a[6],te=a[7],X=`shading${p++}`,[Y,K,se,de]=c.Util.normalizeRect([...c.Util.applyTransform([C,z],x),...c.Util.applyTransform([G,ae],x)]),[ge,V]=c.Util.singularValueDecompose2dScale(x),g=le*ge,d=re*V,L=this.svgFactory.createElement("svg:pattern");L.setAttributeNS(null,"id",X),L.setAttributeNS(null,"patternUnits","userSpaceOnUse"),L.setAttributeNS(null,"width",g),L.setAttributeNS(null,"height",d),L.setAttributeNS(null,"x",`${Y}`),L.setAttributeNS(null,"y",`${K}`);const W=this.svg,$=this.transformMatrix,H=this.current.fillColor,i=this.current.strokeColor,m=this.svgFactory.create(se-Y,de-K);if(this.svg=m,this.transformMatrix=x,te===2){const E=c.Util.makeHexColor(...o);this.current.fillColor=E,this.current.strokeColor=E}return this.executeOpTree(this.convertOpList(n)),this.svg=W,this.transformMatrix=$,this.current.fillColor=H,this.current.strokeColor=i,L.append(m.childNodes[0]),this.defs.append(L),`url(#${X})`}_makeShadingPattern(a){switch(typeof a=="string"&&(a=this.objs.get(a)),a[0]){case"RadialAxial":const o=`shading${p++}`,n=a[3];let x;switch(a[1]){case"axial":const C=a[4],z=a[5];x=this.svgFactory.createElement("svg:linearGradient"),x.setAttributeNS(null,"id",o),x.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),x.setAttributeNS(null,"x1",C[0]),x.setAttributeNS(null,"y1",C[1]),x.setAttributeNS(null,"x2",z[0]),x.setAttributeNS(null,"y2",z[1]);break;case"radial":const G=a[4],ae=a[5],le=a[6],re=a[7];x=this.svgFactory.createElement("svg:radialGradient"),x.setAttributeNS(null,"id",o),x.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),x.setAttributeNS(null,"cx",ae[0]),x.setAttributeNS(null,"cy",ae[1]),x.setAttributeNS(null,"r",re),x.setAttributeNS(null,"fx",G[0]),x.setAttributeNS(null,"fy",G[1]),x.setAttributeNS(null,"fr",le);break;default:throw new Error(`Unknown RadialAxial type: ${a[1]}`)}for(const C of n){const z=this.svgFactory.createElement("svg:stop");z.setAttributeNS(null,"offset",C[0]),z.setAttributeNS(null,"stop-color",C[1]),x.append(z)}return this.defs.append(x),`url(#${o})`;case"Mesh":return(0,c.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${a[0]}`)}}setDash(a,o){this.current.dashArray=a,this.current.dashPhase=o}constructPath(a,o){const n=this.current;let x=n.x,C=n.y,z=[],G=0;for(const ae of a)switch(ae|0){case c.OPS.rectangle:x=o[G++],C=o[G++];const le=o[G++],re=o[G++],te=x+le,X=C+re;z.push("M",l(x),l(C),"L",l(te),l(C),"L",l(te),l(X),"L",l(x),l(X),"Z");break;case c.OPS.moveTo:x=o[G++],C=o[G++],z.push("M",l(x),l(C));break;case c.OPS.lineTo:x=o[G++],C=o[G++],z.push("L",l(x),l(C));break;case c.OPS.curveTo:x=o[G+4],C=o[G+5],z.push("C",l(o[G]),l(o[G+1]),l(o[G+2]),l(o[G+3]),l(x),l(C)),G+=6;break;case c.OPS.curveTo2:z.push("C",l(x),l(C),l(o[G]),l(o[G+1]),l(o[G+2]),l(o[G+3])),x=o[G+2],C=o[G+3],G+=4;break;case c.OPS.curveTo3:x=o[G+2],C=o[G+3],z.push("C",l(o[G]),l(o[G+1]),l(x),l(C),l(x),l(C)),G+=4;break;case c.OPS.closePath:z.push("Z");break}z=z.join(" "),n.path&&a.length>0&&a[0]!==c.OPS.rectangle&&a[0]!==c.OPS.moveTo?z=n.path.getAttributeNS(null,"d")+z:(n.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(n.path)),n.path.setAttributeNS(null,"d",z),n.path.setAttributeNS(null,"fill","none"),n.element=n.path,n.setCurrentPoint(x,C)}endPath(){const a=this.current;if(a.path=null,!this.pendingClip)return;if(!a.element){this.pendingClip=null;return}const o=`clippath${T++}`,n=this.svgFactory.createElement("svg:clipPath");n.setAttributeNS(null,"id",o),n.setAttributeNS(null,"transform",u(this.transformMatrix));const x=a.element.cloneNode(!0);if(this.pendingClip==="evenodd"?x.setAttributeNS(null,"clip-rule","evenodd"):x.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,n.append(x),this.defs.append(n),a.activeClipUrl){a.clipGroup=null;for(const C of this.extraStack)C.clipGroup=null;n.setAttributeNS(null,"clip-path",a.activeClipUrl)}a.activeClipUrl=`url(#${o})`,this.tgrp=null}clip(a){this.pendingClip=a}closePath(){const a=this.current;if(a.path){const o=`${a.path.getAttributeNS(null,"d")}Z`;a.path.setAttributeNS(null,"d",o)}}setLeading(a){this.current.leading=-a}setTextRise(a){this.current.textRise=a}setTextRenderingMode(a){this.current.textRenderingMode=a}setHScale(a){this.current.textHScale=a/100}setRenderingIntent(a){}setFlatness(a){}setGState(a){for(const[o,n]of a)switch(o){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n);break;case"CA":this.setStrokeAlpha(n);break;case"ca":this.setFillAlpha(n);break;default:(0,c.warn)(`Unimplemented graphic state operator ${o}`);break}}fill(){const a=this.current;a.element&&(a.element.setAttributeNS(null,"fill",a.fillColor),a.element.setAttributeNS(null,"fill-opacity",a.fillAlpha),this.endPath())}stroke(){const a=this.current;a.element&&(this._setStrokeAttributes(a.element),a.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(a,o=1){const n=this.current;let x=n.dashArray;o!==1&&x.length>0&&(x=x.map(function(C){return o*C})),a.setAttributeNS(null,"stroke",n.strokeColor),a.setAttributeNS(null,"stroke-opacity",n.strokeAlpha),a.setAttributeNS(null,"stroke-miterlimit",l(n.miterLimit)),a.setAttributeNS(null,"stroke-linecap",n.lineCap),a.setAttributeNS(null,"stroke-linejoin",n.lineJoin),a.setAttributeNS(null,"stroke-width",l(o*n.lineWidth)+"px"),a.setAttributeNS(null,"stroke-dasharray",x.map(l).join(" ")),a.setAttributeNS(null,"stroke-dashoffset",l(o*n.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const a=this.svgFactory.createElement("svg:rect");a.setAttributeNS(null,"x","0"),a.setAttributeNS(null,"y","0"),a.setAttributeNS(null,"width","1px"),a.setAttributeNS(null,"height","1px"),a.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(a)}paintImageXObject(a){const o=a.startsWith("g_")?this.commonObjs.get(a):this.objs.get(a);if(!o){(0,c.warn)(`Dependent image with object ID ${a} is not ready yet`);return}this.paintInlineImageXObject(o)}paintInlineImageXObject(a,o){const n=a.width,x=a.height,C=P(a,this.forceDataSchema,!!o),z=this.svgFactory.createElement("svg:rect");z.setAttributeNS(null,"x","0"),z.setAttributeNS(null,"y","0"),z.setAttributeNS(null,"width",l(n)),z.setAttributeNS(null,"height",l(x)),this.current.element=z,this.clip("nonzero");const G=this.svgFactory.createElement("svg:image");G.setAttributeNS(y,"xlink:href",C),G.setAttributeNS(null,"x","0"),G.setAttributeNS(null,"y",l(-x)),G.setAttributeNS(null,"width",l(n)+"px"),G.setAttributeNS(null,"height",l(x)+"px"),G.setAttributeNS(null,"transform",`scale(${l(1/n)} ${l(-1/x)})`),o?o.append(G):this._ensureTransformGroup().append(G)}paintImageMaskXObject(a){const o=this.current,n=a.width,x=a.height,C=o.fillColor;o.maskId=`mask${v++}`;const z=this.svgFactory.createElement("svg:mask");z.setAttributeNS(null,"id",o.maskId);const G=this.svgFactory.createElement("svg:rect");G.setAttributeNS(null,"x","0"),G.setAttributeNS(null,"y","0"),G.setAttributeNS(null,"width",l(n)),G.setAttributeNS(null,"height",l(x)),G.setAttributeNS(null,"fill",C),G.setAttributeNS(null,"mask",`url(#${o.maskId})`),this.defs.append(z),this._ensureTransformGroup().append(G),this.paintInlineImageXObject(a,z)}paintFormXObjectBegin(a,o){if(Array.isArray(a)&&a.length===6&&this.transform(a[0],a[1],a[2],a[3],a[4],a[5]),o){const n=o[2]-o[0],x=o[3]-o[1],C=this.svgFactory.createElement("svg:rect");C.setAttributeNS(null,"x",o[0]),C.setAttributeNS(null,"y",o[1]),C.setAttributeNS(null,"width",l(n)),C.setAttributeNS(null,"height",l(x)),this.current.element=C,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(a){const o=this.svgFactory.create(a.width,a.height),n=this.svgFactory.createElement("svg:defs");o.append(n),this.defs=n;const x=this.svgFactory.createElement("svg:g");return x.setAttributeNS(null,"transform",u(a.transform)),o.append(x),this.svg=x,o}_ensureClipGroup(){if(!this.current.clipGroup){const a=this.svgFactory.createElement("svg:g");a.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(a),this.current.clipGroup=a}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",u(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(_,s,b)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFNodeStream=void 0;var e=b(1),c=b(33);const D=require$$5,N=require$$5,M=require$$5,S=require$$5,y=/^file:\/\/\/[a-zA-Z]:\//;function k(v){const p=S.parse(v);return p.protocol==="file:"||p.host?p:/^[a-z]:[/\\]/i.test(v)?S.parse(`file:///${v}`):(p.host||(p.protocol="file:"),p)}class B{constructor(p){this.source=p,this.url=k(p.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&p.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var p;return((p=this._fullRequestReader)==null?void 0:p._loaded)??0}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new u(this):new t(this),this._fullRequestReader}getRangeReader(p,a){if(a<=this._progressiveDataLength)return null;const o=this.isFsUrl?new T(this,p,a):new l(this,p,a);return this._rangeRequestReaders.push(o),o}cancelAllRequests(p){this._fullRequestReader&&this._fullRequestReader.cancel(p);for(const a of this._rangeRequestReaders.slice(0))a.cancel(p)}}s.PDFNodeStream=B;class R{constructor(p){this._url=p.url,this._done=!1,this._storedError=null,this.onProgress=null;const a=p.source;this._contentLength=a.length,this._loaded=0,this._filename=null,this._disableRange=a.disableRange||!1,this._rangeChunkSize=a.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!a.disableStream,this._isRangeSupported=!a.disableRange,this._readableStream=null,this._readCapability=(0,e.createPromiseCapability)(),this._headersCapability=(0,e.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const p=this._readableStream.read();return p===null?(this._readCapability=(0,e.createPromiseCapability)(),this.read()):(this._loaded+=p.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(p).buffer,done:!1})}cancel(p){if(!this._readableStream){this._error(p);return}this._readableStream.destroy(p)}_error(p){this._storedError=p,this._readCapability.resolve()}_setReadableStream(p){this._readableStream=p,p.on("readable",()=>{this._readCapability.resolve()}),p.on("end",()=>{p.destroy(),this._done=!0,this._readCapability.resolve()}),p.on("error",a=>{this._error(a)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new e.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class P{constructor(p){this._url=p.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,e.createPromiseCapability)();const a=p.source;this._isStreamingSupported=!a.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const p=this._readableStream.read();return p===null?(this._readCapability=(0,e.createPromiseCapability)(),this.read()):(this._loaded+=p.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(p).buffer,done:!1})}cancel(p){if(!this._readableStream){this._error(p);return}this._readableStream.destroy(p)}_error(p){this._storedError=p,this._readCapability.resolve()}_setReadableStream(p){this._readableStream=p,p.on("readable",()=>{this._readCapability.resolve()}),p.on("end",()=>{p.destroy(),this._done=!0,this._readCapability.resolve()}),p.on("error",a=>{this._error(a)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function h(v,p){return{protocol:v.protocol,auth:v.auth,host:v.hostname,port:v.port,path:v.path,method:"GET",headers:p}}class t extends R{constructor(p){super(p);const a=o=>{if(o.statusCode===404){const z=new e.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=z,this._headersCapability.reject(z);return}this._headersCapability.resolve(),this._setReadableStream(o);const n=z=>this._readableStream.headers[z.toLowerCase()],{allowRangeRequests:x,suggestedLength:C}=(0,c.validateRangeRequestCapabilities)({getResponseHeader:n,isHttp:p.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=x,this._contentLength=C||this._contentLength,this._filename=(0,c.extractFilenameFromHeader)(n)};this._request=null,this._url.protocol==="http:"?this._request=N.request(h(this._url,p.httpHeaders),a):this._request=M.request(h(this._url,p.httpHeaders),a),this._request.on("error",o=>{this._storedError=o,this._headersCapability.reject(o)}),this._request.end()}}class l extends P{constructor(p,a,o){super(p),this._httpHeaders={};for(const x in p.httpHeaders){const C=p.httpHeaders[x];typeof C>"u"||(this._httpHeaders[x]=C)}this._httpHeaders.Range=`bytes=${a}-${o-1}`;const n=x=>{if(x.statusCode===404){const C=new e.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=C;return}this._setReadableStream(x)};this._request=null,this._url.protocol==="http:"?this._request=N.request(h(this._url,this._httpHeaders),n):this._request=M.request(h(this._url,this._httpHeaders),n),this._request.on("error",x=>{this._storedError=x}),this._request.end()}}class u extends R{constructor(p){super(p);let a=decodeURIComponent(this._url.path);y.test(this._url.href)&&(a=a.replace(/^\//,"")),D.lstat(a,(o,n)=>{if(o){o.code==="ENOENT"&&(o=new e.MissingPDFException(`Missing PDF "${a}".`)),this._storedError=o,this._headersCapability.reject(o);return}this._contentLength=n.size,this._setReadableStream(D.createReadStream(a)),this._headersCapability.resolve()})}}class T extends P{constructor(p,a,o){super(p);let n=decodeURIComponent(this._url.path);y.test(this._url.href)&&(n=n.replace(/^\//,"")),this._setReadableStream(D.createReadStream(n,{start:a,end:o-1}))}}},(_,s,b)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createResponseStatusError=S,s.extractFilenameFromHeader=M,s.validateRangeRequestCapabilities=N,s.validateResponseStatus=y;var e=b(1),c=b(34),D=b(8);function N({getResponseHeader:k,isHttp:B,rangeChunkSize:R,disableRange:P}){const h={allowRangeRequests:!1,suggestedLength:void 0},t=parseInt(k("Content-Length"),10);return!Number.isInteger(t)||(h.suggestedLength=t,t<=2*R)||P||!B||k("Accept-Ranges")!=="bytes"||(k("Content-Encoding")||"identity")!=="identity"||(h.allowRangeRequests=!0),h}function M(k){const B=k("Content-Disposition");if(B){let R=(0,c.getFilenameFromContentDispositionHeader)(B);if(R.includes("%"))try{R=decodeURIComponent(R)}catch{}if((0,D.isPdfFile)(R))return R}return null}function S(k,B){return k===404||k===0&&B.startsWith("file:")?new e.MissingPDFException('Missing PDF "'+B+'".'):new e.UnexpectedResponseException(`Unexpected server response (${k}) while retrieving PDF "${B}".`,k)}function y(k){return k===200||k===206}},(_,s,b)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getFilenameFromContentDispositionHeader=c;var e=b(1);function c(D){let N=!0,M=S("filename\\*","i").exec(D);if(M){M=M[1];let t=R(M);return t=unescape(t),t=P(t),t=h(t),k(t)}if(M=B(D),M){const t=h(M);return k(t)}if(M=S("filename","i").exec(D),M){M=M[1];let t=R(M);return t=h(t),k(t)}function S(t,l){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',l)}function y(t,l){if(t){if(!/^[\x00-\xFF]+$/.test(l))return l;try{const u=new TextDecoder(t,{fatal:!0}),T=(0,e.stringToBytes)(l);l=u.decode(T),N=!1}catch{}}return l}function k(t){return N&&/[\x80-\xff]/.test(t)&&(t=y("utf-8",t),N&&(t=y("iso-8859-1",t))),t}function B(t){const l=[];let u;const T=S("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(u=T.exec(t))!==null;){let[,p,a,o]=u;if(p=parseInt(p,10),p in l){if(p===0)break;continue}l[p]=[a,o]}const v=[];for(let p=0;p<l.length&&p in l;++p){let[a,o]=l[p];o=R(o),a&&(o=unescape(o),p===0&&(o=P(o))),v.push(o)}return v.join("")}function R(t){if(t.startsWith('"')){const l=t.slice(1).split('\\"');for(let u=0;u<l.length;++u){const T=l[u].indexOf('"');T!==-1&&(l[u]=l[u].slice(0,T),l.length=u+1),l[u]=l[u].replace(/\\(.)/g,"$1")}t=l.join('"')}return t}function P(t){const l=t.indexOf("'");if(l===-1)return t;const u=t.slice(0,l),v=t.slice(l+1).replace(/^[^']*'/,"");return y(u,v)}function h(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(l,u,T,v){if(T==="q"||T==="Q")return v=v.replace(/_/g," "),v=v.replace(/=([0-9a-fA-F]{2})/g,function(p,a){return String.fromCharCode(parseInt(a,16))}),y(u,v);try{v=atob(v)}catch{}return y(u,v)})}return""}},(_,s,b)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFNetworkStream=void 0;var e=b(1),c=b(33);const D=200,N=206;function M(R){const P=R.response;return typeof P!="string"?P:(0,e.stringToBytes)(P).buffer}class S{constructor(P,h={}){this.url=P,this.isHttp=/^https?:/i.test(P),this.httpHeaders=this.isHttp&&h.httpHeaders||Object.create(null),this.withCredentials=h.withCredentials||!1,this.getXhr=h.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(P,h,t){const l={begin:P,end:h};for(const u in t)l[u]=t[u];return this.request(l)}requestFull(P){return this.request(P)}request(P){const h=this.getXhr(),t=this.currXhrId++,l=this.pendingRequests[t]={xhr:h};h.open("GET",this.url),h.withCredentials=this.withCredentials;for(const u in this.httpHeaders){const T=this.httpHeaders[u];typeof T>"u"||h.setRequestHeader(u,T)}return this.isHttp&&"begin"in P&&"end"in P?(h.setRequestHeader("Range",`bytes=${P.begin}-${P.end-1}`),l.expectedStatus=N):l.expectedStatus=D,h.responseType="arraybuffer",P.onError&&(h.onerror=function(u){P.onError(h.status)}),h.onreadystatechange=this.onStateChange.bind(this,t),h.onprogress=this.onProgress.bind(this,t),l.onHeadersReceived=P.onHeadersReceived,l.onDone=P.onDone,l.onError=P.onError,l.onProgress=P.onProgress,h.send(null),t}onProgress(P,h){var l;const t=this.pendingRequests[P];t&&((l=t.onProgress)==null||l.call(t,h))}onStateChange(P,h){var p,a,o;const t=this.pendingRequests[P];if(!t)return;const l=t.xhr;if(l.readyState>=2&&t.onHeadersReceived&&(t.onHeadersReceived(),delete t.onHeadersReceived),l.readyState!==4||!(P in this.pendingRequests))return;if(delete this.pendingRequests[P],l.status===0&&this.isHttp){(p=t.onError)==null||p.call(t,l.status);return}const u=l.status||D;if(!(u===D&&t.expectedStatus===N)&&u!==t.expectedStatus){(a=t.onError)==null||a.call(t,l.status);return}const v=M(l);if(u===N){const n=l.getResponseHeader("Content-Range"),x=/bytes (\d+)-(\d+)\/(\d+)/.exec(n);t.onDone({begin:parseInt(x[1],10),chunk:v})}else v?t.onDone({begin:0,chunk:v}):(o=t.onError)==null||o.call(t,l.status)}getRequestXhr(P){return this.pendingRequests[P].xhr}isPendingRequest(P){return P in this.pendingRequests}abortRequest(P){const h=this.pendingRequests[P].xhr;delete this.pendingRequests[P],h.abort()}}class y{constructor(P){this._source=P,this._manager=new S(P.url,{httpHeaders:P.httpHeaders,withCredentials:P.withCredentials}),this._rangeChunkSize=P.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(P){const h=this._rangeRequestReaders.indexOf(P);h>=0&&this._rangeRequestReaders.splice(h,1)}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new k(this._manager,this._source),this._fullRequestReader}getRangeReader(P,h){const t=new B(this._manager,P,h);return t.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(t),t}cancelAllRequests(P){var h;(h=this._fullRequestReader)==null||h.cancel(P);for(const t of this._rangeRequestReaders.slice(0))t.cancel(P)}}s.PDFNetworkStream=y;class k{constructor(P,h){this._manager=P;const t={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=h.url,this._fullRequestId=P.requestFull(t),this._headersReceivedCapability=(0,e.createPromiseCapability)(),this._disableRange=h.disableRange||!1,this._contentLength=h.length,this._rangeChunkSize=h.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const P=this._fullRequestId,h=this._manager.getRequestXhr(P),t=T=>h.getResponseHeader(T),{allowRangeRequests:l,suggestedLength:u}=(0,c.validateRangeRequestCapabilities)({getResponseHeader:t,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});l&&(this._isRangeSupported=!0),this._contentLength=u||this._contentLength,this._filename=(0,c.extractFilenameFromHeader)(t),this._isRangeSupported&&this._manager.abortRequest(P),this._headersReceivedCapability.resolve()}_onDone(P){if(P&&(this._requests.length>0?this._requests.shift().resolve({value:P.chunk,done:!1}):this._cachedChunks.push(P.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(P){this._storedError=(0,c.createResponseStatusError)(P,this._url),this._headersReceivedCapability.reject(this._storedError);for(const h of this._requests)h.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(P){var h;(h=this.onProgress)==null||h.call(this,{loaded:P.loaded,total:P.lengthComputable?P.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const P=(0,e.createPromiseCapability)();return this._requests.push(P),P.promise}cancel(P){this._done=!0,this._headersReceivedCapability.reject(P);for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class B{constructor(P,h,t){this._manager=P;const l={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=P.url,this._requestId=P.requestRange(h,t,l),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var P;(P=this.onClosed)==null||P.call(this,this)}_onDone(P){const h=P.chunk;this._requests.length>0?this._requests.shift().resolve({value:h,done:!1}):this._queuedChunk=h,this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(P){this._storedError=(0,c.createResponseStatusError)(P,this._url);for(const h of this._requests)h.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(P){var h;this.isStreamingSupported||(h=this.onProgress)==null||h.call(this,{loaded:P.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const h=this._queuedChunk;return this._queuedChunk=null,{value:h,done:!1}}if(this._done)return{value:void 0,done:!0};const P=(0,e.createPromiseCapability)();return this._requests.push(P),P.promise}cancel(P){this._done=!0;for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(_,s,b)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFFetchStream=void 0;var e=b(1),c=b(33);function D(k,B,R){return{method:"GET",headers:k,signal:R.signal,mode:"cors",credentials:B?"include":"same-origin",redirect:"follow"}}function N(k){const B=new Headers;for(const R in k){const P=k[R];typeof P>"u"||B.append(R,P)}return B}class M{constructor(B){this.source=B,this.isHttp=/^https?:/i.test(B.url),this.httpHeaders=this.isHttp&&B.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var B;return((B=this._fullRequestReader)==null?void 0:B._loaded)??0}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new S(this),this._fullRequestReader}getRangeReader(B,R){if(R<=this._progressiveDataLength)return null;const P=new y(this,B,R);return this._rangeRequestReaders.push(P),P}cancelAllRequests(B){this._fullRequestReader&&this._fullRequestReader.cancel(B);for(const R of this._rangeRequestReaders.slice(0))R.cancel(B)}}s.PDFFetchStream=M;class S{constructor(B){this._stream=B,this._reader=null,this._loaded=0,this._filename=null;const R=B.source;this._withCredentials=R.withCredentials||!1,this._contentLength=R.length,this._headersCapability=(0,e.createPromiseCapability)(),this._disableRange=R.disableRange||!1,this._rangeChunkSize=R.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!R.disableStream,this._isRangeSupported=!R.disableRange,this._headers=N(this._stream.httpHeaders);const P=R.url;fetch(P,D(this._headers,this._withCredentials,this._abortController)).then(h=>{if(!(0,c.validateResponseStatus)(h.status))throw(0,c.createResponseStatusError)(h.status,P);this._reader=h.body.getReader(),this._headersCapability.resolve();const t=T=>h.headers.get(T),{allowRangeRequests:l,suggestedLength:u}=(0,c.validateRangeRequestCapabilities)({getResponseHeader:t,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=u||this._contentLength,this._filename=(0,c.extractFilenameFromHeader)(t),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new e.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:B,done:R}=await this._reader.read();return R?{value:B,done:R}:(this._loaded+=B.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(B).buffer,done:!1})}cancel(B){this._reader&&this._reader.cancel(B),this._abortController.abort()}}class y{constructor(B,R,P){this._stream=B,this._reader=null,this._loaded=0;const h=B.source;this._withCredentials=h.withCredentials||!1,this._readCapability=(0,e.createPromiseCapability)(),this._isStreamingSupported=!h.disableStream,this._abortController=new AbortController,this._headers=N(this._stream.httpHeaders),this._headers.append("Range",`bytes=${R}-${P-1}`);const t=h.url;fetch(t,D(this._headers,this._withCredentials,this._abortController)).then(l=>{if(!(0,c.validateResponseStatus)(l.status))throw(0,c.createResponseStatusError)(l.status,t);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:B,done:R}=await this._reader.read();return R?{value:B,done:R}:(this._loaded+=B.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(B).buffer,done:!1})}cancel(B){this._reader&&this._reader.cancel(B),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(_){var s=__webpack_module_cache__[_];if(s!==void 0)return s.exports;var b=__webpack_module_cache__[_]={exports:{}};return __webpack_modules__[_](b,b.exports,__w_pdfjs_require__),b.exports}var __webpack_exports__={};return(()=>{var _=__webpack_exports__;Object.defineProperty(_,"__esModule",{value:!0}),Object.defineProperty(_,"AnnotationEditorLayer",{enumerable:!0,get:function(){return c.AnnotationEditorLayer}}),Object.defineProperty(_,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return s.AnnotationEditorParamsType}}),Object.defineProperty(_,"AnnotationEditorType",{enumerable:!0,get:function(){return s.AnnotationEditorType}}),Object.defineProperty(_,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return D.AnnotationEditorUIManager}}),Object.defineProperty(_,"AnnotationLayer",{enumerable:!0,get:function(){return N.AnnotationLayer}}),Object.defineProperty(_,"AnnotationMode",{enumerable:!0,get:function(){return s.AnnotationMode}}),Object.defineProperty(_,"CMapCompressionType",{enumerable:!0,get:function(){return s.CMapCompressionType}}),Object.defineProperty(_,"GlobalWorkerOptions",{enumerable:!0,get:function(){return M.GlobalWorkerOptions}}),Object.defineProperty(_,"InvalidPDFException",{enumerable:!0,get:function(){return s.InvalidPDFException}}),Object.defineProperty(_,"LoopbackPort",{enumerable:!0,get:function(){return b.LoopbackPort}}),Object.defineProperty(_,"MissingPDFException",{enumerable:!0,get:function(){return s.MissingPDFException}}),Object.defineProperty(_,"OPS",{enumerable:!0,get:function(){return s.OPS}}),Object.defineProperty(_,"PDFDataRangeTransport",{enumerable:!0,get:function(){return b.PDFDataRangeTransport}}),Object.defineProperty(_,"PDFDateString",{enumerable:!0,get:function(){return e.PDFDateString}}),Object.defineProperty(_,"PDFWorker",{enumerable:!0,get:function(){return b.PDFWorker}}),Object.defineProperty(_,"PasswordResponses",{enumerable:!0,get:function(){return s.PasswordResponses}}),Object.defineProperty(_,"PermissionFlag",{enumerable:!0,get:function(){return s.PermissionFlag}}),Object.defineProperty(_,"PixelsPerInch",{enumerable:!0,get:function(){return e.PixelsPerInch}}),Object.defineProperty(_,"RenderingCancelledException",{enumerable:!0,get:function(){return e.RenderingCancelledException}}),Object.defineProperty(_,"SVGGraphics",{enumerable:!0,get:function(){return k.SVGGraphics}}),Object.defineProperty(_,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return s.UNSUPPORTED_FEATURES}}),Object.defineProperty(_,"UnexpectedResponseException",{enumerable:!0,get:function(){return s.UnexpectedResponseException}}),Object.defineProperty(_,"Util",{enumerable:!0,get:function(){return s.Util}}),Object.defineProperty(_,"VerbosityLevel",{enumerable:!0,get:function(){return s.VerbosityLevel}}),Object.defineProperty(_,"XfaLayer",{enumerable:!0,get:function(){return B.XfaLayer}}),Object.defineProperty(_,"build",{enumerable:!0,get:function(){return b.build}}),Object.defineProperty(_,"createPromiseCapability",{enumerable:!0,get:function(){return s.createPromiseCapability}}),Object.defineProperty(_,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return s.createValidAbsoluteUrl}}),Object.defineProperty(_,"getDocument",{enumerable:!0,get:function(){return b.getDocument}}),Object.defineProperty(_,"getFilenameFromUrl",{enumerable:!0,get:function(){return e.getFilenameFromUrl}}),Object.defineProperty(_,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return e.getPdfFilenameFromUrl}}),Object.defineProperty(_,"getXfaPageViewport",{enumerable:!0,get:function(){return e.getXfaPageViewport}}),Object.defineProperty(_,"isPdfFile",{enumerable:!0,get:function(){return e.isPdfFile}}),Object.defineProperty(_,"loadScript",{enumerable:!0,get:function(){return e.loadScript}}),Object.defineProperty(_,"renderTextLayer",{enumerable:!0,get:function(){return y.renderTextLayer}}),Object.defineProperty(_,"shadow",{enumerable:!0,get:function(){return s.shadow}}),Object.defineProperty(_,"version",{enumerable:!0,get:function(){return b.version}});var s=__w_pdfjs_require__(1),b=__w_pdfjs_require__(4),e=__w_pdfjs_require__(8),c=__w_pdfjs_require__(22),D=__w_pdfjs_require__(7),N=__w_pdfjs_require__(27),M=__w_pdfjs_require__(15),S=__w_pdfjs_require__(3),y=__w_pdfjs_require__(30),k=__w_pdfjs_require__(31),B=__w_pdfjs_require__(29);if(S.isNodeJS){const{PDFNodeStream:R}=__w_pdfjs_require__(32);(0,b.setPDFNetworkStreamFactory)(P=>new R(P))}else{const{PDFNetworkStream:R}=__w_pdfjs_require__(35),{PDFFetchStream:P}=__w_pdfjs_require__(36);(0,b.setPDFNetworkStreamFactory)(h=>(0,e.isValidFetchUrl)(h.url)?new P(h):new R(h))}})(),__webpack_exports__})())}(pdf)),pdf.exports}var pdfExports=requirePdf();function _objectWithoutProperties(_,s){if(_==null)return{};var b,e,c=_objectWithoutPropertiesLoose(_,s);if(Object.getOwnPropertySymbols){var D=Object.getOwnPropertySymbols(_);for(e=0;e<D.length;e++)b=D[e],s.indexOf(b)===-1&&{}.propertyIsEnumerable.call(_,b)&&(c[b]=_[b])}return c}function _typeof(_){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},_typeof(_)}function _classCallCheck(_,s){if(!(_ instanceof s))throw new TypeError("Cannot call a class as a function")}function toPrimitive(_,s){if(_typeof(_)!="object"||!_)return _;var b=_[Symbol.toPrimitive];if(b!==void 0){var e=b.call(_,s);if(_typeof(e)!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(_)}function toPropertyKey(_){var s=toPrimitive(_,"string");return _typeof(s)=="symbol"?s:s+""}function _defineProperties(_,s){for(var b=0;b<s.length;b++){var e=s[b];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(_,toPropertyKey(e.key),e)}}function _createClass(_,s,b){return s&&_defineProperties(_.prototype,s),Object.defineProperty(_,"prototype",{writable:!1}),_}function _inherits(_,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(s&&s.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),s&&_setPrototypeOf(_,s)}function _possibleConstructorReturn(_,s){if(s&&(_typeof(s)=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(_)}function _getPrototypeOf(_){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},_getPrototypeOf(_)}function _defineProperty(_,s,b){return(s=toPropertyKey(s))in _?Object.defineProperty(_,s,{value:b,enumerable:!0,configurable:!0,writable:!0}):_[s]=b,_}var __spreadArray=function(_,s,b){if(b||arguments.length===2)for(var e=0,c=s.length,D;e<c;e++)(D||!(e in s))&&(D||(D=Array.prototype.slice.call(s,0,e)),D[e]=s[e]);return _.concat(D||Array.prototype.slice.call(s))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(_,s){var b={};return allEvents.forEach(function(e){var c=_[e];c&&(s?b[e]=function(D){return c(D,s(e))}:b[e]=c)}),b}function makeCancellablePromise(_){var s=!1,b=new Promise(function(e,c){_.then(function(D){return!s&&e(D)}).catch(function(D){return!s&&c(D)})});return{promise:b,cancel:function(){s=!0}}}function r(_){var s,b,e="";if(typeof _=="string"||typeof _=="number")e+=_;else if(typeof _=="object")if(Array.isArray(_))for(s=0;s<_.length;s++)_[s]&&(b=r(_[s]))&&(e&&(e+=" "),e+=b);else for(s in _)_[s]&&(e&&(e+=" "),e+=s);return e}function clsx(){for(var _,s,b=0,e="";b<arguments.length;)(_=arguments[b++])&&(s=r(_))&&(e&&(e+=" "),e+=s);return e}function warning(_,s){}const DocumentContext=reactExports.createContext(null);function Message(_){var s=_.children,b=_.type;return U.createElement("div",{className:"react-pdf__message react-pdf__message--".concat(b)},s)}Message.propTypes={children:PropTypes.node,type:PropTypes.oneOf(["error","loading","no-data"]).isRequired};var DEFAULT_LINK_REL="noopener noreferrer nofollow",LinkService=function(){function _(){_classCallCheck(this,_),this.externalLinkTarget=null,this.externalLinkRel=null}return _createClass(_,[{key:"setDocument",value:function(b){this.pdfDocument=b}},{key:"setViewer",value:function(b){this.pdfViewer=b}},{key:"setExternalLinkRel",value:function(b){this.externalLinkRel=b}},{key:"setExternalLinkTarget",value:function(b){this.externalLinkTarget=b}},{key:"setHistory",value:function(){}},{key:"pagesCount",get:function(){return this.pdfDocument?this.pdfDocument.numPages:0}},{key:"page",get:function(){return this.pdfViewer.currentPageNumber},set:function(b){this.pdfViewer.currentPageNumber=b}},{key:"rotation",get:function(){return 0},set:function(b){}},{key:"goToDestination",value:function(b){var e=this;new Promise(function(c){typeof b=="string"?e.pdfDocument.getDestination(b).then(c):Array.isArray(b)?c(b):b.then(c)}).then(function(c){invariant(Array.isArray(c));var D=c[0];new Promise(function(N){D instanceof Object?e.pdfDocument.getPageIndex(D).then(function(M){N(M)}).catch(function(){invariant(!1)}):typeof D=="number"?N(D):invariant(!1)}).then(function(N){var M=N+1;invariant(M>=1&&M<=e.pagesCount),e.pdfViewer.scrollPageIntoView({dest:b,pageIndex:N,pageNumber:M})})})}},{key:"navigateTo",value:function(b){this.goToDestination(b)}},{key:"goToPage",value:function(){}},{key:"addLinkAttributes",value:function(b,e,c){b.href=e,b.rel=this.externalLinkRel||DEFAULT_LINK_REL,b.target=c?"_blank":this.externalLinkTarget||""}},{key:"getDestinationHash",value:function(){return"#"}},{key:"getAnchorUrl",value:function(){return"#"}},{key:"setHash",value:function(){}},{key:"executeNamedAction",value:function(){}},{key:"cachePageRef",value:function(){}},{key:"isPageVisible",value:function(){return!0}},{key:"isPageCached",value:function(){return!0}}]),_}(),PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function _arrayWithHoles(_){if(Array.isArray(_))return _}function _iterableToArrayLimit(_,s){var b=_==null?null:typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(b!=null){var e,c,D,N,M=[],S=!0,y=!1;try{if(D=(b=b.call(_)).next,s!==0)for(;!(S=(e=D.call(b)).done)&&(M.push(e.value),M.length!==s);S=!0);}catch(k){y=!0,c=k}finally{try{if(!S&&b.return!=null&&(N=b.return(),Object(N)!==N))return}finally{if(y)throw c}}return M}}function _arrayLikeToArray(_,s){(s==null||s>_.length)&&(s=_.length);for(var b=0,e=Array(s);b<s;b++)e[b]=_[b];return e}function _unsupportedIterableToArray(_,s){if(_){if(typeof _=="string")return _arrayLikeToArray(_,s);var b={}.toString.call(_).slice(8,-1);return b==="Object"&&_.constructor&&(b=_.constructor.name),b==="Map"||b==="Set"?Array.from(_):b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?_arrayLikeToArray(_,s):void 0}}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _slicedToArray(_,s){return _arrayWithHoles(_)||_iterableToArrayLimit(_,s)||_unsupportedIterableToArray(_,s)||_nonIterableRest()}var isBrowser=typeof document<"u";function isDefined(_){return typeof _<"u"}function isProvided(_){return isDefined(_)&&_!==null}function isString(_){return typeof _=="string"}function isArrayBuffer(_){return _ instanceof ArrayBuffer}function isBlob(_){return invariant(isBrowser),_ instanceof Blob}function isFile$1(_){return invariant(isBrowser),_ instanceof File}function isDataURI(_){return isString(_)&&/^data:/.test(_)}function dataURItoByteString(_){invariant(isDataURI(_));var s=_.split(","),b=_slicedToArray(s,2),e=b[0],c=b[1],D=e.split(";");return D.indexOf("base64")!==-1?atob(c):unescape(c)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}function cancelRunningTask(_){_&&_.cancel&&_.cancel()}function makePageCallback(_,s){return Object.defineProperty(_,"width",{get:function(){return this.view[2]*s},configurable:!0}),Object.defineProperty(_,"height",{get:function(){return this.view[3]*s},configurable:!0}),Object.defineProperty(_,"originalWidth",{get:function(){return this.view[2]},configurable:!0}),Object.defineProperty(_,"originalHeight",{get:function(){return this.view[3]},configurable:!0}),_}function isCancelException(_){return _.name==="RenderingCancelledException"}function loadFromFile(_){return new Promise(function(s,b){var e=new FileReader;return e.onload=function(){return s(new Uint8Array(e.result))},e.onerror=function(c){switch(c.target.error.code){case c.target.error.NOT_FOUND_ERR:return b(new Error("Error while reading a file: File not found."));case c.target.error.NOT_READABLE_ERR:return b(new Error("Error while reading a file: File not readable."));case c.target.error.SECURITY_ERR:return b(new Error("Error while reading a file: Security error."));case c.target.error.ABORT_ERR:return b(new Error("Error while reading a file: Aborted."));default:return b(new Error("Error while reading a file."))}},e.readAsArrayBuffer(_),null})}function _arrayWithoutHoles(_){if(Array.isArray(_))return _arrayLikeToArray(_)}function _iterableToArray(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toConsumableArray(_){return _arrayWithoutHoles(_)||_iterableToArray(_)||_unsupportedIterableToArray(_)||_nonIterableSpread()}var eventProps=function(){var _={};return[].concat(_toConsumableArray(mouseEvents),_toConsumableArray(touchEvents),_toConsumableArray(keyboardEvents)).forEach(function(s){_[s]=PropTypes.func}),_}(),fileTypes=[PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.shape({data:PropTypes.oneOfType([PropTypes.object,PropTypes.string]),httpHeaders:PropTypes.object,range:PropTypes.object,url:PropTypes.string,withCredentials:PropTypes.bool})];typeof File<"u"&&fileTypes.push(PropTypes.instanceOf(File));typeof Blob<"u"&&fileTypes.push(PropTypes.instanceOf(Blob));var isClassName=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),isFile=PropTypes.oneOfType(fileTypes),isLinkService=PropTypes.instanceOf(LinkService);PropTypes.oneOf(["_self","_blank","_parent","_top"]);var isPage=PropTypes.shape({commonObjs:PropTypes.shape({}).isRequired,getAnnotations:PropTypes.func.isRequired,getTextContent:PropTypes.func.isRequired,getViewport:PropTypes.func.isRequired,render:PropTypes.func.isRequired}),isPageIndex=function _(s,b,e){var c=s[b],D=s.pageNumber,N=s.pdf;if(!isDefined(N))return null;if(isDefined(c)){if(typeof c!="number")return new Error("`".concat(b,"` of type `").concat(_typeof(c),"` supplied to `").concat(e,"`, expected `number`."));if(c<0)return new Error("Expected `".concat(b,"` to be greater or equal to 0."));var M=N.numPages;if(c+1>M)return new Error("Expected `".concat(b,"` to be less or equal to ").concat(M-1,"."))}else if(!isDefined(D))return new Error("`".concat(b,"` not supplied. Either pageIndex or pageNumber must be supplied to `").concat(e,"`."));return null},isPageNumber=function _(s,b,e){var c=s[b],D=s.pageIndex,N=s.pdf;if(!isDefined(N))return null;if(isDefined(c)){if(typeof c!="number")return new Error("`".concat(b,"` of type `").concat(_typeof(c),"` supplied to `").concat(e,"`, expected `number`."));if(c<1)return new Error("Expected `".concat(b,"` to be greater or equal to 1."));var M=N.numPages;if(c>M)return new Error("Expected `".concat(b,"` to be less or equal to ").concat(M,"."))}else if(!isDefined(D))return new Error("`".concat(b,"` not supplied. Either pageIndex or pageNumber must be supplied to `").concat(e,"`."));return null},isPdf=PropTypes.oneOfType([PropTypes.shape({getDestination:PropTypes.func.isRequired,getOutline:PropTypes.func.isRequired,getPage:PropTypes.func.isRequired,numPages:PropTypes.number.isRequired}),PropTypes.bool]),isRef=PropTypes.oneOfType([PropTypes.func,PropTypes.shape({current:PropTypes.any})]),isRenderMode=PropTypes.oneOf(["canvas","none","svg"]),isRotate=PropTypes.oneOf([0,90,180,270]),_excluded=["url"];function ownKeys$3(_,s){var b=Object.keys(_);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(_);s&&(e=e.filter(function(c){return Object.getOwnPropertyDescriptor(_,c).enumerable})),b.push.apply(b,e)}return b}function _objectSpread$3(_){for(var s=1;s<arguments.length;s++){var b=arguments[s]!=null?arguments[s]:{};s%2?ownKeys$3(Object(b),!0).forEach(function(e){_defineProperty(_,e,b[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(b)):ownKeys$3(Object(b)).forEach(function(e){Object.defineProperty(_,e,Object.getOwnPropertyDescriptor(b,e))})}return _}function _createSuper$5(_){var s=_isNativeReflectConstruct$5();return function(){var e=_getPrototypeOf(_),c;if(s){var D=_getPrototypeOf(this).constructor;c=Reflect.construct(e,arguments,D)}else c=e.apply(this,arguments);return _possibleConstructorReturn(this,c)}}function _isNativeReflectConstruct$5(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var PDFDataRangeTransport=pdfExports.PDFDataRangeTransport,Document=function(_){_inherits(b,_);var s=_createSuper$5(b);function b(){var e;_classCallCheck(this,b);for(var c=arguments.length,D=new Array(c),N=0;N<c;N++)D[N]=arguments[N];return e=s.call.apply(s,[this].concat(D)),_defineProperty(_assertThisInitialized(e),"state",{pdf:null}),_defineProperty(_assertThisInitialized(e),"viewer",{scrollPageIntoView:function(S){var y=S.dest,k=S.pageIndex,B=S.pageNumber,R=e.props.onItemClick;if(R){R({dest:y,pageIndex:k,pageNumber:B});return}var P=e.pages[k];if(P){P.scrollIntoView();return}}}),_defineProperty(_assertThisInitialized(e),"linkService",new LinkService),_defineProperty(_assertThisInitialized(e),"loadDocument",function(){cancelRunningTask(e.runningTask),e.loadingTask&&e.loadingTask.destroy();var M=makeCancellablePromise(e.findDocumentSource());e.runningTask=M,M.promise.then(function(S){if(e.onSourceSuccess(),!!S){e.setState(function(h){return h.pdf?{pdf:null}:null});var y=e.props,k=y.options,B=y.onLoadProgress,R=y.onPassword,P=pdfExports.getDocument(_objectSpread$3(_objectSpread$3({},S),k));P.onPassword=R,B&&(P.onProgress=B),e.loadingTask=P,P.promise.then(function(h){e.setState(function(t){return t.pdf&&t.pdf.fingerprint===h.fingerprint?null:{pdf:h}},e.onLoadSuccess)}).catch(function(h){e.onLoadError(h)})}}).catch(function(S){e.onSourceError(S)})}),_defineProperty(_assertThisInitialized(e),"setupLinkService",function(){var M=e.props,S=M.externalLinkRel,y=M.externalLinkTarget;e.linkService.setViewer(e.viewer),e.linkService.setExternalLinkRel(S),e.linkService.setExternalLinkTarget(y)}),_defineProperty(_assertThisInitialized(e),"onSourceSuccess",function(){var M=e.props.onSourceSuccess;M&&M()}),_defineProperty(_assertThisInitialized(e),"onSourceError",function(M){var S=e.props.onSourceError;S&&S(M)}),_defineProperty(_assertThisInitialized(e),"onLoadSuccess",function(){var M=e.props.onLoadSuccess,S=e.state.pdf;M&&M(S),e.pages=new Array(S.numPages),e.linkService.setDocument(S)}),_defineProperty(_assertThisInitialized(e),"onLoadError",function(M){e.setState({pdf:!1});var S=e.props.onLoadError;S&&S(M)}),_defineProperty(_assertThisInitialized(e),"findDocumentSource",function(){return new Promise(function(M){var S=e.props.file;if(S||M(null),typeof S=="string"){if(isDataURI(S)){var y=dataURItoByteString(S);M({data:y})}M({url:S})}if(S instanceof PDFDataRangeTransport&&M({range:S}),isArrayBuffer(S)&&M({data:S}),isBrowser&&(isBlob(S)||isFile$1(S))){loadFromFile(S).then(function(P){M({data:P})});return}if(invariant(_typeof(S)==="object"),invariant(S.url||S.data||S.range),typeof S.url=="string"&&isDataURI(S.url)){var k=S.url,B=_objectWithoutProperties(S,_excluded),R=dataURItoByteString(k);M(_objectSpread$3({data:R},B))}M(S)})}),_defineProperty(_assertThisInitialized(e),"registerPage",function(M,S){e.pages[M]=S}),_defineProperty(_assertThisInitialized(e),"unregisterPage",function(M){delete e.pages[M]}),e}return _createClass(b,[{key:"componentDidMount",value:function(){this.loadDocument(),this.setupLinkService()}},{key:"componentDidUpdate",value:function(c){var D=this.props.file;D!==c.file&&this.loadDocument()}},{key:"componentWillUnmount",value:function(){cancelRunningTask(this.runningTask),this.loadingTask&&this.loadingTask.destroy()}},{key:"childContext",get:function(){var c=this.linkService,D=this.registerPage,N=this.unregisterPage,M=this.props,S=M.imageResourcesPath,y=M.renderMode,k=M.rotate,B=this.state.pdf;return{imageResourcesPath:S,linkService:c,pdf:B,registerPage:D,renderMode:y,rotate:k,unregisterPage:N}}},{key:"eventProps",get:function(){var c=this;return makeEventProps(this.props,function(){return c.state.pdf})}},{key:"renderChildren",value:function(){var c=this.props.children;return U.createElement(DocumentContext.Provider,{value:this.childContext},c)}},{key:"renderContent",value:function(){var c=this.props.file,D=this.state.pdf;if(!c){var N=this.props.noData;return U.createElement(Message,{type:"no-data"},typeof N=="function"?N():N)}if(D===null){var M=this.props.loading;return U.createElement(Message,{type:"loading"},typeof M=="function"?M():M)}if(D===!1){var S=this.props.error;return U.createElement(Message,{type:"error"},typeof S=="function"?S():S)}return this.renderChildren()}},{key:"render",value:function(){var c=this.props,D=c.className,N=c.inputRef;return U.createElement("div",_extends({className:clsx("react-pdf__Document",D),ref:N},this.eventProps),this.renderContent())}}]),b}(reactExports.PureComponent);Document.defaultProps={error:"Failed to load PDF file.",loading:"Loading PDF…",noData:"No PDF file specified.",onPassword:function _(s,b){switch(b){case PasswordResponses.NEED_PASSWORD:{var e=prompt("Enter the password to open this PDF file.");s(e);break}case PasswordResponses.INCORRECT_PASSWORD:{var c=prompt("Invalid password. Please try again.");s(c);break}}}};var isFunctionOrNode$1=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Document.propTypes=_objectSpread$3(_objectSpread$3({},eventProps),{},{children:PropTypes.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:PropTypes.string,externalLinkTarget:PropTypes.string,file:isFile,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadProgress:PropTypes.func,onLoadSuccess:PropTypes.func,onPassword:PropTypes.func,onSourceError:PropTypes.func,onSourceSuccess:PropTypes.func,rotate:PropTypes.number});var isDestination=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.any)]);PropTypes.shape({dest:isDestination,items:PropTypes.arrayOf(PropTypes.shape({dest:isDestination,title:PropTypes.string})),title:PropTypes.string}).isRequired,PropTypes.func,isPdf.isRequired;function ownKeys$2(_,s){var b=Object.keys(_);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(_);s&&(e=e.filter(function(c){return Object.getOwnPropertyDescriptor(_,c).enumerable})),b.push.apply(b,e)}return b}function _objectSpread$2(_){for(var s=1;s<arguments.length;s++){var b=arguments[s]!=null?arguments[s]:{};s%2?ownKeys$2(Object(b),!0).forEach(function(e){_defineProperty(_,e,b[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(b)):ownKeys$2(Object(b)).forEach(function(e){Object.defineProperty(_,e,Object.getOwnPropertyDescriptor(b,e))})}return _}_objectSpread$2({className:isClassName,inputRef:isRef,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,pdf:isPdf},eventProps);function mergeRefs(){for(var _=[],s=0;s<arguments.length;s++)_[s]=arguments[s];var b=_.filter(Boolean);if(b.length<=1){var e=b[0];return e||null}return function(D){b.forEach(function(N){typeof N=="function"?N(D):N&&(N.current=D)})}}const PageContext=reactExports.createContext(null);function _createSuper$4(_){var s=_isNativeReflectConstruct$4();return function(){var e=_getPrototypeOf(_),c;if(s){var D=_getPrototypeOf(this).constructor;c=Reflect.construct(e,arguments,D)}else c=e.apply(this,arguments);return _possibleConstructorReturn(this,c)}}function _isNativeReflectConstruct$4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ANNOTATION_MODE=pdfExports.AnnotationMode,PageCanvasInternal=function(_){_inherits(b,_);var s=_createSuper$4(b);function b(){var e;_classCallCheck(this,b);for(var c=arguments.length,D=new Array(c),N=0;N<c;N++)D[N]=arguments[N];return e=s.call.apply(s,[this].concat(D)),_defineProperty(_assertThisInitialized(e),"canvasElement",reactExports.createRef()),_defineProperty(_assertThisInitialized(e),"onRenderSuccess",function(){e.renderer=null;var M=e.props,S=M.onRenderSuccess,y=M.page,k=M.scale;S&&S(makePageCallback(y,k))}),_defineProperty(_assertThisInitialized(e),"onRenderError",function(M){if(!isCancelException(M)){var S=e.props.onRenderError;S&&S(M)}}),_defineProperty(_assertThisInitialized(e),"drawPageOnCanvas",function(){var M=e.canvasElement.current;if(!M)return null;var S=_assertThisInitialized(e),y=S.renderViewport,k=S.viewport,B=e.props,R=B.canvasBackground,P=B.page,h=B.renderForms;M.width=y.width,M.height=y.height,M.style.width="".concat(Math.floor(k.width),"px"),M.style.height="".concat(Math.floor(k.height),"px");var t={annotationMode:h?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,get canvasContext(){return M.getContext("2d",{alpha:!1})},viewport:y};R&&(t.background=R),e.cancelRenderingTask();var l=P.render(t);return e.renderer=l,l.promise.then(e.onRenderSuccess).catch(e.onRenderError)}),e}return _createClass(b,[{key:"componentDidMount",value:function(){this.drawPageOnCanvas()}},{key:"componentDidUpdate",value:function(c){var D=this.props,N=D.canvasBackground,M=D.devicePixelRatio,S=D.page,y=D.renderForms;(N!==c.canvasBackground||M!==c.devicePixelRatio||y!==c.renderForms)&&(S.cleanup(),this.drawPageOnCanvas())}},{key:"componentWillUnmount",value:function(){this.cancelRenderingTask();var c=this.canvasElement.current;c&&(c.width=0,c.height=0)}},{key:"cancelRenderingTask",value:function(){this.renderer&&(this.renderer.cancel(),this.renderer=null)}},{key:"devicePixelRatio",get:function(){var c=this.props.devicePixelRatio;return c||getDevicePixelRatio()}},{key:"renderViewport",get:function(){var c=this.devicePixelRatio,D=this.props,N=D.page,M=D.rotate,S=D.scale;return N.getViewport({scale:S*c,rotation:M})}},{key:"viewport",get:function(){var c=this.props,D=c.page,N=c.rotate,M=c.scale;return D.getViewport({scale:M,rotation:N})}},{key:"render",value:function(){var c=this.props.canvasRef;return U.createElement("canvas",{className:"react-pdf__Page__canvas",dir:"ltr",ref:mergeRefs(c,this.canvasElement),style:{display:"block",userSelect:"none"}})}}]),b}(reactExports.PureComponent);PageCanvasInternal.propTypes={canvasBackground:PropTypes.string,canvasRef:isRef,devicePixelRatio:PropTypes.number,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,page:isPage.isRequired,renderForms:PropTypes.bool,rotate:isRotate,scale:PropTypes.number.isRequired};function PageCanvas(_){return U.createElement(PageContext.Consumer,null,function(s){return U.createElement(PageCanvasInternal,_extends({},s,_))})}function _createSuper$3(_){var s=_isNativeReflectConstruct$3();return function(){var e=_getPrototypeOf(_),c;if(s){var D=_getPrototypeOf(this).constructor;c=Reflect.construct(e,arguments,D)}else c=e.apply(this,arguments);return _possibleConstructorReturn(this,c)}}function _isNativeReflectConstruct$3(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var PageSVGInternal=function(_){_inherits(b,_);var s=_createSuper$3(b);function b(){var e;_classCallCheck(this,b);for(var c=arguments.length,D=new Array(c),N=0;N<c;N++)D[N]=arguments[N];return e=s.call.apply(s,[this].concat(D)),_defineProperty(_assertThisInitialized(e),"state",{svg:null}),_defineProperty(_assertThisInitialized(e),"onRenderSuccess",function(){e.renderer=null;var M=e.props,S=M.onRenderSuccess,y=M.page,k=M.scale;S&&S(makePageCallback(y,k))}),_defineProperty(_assertThisInitialized(e),"onRenderError",function(M){if(!isCancelException(M)){var S=e.props.onRenderError;S&&S(M)}}),_defineProperty(_assertThisInitialized(e),"renderSVG",function(){var M=e.props.page;return e.renderer=M.getOperatorList(),e.renderer.then(function(S){var y=new pdfExports.SVGGraphics(M.commonObjs,M.objs);e.renderer=y.getSVG(S,e.viewport).then(function(k){e.setState({svg:k},e.onRenderSuccess)}).catch(e.onRenderError)}).catch(e.onRenderError)}),_defineProperty(_assertThisInitialized(e),"drawPageOnContainer",function(M){var S=e.state.svg;if(!(!M||!S)){M.firstElementChild||M.appendChild(S);var y=e.viewport,k=y.width,B=y.height;S.setAttribute("width",k),S.setAttribute("height",B)}}),e}return _createClass(b,[{key:"componentDidMount",value:function(){this.renderSVG()}},{key:"viewport",get:function(){var c=this.props,D=c.page,N=c.rotate,M=c.scale;return D.getViewport({scale:M,rotation:N})}},{key:"render",value:function(){var c=this,D=this.viewport,N=D.width,M=D.height;return U.createElement("div",{className:"react-pdf__Page__svg",ref:function(y){return c.drawPageOnContainer(y)},style:{display:"block",backgroundColor:"white",overflow:"hidden",width:N,height:M,userSelect:"none"}})}}]),b}(reactExports.PureComponent);PageSVGInternal.propTypes={onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,page:isPage.isRequired,rotate:isRotate,scale:PropTypes.number.isRequired};function PageSVG(_){return U.createElement(PageContext.Consumer,null,function(s){return U.createElement(PageSVGInternal,_extends({},s,_))})}function ownKeys$1(_,s){var b=Object.keys(_);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(_);s&&(e=e.filter(function(c){return Object.getOwnPropertyDescriptor(_,c).enumerable})),b.push.apply(b,e)}return b}function _objectSpread$1(_){for(var s=1;s<arguments.length;s++){var b=arguments[s]!=null?arguments[s]:{};s%2?ownKeys$1(Object(b),!0).forEach(function(e){_defineProperty(_,e,b[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(b)):ownKeys$1(Object(b)).forEach(function(e){Object.defineProperty(_,e,Object.getOwnPropertyDescriptor(b,e))})}return _}function _createSuper$2(_){var s=_isNativeReflectConstruct$2();return function(){var e=_getPrototypeOf(_),c;if(s){var D=_getPrototypeOf(this).constructor;c=Reflect.construct(e,arguments,D)}else c=e.apply(this,arguments);return _possibleConstructorReturn(this,c)}}function _isNativeReflectConstruct$2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var TextLayerInternal=function(_){_inherits(b,_);var s=_createSuper$2(b);function b(){var e;_classCallCheck(this,b);for(var c=arguments.length,D=new Array(c),N=0;N<c;N++)D[N]=arguments[N];return e=s.call.apply(s,[this].concat(D)),_defineProperty(_assertThisInitialized(e),"state",{textContent:null}),_defineProperty(_assertThisInitialized(e),"layerElement",reactExports.createRef()),_defineProperty(_assertThisInitialized(e),"endElement",reactExports.createRef()),_defineProperty(_assertThisInitialized(e),"loadTextContent",function(){var M=e.props.page,S=makeCancellablePromise(M.getTextContent());e.runningTask=S,S.promise.then(function(y){e.setState({textContent:y},e.onLoadSuccess)}).catch(function(y){e.onLoadError(y)})}),_defineProperty(_assertThisInitialized(e),"onLoadSuccess",function(){var M=e.props.onGetTextSuccess,S=e.state.textContent;M&&M(S)}),_defineProperty(_assertThisInitialized(e),"onLoadError",function(M){e.setState({textItems:!1});var S=e.props.onGetTextError;S&&S(M)}),_defineProperty(_assertThisInitialized(e),"onRenderSuccess",function(){var M=e.props.onRenderTextLayerSuccess;M&&M()}),_defineProperty(_assertThisInitialized(e),"onRenderError",function(M){var S=e.props.onRenderTextLayerError;S&&S(M)}),_defineProperty(_assertThisInitialized(e),"onMouseDown",function(){var M=e.endElement.current;M&&M.classList.add("active")}),_defineProperty(_assertThisInitialized(e),"onMouseUp",function(){var M=e.endElement.current;M&&M.classList.remove("active")}),e}return _createClass(b,[{key:"componentDidMount",value:function(){var c=this.props.page;invariant(c),parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10),this.loadTextContent()}},{key:"componentDidUpdate",value:function(c){var D=this.props.page;c.page&&D!==c.page&&this.loadTextContent()}},{key:"componentWillUnmount",value:function(){cancelRunningTask(this.runningTask)}},{key:"viewport",get:function(){var c=this.props,D=c.page,N=c.rotate,M=c.scale;return D.getViewport({scale:M,rotation:N})}},{key:"unrotatedViewport",get:function(){var c=this.props,D=c.page,N=c.scale;return D.getViewport({scale:N})}},{key:"rotate",get:function(){var c=this.props,D=c.page,N=c.rotate;return N-D.rotate}},{key:"renderTextLayer",value:function(){var c=this,D=this.state.textContent;if(!D)return null;var N=this.layerElement.current,M=this.viewport,S=this.props,y=S.customTextRenderer,k=S.pageIndex,B=S.pageNumber;cancelRunningTask(this.runningTask),N.innerHTML="";var R={container:N,textContent:D,viewport:M},P=pdfExports.renderTextLayer(R);this.runningTask=P,P.promise.then(function(){var h=document.createElement("div");if(h.className="endOfContent",N.append(h),c.endElement.current=h,y){var t=0;D.items.forEach(function(l,u){var T=c.layerElement.current.children[t],v=y(_objectSpread$1({pageIndex:k,pageNumber:B,itemIndex:u},l));T.innerHTML=v,t+=l.str&&l.hasEOL?2:1})}c.onRenderSuccess()}).catch(function(h){c.onRenderError(h)})}},{key:"render",value:function(){return U.createElement("div",{className:"react-pdf__Page__textContent textLayer",onMouseUp:this.onMouseUp,onMouseDown:this.onMouseDown,ref:this.layerElement},this.renderTextLayer())}}]),b}(reactExports.PureComponent);TextLayerInternal.propTypes={customTextRenderer:PropTypes.func,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onRenderTextLayerError:PropTypes.func,onRenderTextLayerSuccess:PropTypes.func,page:isPage.isRequired,pageIndex:PropTypes.number.isRequired,pageNumber:PropTypes.number.isRequired,rotate:isRotate,scale:PropTypes.number};function TextLayer(_){return U.createElement(PageContext.Consumer,null,function(s){return U.createElement(TextLayerInternal,_extends({},s,_))})}function _createSuper$1(_){var s=_isNativeReflectConstruct$1();return function(){var e=_getPrototypeOf(_),c;if(s){var D=_getPrototypeOf(this).constructor;c=Reflect.construct(e,arguments,D)}else c=e.apply(this,arguments);return _possibleConstructorReturn(this,c)}}function _isNativeReflectConstruct$1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var AnnotationLayerInternal=function(_){_inherits(b,_);var s=_createSuper$1(b);function b(){var e;_classCallCheck(this,b);for(var c=arguments.length,D=new Array(c),N=0;N<c;N++)D[N]=arguments[N];return e=s.call.apply(s,[this].concat(D)),_defineProperty(_assertThisInitialized(e),"state",{annotations:null}),_defineProperty(_assertThisInitialized(e),"layerElement",reactExports.createRef()),_defineProperty(_assertThisInitialized(e),"loadAnnotations",function(){var M=e.props.page,S=makeCancellablePromise(M.getAnnotations());e.runningTask=S,S.promise.then(function(y){e.setState({annotations:y},e.onLoadSuccess)}).catch(function(y){e.onLoadError(y)})}),_defineProperty(_assertThisInitialized(e),"onLoadSuccess",function(){var M=e.props.onGetAnnotationsSuccess,S=e.state.annotations;M&&M(S)}),_defineProperty(_assertThisInitialized(e),"onLoadError",function(M){e.setState({annotations:!1});var S=e.props.onGetAnnotationsError;S&&S(M)}),_defineProperty(_assertThisInitialized(e),"onRenderSuccess",function(){var M=e.props.onRenderAnnotationLayerSuccess;M&&M()}),_defineProperty(_assertThisInitialized(e),"onRenderError",function(M){var S=e.props.onRenderAnnotationLayerError;S&&S(M)}),e}return _createClass(b,[{key:"componentDidMount",value:function(){var c=this.props.page;invariant(c),parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10),this.loadAnnotations()}},{key:"componentDidUpdate",value:function(c){var D=this.props,N=D.page,M=D.renderForms;(c.page&&N!==c.page||M!==c.renderForms)&&this.loadAnnotations()}},{key:"componentWillUnmount",value:function(){cancelRunningTask(this.runningTask)}},{key:"viewport",get:function(){var c=this.props,D=c.page,N=c.rotate,M=c.scale;return D.getViewport({scale:M,rotation:N})}},{key:"renderAnnotationLayer",value:function(){var c=this.state.annotations;if(c){var D=this.props,N=D.imageResourcesPath,M=D.linkService,S=D.page,y=D.renderForms,k=this.viewport.clone({dontFlip:!0}),B={annotations:c,div:this.layerElement.current,imageResourcesPath:N,linkService:M,page:S,renderForms:y,viewport:k};this.layerElement.current.innerHTML="";try{pdfExports.AnnotationLayer.render(B),this.onRenderSuccess()}catch(R){this.onRenderError(R)}}}},{key:"render",value:function(){return U.createElement("div",{className:"react-pdf__Page__annotations annotationLayer",ref:this.layerElement},this.renderAnnotationLayer())}}]),b}(reactExports.PureComponent);AnnotationLayerInternal.propTypes={imageResourcesPath:PropTypes.string,linkService:isLinkService.isRequired,onGetAnnotationsError:PropTypes.func,onGetAnnotationsSuccess:PropTypes.func,onRenderAnnotationLayerError:PropTypes.func,onRenderAnnotationLayerSuccess:PropTypes.func,page:isPage,renderForms:PropTypes.bool,rotate:isRotate,scale:PropTypes.number};var AnnotationLayer=function _(s){return U.createElement(DocumentContext.Consumer,null,function(b){return U.createElement(PageContext.Consumer,null,function(e){return U.createElement(AnnotationLayerInternal,_extends({},b,e,s))})})};function ownKeys(_,s){var b=Object.keys(_);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(_);s&&(e=e.filter(function(c){return Object.getOwnPropertyDescriptor(_,c).enumerable})),b.push.apply(b,e)}return b}function _objectSpread(_){for(var s=1;s<arguments.length;s++){var b=arguments[s]!=null?arguments[s]:{};s%2?ownKeys(Object(b),!0).forEach(function(e){_defineProperty(_,e,b[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(e){Object.defineProperty(_,e,Object.getOwnPropertyDescriptor(b,e))})}return _}function _createSuper(_){var s=_isNativeReflectConstruct();return function(){var e=_getPrototypeOf(_),c;if(s){var D=_getPrototypeOf(this).constructor;c=Reflect.construct(e,arguments,D)}else c=e.apply(this,arguments);return _possibleConstructorReturn(this,c)}}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var defaultScale=1,PageInternal=function(_){_inherits(b,_);var s=_createSuper(b);function b(){var e;_classCallCheck(this,b);for(var c=arguments.length,D=new Array(c),N=0;N<c;N++)D[N]=arguments[N];return e=s.call.apply(s,[this].concat(D)),_defineProperty(_assertThisInitialized(e),"state",{page:null}),_defineProperty(_assertThisInitialized(e),"pageElement",reactExports.createRef()),_defineProperty(_assertThisInitialized(e),"onLoadSuccess",function(){var M=e.props,S=M.onLoadSuccess,y=M.registerPage,k=e.state.page;S&&S(makePageCallback(k,e.scale)),y&&y(e.pageIndex,e.pageElement.current)}),_defineProperty(_assertThisInitialized(e),"onLoadError",function(M){e.setState({page:!1});var S=e.props.onLoadError;S&&S(M)}),_defineProperty(_assertThisInitialized(e),"loadPage",function(){var M=e.props.pdf,S=e.getPageNumber();if(S){e.setState(function(k){return k.page?{page:null}:null});var y=makeCancellablePromise(M.getPage(S));e.runningTask=y,y.promise.then(function(k){e.setState({page:k},e.onLoadSuccess)}).catch(function(k){e.onLoadError(k)})}}),e}return _createClass(b,[{key:"componentDidMount",value:function(){var c=this.props.pdf;invariant(c),this.loadPage()}},{key:"componentDidUpdate",value:function(c){var D=this.props.pdf;if(c.pdf&&D!==c.pdf||this.getPageNumber()!==this.getPageNumber(c)){var N=this.props.unregisterPage;N&&N(this.getPageIndex(c)),this.loadPage()}}},{key:"componentWillUnmount",value:function(){var c=this.props.unregisterPage;c&&c(this.pageIndex),cancelRunningTask(this.runningTask)}},{key:"childContext",get:function(){var c=this.pageIndex,D=this.pageNumber,N=this.state.page;if(!N)return{};var M=this.props,S=M.canvasBackground,y=M.customTextRenderer,k=M.devicePixelRatio,B=M.onGetAnnotationsError,R=M.onGetAnnotationsSuccess,P=M.onGetTextError,h=M.onGetTextSuccess,t=M.onRenderAnnotationLayerError,l=M.onRenderAnnotationLayerSuccess,u=M.onRenderError,T=M.onRenderSuccess,v=M.onRenderTextLayerError,p=M.onRenderTextLayerSuccess,a=M.renderForms,o=M.renderInteractiveForms;return{canvasBackground:S,customTextRenderer:y,devicePixelRatio:k,onGetAnnotationsError:B,onGetAnnotationsSuccess:R,onGetTextError:P,onGetTextSuccess:h,onRenderAnnotationLayerError:t,onRenderAnnotationLayerSuccess:l,onRenderError:u,onRenderSuccess:T,onRenderTextLayerError:v,onRenderTextLayerSuccess:p,page:N,pageIndex:c,pageNumber:D,renderForms:a??o,rotate:this.rotate,scale:this.scale}}},{key:"getPageIndex",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props;return isProvided(c.pageNumber)?c.pageNumber-1:isProvided(c.pageIndex)?c.pageIndex:null}},{key:"getPageNumber",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props;return isProvided(c.pageNumber)?c.pageNumber:isProvided(c.pageIndex)?c.pageIndex+1:null}},{key:"pageIndex",get:function(){return this.getPageIndex()}},{key:"pageNumber",get:function(){return this.getPageNumber()}},{key:"rotate",get:function(){var c=this.props.rotate;if(isProvided(c))return c;var D=this.state.page;return D?D.rotate:null}},{key:"scale",get:function(){var c=this.state.page;if(!c)return null;var D=this.props,N=D.scale,M=D.width,S=D.height,y=this.rotate,k=1,B=N===null?defaultScale:N;if(M||S){var R=c.getViewport({scale:1,rotation:y});k=M?M/R.width:S/R.height}return B*k}},{key:"eventProps",get:function(){var c=this;return makeEventProps(this.props,function(){var D=c.state.page;return D&&makePageCallback(D,c.scale)})}},{key:"pageKey",get:function(){return"".concat(this.pageIndex,"@").concat(this.scale,"/").concat(this.rotate)}},{key:"pageKeyNoScale",get:function(){return"".concat(this.pageIndex,"/").concat(this.rotate)}},{key:"renderMainLayer",value:function(){var c=this.props,D=c.canvasRef,N=c.renderMode;switch(N){case"none":return null;case"svg":return U.createElement(PageSVG,{key:"".concat(this.pageKeyNoScale,"_svg")});case"canvas":default:return U.createElement(PageCanvas,{key:"".concat(this.pageKey,"_canvas"),canvasRef:D})}}},{key:"renderTextLayer",value:function(){var c=this.props.renderTextLayer;return c?U.createElement(TextLayer,{key:"".concat(this.pageKey,"_text")}):null}},{key:"renderAnnotationLayer",value:function(){var c=this.props.renderAnnotationLayer;return c?U.createElement(AnnotationLayer,{key:"".concat(this.pageKey,"_annotations")}):null}},{key:"renderChildren",value:function(){var c=this.props.children;return U.createElement(PageContext.Provider,{value:this.childContext},this.renderMainLayer(),this.renderTextLayer(),this.renderAnnotationLayer(),c)}},{key:"renderContent",value:function(){var c=this.pageNumber,D=this.props.pdf,N=this.state.page;if(!c){var M=this.props.noData;return U.createElement(Message,{type:"no-data"},typeof M=="function"?M():M)}if(D===null||N===null){var S=this.props.loading;return U.createElement(Message,{type:"loading"},typeof S=="function"?S():S)}if(D===!1||N===!1){var y=this.props.error;return U.createElement(Message,{type:"error"},typeof y=="function"?y():y)}return this.renderChildren()}},{key:"render",value:function(){var c=this.pageNumber,D=this.props,N=D.className,M=D.inputRef;return U.createElement("div",_extends({className:clsx("react-pdf__Page",N),"data-page-number":c,ref:mergeRefs(M,this.pageElement),style:{position:"relative",minWidth:"min-content",minHeight:"min-content"}},this.eventProps),this.renderContent())}}]),b}(reactExports.PureComponent);PageInternal.defaultProps={error:"Failed to load the page.",loading:"Loading page…",noData:"No page specified.",renderAnnotationLayer:!0,renderMode:"canvas",renderTextLayer:!0,scale:defaultScale};var isFunctionOrNode=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);PageInternal.propTypes=_objectSpread(_objectSpread({},eventProps),{},{canvasBackground:PropTypes.string,children:PropTypes.node,className:isClassName,customTextRenderer:PropTypes.func,devicePixelRatio:PropTypes.number,error:isFunctionOrNode,height:PropTypes.number,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,onRenderTextLayerError:PropTypes.func,onRenderTextLayerSuccess:PropTypes.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,registerPage:PropTypes.func,renderAnnotationLayer:PropTypes.bool,renderForms:PropTypes.bool,renderInteractiveForms:PropTypes.bool,renderMode:isRenderMode,renderTextLayer:PropTypes.bool,rotate:isRotate,scale:PropTypes.number,unregisterPage:PropTypes.func,width:PropTypes.number});function Page(_,s){return U.createElement(DocumentContext.Consumer,null,function(b){return U.createElement(PageInternal,_extends({ref:s},b,_))})}const Page$1=U.forwardRef(Page);pdfExports.GlobalWorkerOptions.workerSrc="pdf.worker.js";function ArrowUpTrayIcon({title:_,titleId:s,...b},e){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":s},b),_?reactExports.createElement("title",{id:s},_):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"}))}const ForwardRef$6=reactExports.forwardRef(ArrowUpTrayIcon);function CheckCircleIcon({title:_,titleId:s,...b},e){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":s},b),_?reactExports.createElement("title",{id:s},_):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const ForwardRef$5=reactExports.forwardRef(CheckCircleIcon);function CurrencyDollarIcon({title:_,titleId:s,...b},e){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":s},b),_?reactExports.createElement("title",{id:s},_):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const ForwardRef$4=reactExports.forwardRef(CurrencyDollarIcon);function DocumentCheckIcon({title:_,titleId:s,...b},e){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":s},b),_?reactExports.createElement("title",{id:s},_):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125v-9M10.125 2.25h.375a9 9 0 0 1 9 9v.375M10.125 2.25A3.375 3.375 0 0 1 13.5 5.625v1.5c0 .621.504 1.125 1.125 1.125h1.5a3.375 3.375 0 0 1 3.375 3.375M9 15l2.25 2.25L15 12"}))}const ForwardRef$3=reactExports.forwardRef(DocumentCheckIcon);function ExclamationCircleIcon({title:_,titleId:s,...b},e){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":s},b),_?reactExports.createElement("title",{id:s},_):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const ForwardRef$2=reactExports.forwardRef(ExclamationCircleIcon);function MagnifyingGlassIcon({title:_,titleId:s,...b},e){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":s},b),_?reactExports.createElement("title",{id:s},_):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const ForwardRef$1=reactExports.forwardRef(MagnifyingGlassIcon);function XCircleIcon({title:_,titleId:s,...b},e){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":s},b),_?reactExports.createElement("title",{id:s},_):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const ForwardRef=reactExports.forwardRef(XCircleIcon);pdfExports.GlobalWorkerOptions.workerSrc=`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfExports.version}/pdf.worker.min.js`;const InspectionManagement=()=>{const[_,s]=reactExports.useState([]),[b,e]=reactExports.useState(null),[c,D]=reactExports.useState(""),[N,M]=reactExports.useState(""),[S,y]=reactExports.useState(null),[k,B]=reactExports.useState(!1),[R,P]=reactExports.useState(null),[h,t]=reactExports.useState(!1),[l,u]=reactExports.useState(null),[T,v]=reactExports.useState(49),[p,a]=reactExports.useState(!1),[o,n]=reactExports.useState(""),[x,C]=reactExports.useState(""),[z,G]=reactExports.useState(!1),[ae,le]=reactExports.useState(null),[re,te]=reactExports.useState(null),[X,Y]=reactExports.useState(1),[K,se]=reactExports.useState(0),[de,ge]=reactExports.useState(null);reactExports.useEffect(()=>{d(),V()},[]);const V=async()=>{var O,w;try{const f=localStorage.getItem("token");if(!f){n("جلسة المستخدم منتهية. الرجاء تسجيل الدخول مرة أخرى");return}const j=await axios.get("/api/admin/inspection/fee",{headers:{Authorization:`Bearer ${f}`,"Content-Type":"application/json"}});j.data&&j.data.fee!==void 0?v(j.data.fee):(console.error("Invalid response format:",j.data),n("فشل في جلب رسوم الفحص. الرجاء تحديث الصفحة"))}catch(f){console.error("Error fetching inspection fee:",{message:f.message,response:(O=f.response)==null?void 0:O.data,status:(w=f.response)==null?void 0:w.status}),n("فشل في جلب رسوم الفحص. الرجاء تحديث الصفحة")}},g=async()=>{var w,f,j,ne,q,J;const O=parseFloat(T);if(isNaN(O)||O<0){n("الرجاء إدخال قيمة صحيحة");return}n("");try{const ee=localStorage.getItem("token");if(!ee){n("جلسة المستخدم منتهية. الرجاء تسجيل الدخول مرة أخرى");return}const oe=await axios.put("/api/admin/inspection/fee",{fee:O},{headers:{Authorization:`Bearer ${ee}`,"Content-Type":"application/json"}});oe.data&&oe.data.success?(v(O),a(!1)):n("فشل في تحديث رسوم الفحص. الرجاء المحاولة مرة أخرى")}catch(ee){console.error("Error updating inspection fee:",{message:ee.message,response:(w=ee.response)==null?void 0:w.data,status:(f=ee.response)==null?void 0:f.status});const oe=((ne=(j=ee.response)==null?void 0:j.data)==null?void 0:ne.message)||((J=(q=ee.response)==null?void 0:q.data)==null?void 0:J.error)||"فشل في تحديث رسوم الفحص. الرجاء المحاولة مرة أخرى";n(oe)}},d=async()=>{var O,w,f,j,ne;try{B(!0),P(null);const q=localStorage.getItem("token");if(!q){P("جلسة المستخدم منتهية. الرجاء تسجيل الدخول مرة أخرى");return}const J=await axios.get("/api/admin/inspection/orders",{headers:{Authorization:`Bearer ${q}`,"Content-Type":"application/json"}});J.data&&J.data.orders?s(J.data.orders):s([])}catch(q){console.error("Error fetching orders:",q);const J=((f=(w=(O=q.response)==null?void 0:O.data)==null?void 0:w.error)==null?void 0:f.sqlMessage)||((ne=(j=q.response)==null?void 0:j.data)==null?void 0:ne.message)||"فشل في جلب الطلبات. الرجاء المحاولة مرة أخرى";P(J)}finally{B(!1)}},L=async O=>{var w,f,j,ne,q;try{P(null);const J=localStorage.getItem("token");if(!J){P("جلسة المستخدم منتهية. الرجاء تسجيل الدخول مرة أخرى");return}await axios.post(`/api/admin/inspection/orders/${O}/start`,{},{headers:{Authorization:`Bearer ${J}`,"Content-Type":"application/json"}}),s(oe=>oe.map(he=>he.id===O?{...he,status:"pending"}:he));const ee=_.find(oe=>oe.id===O);ee&&e({...ee,status:"pending"})}catch(J){console.error("Error starting inspection:",J);const ee=((j=(f=(w=J.response)==null?void 0:w.data)==null?void 0:f.error)==null?void 0:j.sqlMessage)||((q=(ne=J.response)==null?void 0:ne.data)==null?void 0:q.message)||"فشل في بدء عملية الفحص. الرجاء المحاولة مرة أخرى";P(ee),d()}},W=O=>O?O.type!=="application/pdf"?(C("يجب أن يكون الملف بصيغة PDF"),!1):O.size>10*1024*1024?(C("حجم الملف يجب أن لا يتجاوز 10 ميجابايت"),!1):(C(""),!0):(C("يرجى اختيار ملف"),!1);function $({numPages:O}){te(O),ge(null)}function H(O){console.error("Error while loading document:",O),ge("Failed to load PDF file")}const i=O=>{const w=O.target.files[0];if(W(w)){y(w);const f=URL.createObjectURL(w);le(f),ge(null),C("")}else O.target.value=null,y(null),le(null)};reactExports.useEffect(()=>()=>{ae&&URL.revokeObjectURL(ae)},[ae]);const m=async O=>{var w,f,j,ne;try{if(!S||!c){P("الرجاء تعبئة رقم هاتف الفاحص وإرفاق ملف التقرير");return}if(!/^(05)[0-9]{8}$/.test(c)){P("رقم الهاتف يجب أن يبدأ ب 05 ويتكون من 10 أرقام");return}P(null),G(!0),se(0);const J=localStorage.getItem("token");if(!J){P("جلسة المستخدم منتهية. الرجاء تسجيل الدخول مرة أخرى");return}const ee=new FormData;ee.append("report",S),ee.append("inspectionStatus",O),ee.append("inspectorPhone",c),N&&N.trim()&&ee.append("inspectorNotes",N.trim());const oe=await axios.post(`/api/admin/inspection/orders/${b.id}/report`,ee,{headers:{Authorization:`Bearer ${J}`,"Content-Type":"multipart/form-data"},onUploadProgress:he=>{const ie=Math.round(he.loaded*100/he.total);se(ie)}});if(oe.data&&oe.data.reportUrl)e(null),D(""),M(""),y(null),le(null),se(0),await d();else throw new Error("Invalid response format")}catch(q){console.error("Error submitting report:",q);let J="فشل في رفع التقرير. ";(f=(w=q.response)==null?void 0:w.data)!=null&&f.message?J+=q.response.data.message:((j=q.response)==null?void 0:j.status)===413?J+="حجم الملف كبير جداً. الحد الأقصى هو 10 ميجابايت":((ne=q.response)==null?void 0:ne.status)===415?J+="نوع الملف غير مدعوم. يرجى رفع ملف PDF فقط":J+="الرجاء المحاولة مرة أخرى",P(J)}finally{G(!1)}},E=async O=>{var w;try{const f=localStorage.getItem("token");if(!f){P("جلسة المستخدم منتهية. الرجاء تسجيل الدخول مرة أخرى");return}u(O),P(null);const j=await axios.get(`/api/admin/inspection/orders/${O}/report`,{headers:{Authorization:`Bearer ${f}`}});j.data&&j.data.report&&j.data.report.report_file_path?window.open(j.data.report.report_file_path,"_blank"):P("تقرير الفحص غير موجود")}catch(f){console.error("Error downloading report:",f),((w=f.response)==null?void 0:w.status)===404?P("تقرير الفحص غير موجود"):P("فشل في تحميل التقرير. الرجاء المحاولة مرة أخرى")}finally{u(null)}},A=U.useMemo(()=>{const O=_.filter(w=>String(w.payment_status).toLowerCase()==="paid");return h?O.filter(w=>w.status==="passed"||w.status==="failed"):O.filter(w=>w.status==="pending")},[_,h]),F=O=>{switch(O){case"passed":return{text:"تم الفحص - القطعة سليمة",className:"bg-green-100 text-green-800"};case"failed":return{text:"تم الفحص - القطعة غير صالحة",className:"bg-red-100 text-red-800"};default:return{text:"بانتظار الفحص",className:"bg-yellow-100 text-yellow-800"}}};return k?jsxRuntimeExports.jsx("div",{className:"flex justify-center items-center min-h-screen",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(HelmetExport,{children:jsxRuntimeExports.jsx("title",{children:"فحص الطلبات"})}),jsxRuntimeExports.jsxs("div",{className:"container mx-auto px-4 py-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>t(!h),className:`inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ${h?"bg-gray-600 hover:bg-gray-700":"bg-indigo-600 hover:bg-indigo-700"}`,children:[jsxRuntimeExports.jsx(ForwardRef$1,{className:"h-5 w-5 ml-2"}),h?"عرض الطلبات المعلقة":"عرض الطلبات المفحوصة"]}),b&&jsxRuntimeExports.jsxs("button",{onClick:()=>e(null),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",viewBox:"0 0 20 20",fill:"currentColor",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L4.414 9H17a1 1 0 110 2H4.414l5.293 5.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"العودة إلى القائمة"]})]}),jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-gray-900 text-right",children:"إدارة فحص الطلبات"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(ForwardRef$4,{className:"h-6 w-6 text-gray-500"}),jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold",children:"رسوم الفحص"})]}),p?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("input",{type:"number",value:T,onChange:O=>v(O.target.value),className:"w-32 border rounded-lg p-2 text-right",min:"0",step:"0.01"}),jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"ر.س"}),jsxRuntimeExports.jsx("button",{onClick:g,className:"bg-green-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-green-700 transition-colors",children:"حفظ"}),jsxRuntimeExports.jsx("button",{onClick:()=>{a(!1),n(""),V()},className:"bg-gray-100 text-gray-600 px-4 py-2 rounded-lg text-sm hover:bg-gray-200 transition-colors",children:"إلغاء"})]}):jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsxs("span",{className:"text-xl font-semibold",children:[T," ر.س"]}),jsxRuntimeExports.jsx("button",{onClick:()=>a(!0),className:"bg-blue-100 text-blue-600 px-4 py-2 rounded-lg text-sm hover:bg-blue-200 transition-colors",children:"تعديل"})]})]}),o&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-2 text-right",children:o})]}),R&&jsxRuntimeExports.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4 text-right",children:R}),b?jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8",children:[jsxRuntimeExports.jsx("div",{className:"mb-8",children:jsxRuntimeExports.jsxs("h2",{className:"text-xl font-semibold text-right",children:["تقرير الفحص - طلب رقم ",b.id]})}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 text-right mb-2",children:"رقم هاتف الفاحص"}),jsxRuntimeExports.jsx("input",{type:"tel",className:"w-full border-gray-300 rounded-md shadow-sm text-right",value:c,onChange:O=>D(O.target.value),placeholder:"05xxxxxxxx",dir:"rtl"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 text-right mb-2",children:"ملاحظات الفحص"}),jsxRuntimeExports.jsx("textarea",{className:"w-full border-gray-300 rounded-md shadow-sm text-right",value:N,onChange:O=>M(O.target.value),rows:"4",dir:"rtl"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 text-right mb-2",children:"تقرير الفحص (PDF)"}),jsxRuntimeExports.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md relative",children:jsxRuntimeExports.jsx("div",{className:"space-y-1 text-center",children:S?jsxRuntimeExports.jsxs("div",{className:"w-full",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["تم اختيار: ",S.name]}),ae&&jsxRuntimeExports.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[jsxRuntimeExports.jsx(Document,{file:ae,onLoadSuccess:$,onLoadError:H,loading:jsxRuntimeExports.jsxs("div",{className:"text-center py-4",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500 mx-auto"}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"جاري تحميل الملف..."})]}),error:jsxRuntimeExports.jsx("div",{className:"text-center py-4 text-red-600",children:jsxRuntimeExports.jsx("p",{children:de||"حدث خطأ في تحميل الملف"})}),children:jsxRuntimeExports.jsx(Page$1,{pageNumber:X,width:300,renderTextLayer:!0,renderAnnotationLayer:!0})}),re>0&&jsxRuntimeExports.jsxs("div",{className:"mt-2 flex justify-center items-center gap-4",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Y(Math.max(1,X-1)),disabled:X<=1,className:"px-2 py-1 text-sm bg-gray-100 rounded disabled:opacity-50",children:"السابق"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600",children:["صفحة ",X," من ",re]}),jsxRuntimeExports.jsx("button",{onClick:()=>Y(Math.min(re,X+1)),disabled:X>=re,className:"px-2 py-1 text-sm bg-gray-100 rounded disabled:opacity-50",children:"التالي"})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>{y(null),le(null),te(null),Y(1),ge(null)},className:"mt-4 text-sm text-red-600 hover:text-red-800",children:"إزالة الملف"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ForwardRef$6,{className:"mx-auto h-12 w-12 text-gray-400"}),jsxRuntimeExports.jsx("div",{className:"flex text-sm text-gray-600",children:jsxRuntimeExports.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500",children:[jsxRuntimeExports.jsx("span",{children:"اختر ملف PDF"}),jsxRuntimeExports.jsx("input",{id:"file-upload",name:"file-upload",type:"file",accept:".pdf,application/pdf",className:"sr-only",onChange:i,disabled:z})]})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"PDF حتى 10 ميجابايت"})]})})}),x&&jsxRuntimeExports.jsxs("p",{className:"text-sm text-red-600 flex items-center justify-end mt-2",children:[jsxRuntimeExports.jsx(ForwardRef$2,{className:"h-5 w-5 ml-1"}),x]}),z&&jsxRuntimeExports.jsxs("div",{className:"mt-2",children:[jsxRuntimeExports.jsx("div",{className:"bg-gray-200 rounded-full h-2.5",children:jsxRuntimeExports.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${K}%`}})}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 text-center mt-1",children:[K,"%"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end space-x-4",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>m("failed"),disabled:z,className:`inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ${z?"bg-gray-400 cursor-not-allowed":"bg-red-600 hover:bg-red-700"}`,children:[jsxRuntimeExports.jsx(ForwardRef,{className:"h-5 w-5 ml-2"}),z?"جاري الرفع...":"القطعة غير صالحة"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>m("passed"),disabled:z,className:`inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ${z?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"}`,children:[jsxRuntimeExports.jsx(ForwardRef$5,{className:"h-5 w-5 ml-2"}),z?"جاري الرفع...":"القطعة سليمة"]})]})]})]}):jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:jsxRuntimeExports.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-50",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"رقم الطلب"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"المشتري"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"القطع المطلوبة"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"السعر الإجمالي"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"تاريخ الطلب"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الحالة"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الإجراءات"})]})}),jsxRuntimeExports.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A.map(O=>{var j;const w=F(O.status),f=l===O.id;return jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:O.id}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 text-right",children:jsxRuntimeExports.jsxs("div",{className:"font-medium text-gray-900",children:[O.buyer_first_name," ",O.buyer_last_name]})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 text-right",children:jsxRuntimeExports.jsx("div",{className:"space-y-1",children:(j=O.products)==null?void 0:j.map((ne,q)=>jsxRuntimeExports.jsxs("div",{className:"text-sm",children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-gray-900",children:ne.title}),jsxRuntimeExports.jsxs("div",{className:"text-gray-500",children:[ne.part_name," (الكمية: ",ne.quantity,")",jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-400",children:["البائع: ",ne.seller_email]})]})]},`${O.id}-${ne.title}-${q}`))})}),jsxRuntimeExports.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:[O.total_price," ر.س"]}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:new Date(O.created_at).toLocaleDateString("ar",{year:"numeric",month:"long",day:"numeric",calendar:"gregory"})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:jsxRuntimeExports.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${w.className}`,children:w.text})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:O.status==="pending"?jsxRuntimeExports.jsxs("button",{onClick:()=>L(O.id),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[jsxRuntimeExports.jsx(ForwardRef$3,{className:"h-4 w-4 ml-2"}),"بدء الفحص"]}):jsxRuntimeExports.jsx("button",{onClick:()=>E(O.id),disabled:f,className:`inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white ${f?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"}`,children:f?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-4 w-4 ml-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"جاري التحميل..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ForwardRef$7,{className:"h-4 w-4 ml-2"}),"تحميل التقرير"]})})})]},O.id)})})]})})]})]})};export{InspectionManagement as default};
